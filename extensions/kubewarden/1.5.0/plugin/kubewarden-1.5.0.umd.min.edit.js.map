{"version":3,"sources":["webpack://kubewarden-1.5.0/./components/Policies/Create.vue?b390","webpack://kubewarden-1.5.0/./components/Policies/PolicyGrid.vue?642d","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-1.5.0/edit/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.admissionpolicy.vue?5e19","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.admissionpolicy.vue?de37","webpack://kubewarden-1.5.0/./components/Policies/Values.vue?0689","webpack://kubewarden-1.5.0/./components/Policies/Values.vue?906c","webpack://kubewarden-1.5.0/./components/Policies/Config.vue","webpack://kubewarden-1.5.0/components/Policies/Config.vue","webpack://kubewarden-1.5.0/./components/Policies/Config.vue?4583","webpack://kubewarden-1.5.0/./components/Policies/Config.vue?8716","webpack://kubewarden-1.5.0/./components/PolicyServer/Values.vue?4987","webpack://kubewarden-1.5.0/./components/PolicyServer/Values.vue?d551","webpack://kubewarden-1.5.0/./components/Policies/Create.vue?8b7a","webpack://kubewarden-1.5.0/./components/Policies/Values.vue?808d","webpack://kubewarden-1.5.0/./components/Policies/Create.vue","webpack://kubewarden-1.5.0/./components/Policies/PolicyGrid.vue","webpack://kubewarden-1.5.0/./modules/artifacthub.ts","webpack://kubewarden-1.5.0/components/Policies/PolicyGrid.vue","webpack://kubewarden-1.5.0/./components/Policies/PolicyGrid.vue?a948","webpack://kubewarden-1.5.0/./components/Policies/PolicyGrid.vue?ad9d","webpack://kubewarden-1.5.0/components/Policies/Create.vue","webpack://kubewarden-1.5.0/./components/Policies/Create.vue?487c","webpack://kubewarden-1.5.0/./components/Policies/Create.vue?811f","webpack://kubewarden-1.5.0/./components/PolicyServer/Values.vue?bae2","webpack://kubewarden-1.5.0/./utils/object.ts","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-1.5.0/./components/PolicyServer/Values.vue","webpack://kubewarden-1.5.0/components/PolicyServer/Values.vue","webpack://kubewarden-1.5.0/./components/PolicyServer/Values.vue?c5ec","webpack://kubewarden-1.5.0/./components/PolicyServer/Values.vue?1366","webpack://kubewarden-1.5.0/edit/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.policyserver.vue?8e6e","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.policyserver.vue?81e9","webpack://kubewarden-1.5.0/./components/Policies/Values.vue","webpack://kubewarden-1.5.0/components/Policies/Values.vue","webpack://kubewarden-1.5.0/./components/Policies/Values.vue?ee97","webpack://kubewarden-1.5.0/./components/Policies/Values.vue?7016","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-1.5.0/edit/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.clusteradmissionpolicy.vue?9a87","webpack://kubewarden-1.5.0/./edit/policies.kubewarden.io.clusteradmissionpolicy.vue?b2d2","webpack://kubewarden-1.5.0/./components/Policies/PolicyGrid.vue?7218","webpack://kubewarden-1.5.0/./components/Policies/PolicyGrid.vue?ee7d","webpack://kubewarden-1.5.0/./components/Policies/Create.vue?84ea"],"names":["content","__esModule","default","module","i","locals","exports","add","render","_vm","this","_c","_self","isCreate","attrs","value","mode","realMode","on","finish","updateYamlValuesFromEdit","staticRenderFns","name","props","type","Object","required","String","_EDIT","components","CruResource","Config","Create","mixins","CreateEditView","provide","chartType","computed","_CREATE","methods","event","removeEmptyAttrs","save","e","handleGrowl","error","store","$store","val","parsed","jsyaml","load","assign","component","$fetchState","pending","chartValues","yamlValues","$event","$emit","_VIEW","Loading","Values","_this$value","_this$value$metadata","_this$value$metadata$","policy","questions","metadata","annotations","ARTIFACTHUB_PKG_ANNOTATION","_artifactHubPackage$d","artifactHubPackage","artifactHubPackageVersion","data","DATA_ANNOTATIONS","QUESTIONS","_this$chartValues$pol","_this$chartValues$pol2","defaultPolicy","structuredClone","DEFAULT_POLICY","merged","merge","spec","settings","set","policyQuestions","parsePackageMetadata","console","warn","saferDump","___CSS_LOADER_API_IMPORT___","push","hideArtifactHubBanner","_e","staticClass","closeBanner","directives","rawName","t","expression","addArtifactHub","hideAirgapBanner","loadingPackages","ref","errors","steps","bannerTitle","typeModule","reset","done","scopedSlots","_u","key","fn","packages","selectType","style","_v","_s","proxy","packageValues","readme","customPolicy","yamlOption","canFinish","model","callback","$$v","organizationOptions","length","organizations","keywordOptions","keywords","resourceOptions","category","searchQuery","domProps","target","composing","refresh","_t","_l","filteredSubtypes","subtype","package_id","hasAnnotation","resourceType","display_name","description","signed","signatures","subtypeSignature","isOfficial","require","resourcesFromAnnotation","artifactHubPackages","_resources$flatMap","out","resources","flatMap","annotation","resource","split","forEach","s","trim","sort","Set","filter","Boolean","isGlobalPolicy","schemas","_artifactHubPackage$d2","_artifactHubPackage$d3","targetsNonNamespaced","some","schema","_schema$attributes","_schema$attributes2","attributes","kind","namespaced","undefined","Array","inject","LabeledSelect","fetch","query","$route","CATEGORY","SEARCH_QUERY","KUBEWARDEN_PRODUCT_NAME","beforeMount","isEmpty","officialExists","find","$nextTick","_officialExists$repos","repository","organization_display_name","allSchemas","getters","SCHEMA","filteredPackages","isPreRelease","isPrerelease","showPreRelease","KUBEWARDEN","ADMISSION_POLICY","subtypes","_subtype$data","_subtype$data$kubewar","includes","searchTokens","map","x","ensureRegex","token","_subtype$display_name","match","selected","_subtype$keywords","_subtype$keywords2","org","_subtype$repository","_subtype$repository2","user_alias","sortBy","_this$filteredSubtype","flattened","_this$filteredSubtype2","_subtype$repository3","_subtype$repository4","SHOW_PRE_RELEASE","_subtype$data2","_subtype$data3","semver","prerelease","version","_subtype$repository5","_subtype$repository5$","organization_name","toLowerCase","_subtype$signatures","AsyncButton","Banner","Markdown","Wizard","PolicyGrid","_this$schema","_this$schema$attribut","_this$schema2","_this$schema2$attribu","_this$schema3","_this$schema3$attribu","hasArtifactHub","getPackages","apiVersion","group","hasCustomPolicy","VALUES_STATE","FORM","stepPolicies","hidden","label","ready","weight","stepReadme","stepValues","isAirgap","isSelected","_this$chartValues","YAML","hasRequired","artifactHubWhitelist","_this$chartValues2","_this$chartValues3","_this$chartValues3$qu","_this$chartValues3$qu2","rules","requiredRules","acceptedRules","acceptedValues","requiredQuestions","q","variable","acceptedQuestions","_this$type","_this$type$repository","_this$packages","url","p","_p$repository","a","b","requiredProp","requiredKeys","accepted","isArray","prop","checkProperties","values","isEqual","banner","retry","res","dispatch","status","close","ns","allNamespaces","NAMESPACE","nsTemplate","disableOpenApiValidation","existing","n","_n$metadata","nsResource","btnCb","updateWhitelist","_this$schema4","$router","replace","params","cluster","product","id","_this$chartValues5","_this$chartValues4","isNamespaceNew","createNamespace","namespace","artifactHubRepo","promises","pkg","packageDetails","Promise","all","_pkg$data","_policyDetails$data","updatedCustomPolicy","contextAwareResources","policyDetails","_pkg$repository","_this$type2","_this$type2$repositor","packageQuestions","packageAnnotation","parseAnnotation","obj","_policyDetails$data2","determineAnnotation","_policyDetails$data3","JSON","parse","updatedPolicy","containers_images","image","CONTEXT_AWARE","RULES","mutating","MUTATION","_event$step","step","initialState","_this$chartValues6","_this$chartValues6$po","isCustom","$set","$refs","wizard","next","keys","isObject","doneRoute","validationPassed","handleValidationPassed","isEdit","YAML_OPTIONS","showForm","tabChanged","valuesComponent","tag","originalYamlValues","editorMode","updateYamlValues","currentYamlValues","preYamlOption","ButtonGroup","ResourceCancelModal","Tabbed","YamlEditor","valuesYaml","generateYaml","loadValuesComponent","configValues","showQuestions","showValuesComponent","watch","neu","old","EDITOR_MODES","EDIT_CODE","yaml","createYaml","lines","filteredLines","line","modifiedYAML","join","haveComponent","importComponent","window","scrollTop","created","DEFAULT_POLICY_SERVER","_this$chartValues$spe","_this$chartValues$spe2","_this$chartValues$spe3","_this$chartValues2$sp","_this$chartValues2$sp2","_this$chartValues2$sp3","_this$chartValues3$sp","_this$chartValues3$sp2","_this$chartValues3$sp3","securityContexts","seccompProfile","repoType","repoName","chartName","KUBEWARDEN_CHARTS","CONTROLLER","mounted","_this$chartValues2$po","_this$chartValues3$po","_this$chartValues3$po2","namespaceSelector","matchExpressions","RANCHER_NS_MATCH_EXPRESSION","_this$yamlValues","cloned","_this$value2","_this$value3","isClone","_CLONE","_this$value2$metadata","_this$value2$metadata2","isKubewardenDefaultPolicy","labels"],"mappings":"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","file":"kubewarden-1.5.0.umd.min.edit.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=db2b144a&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6211eec7\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyGrid.vue?vue&type=style&index=0&id=bd6d92b8&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isCreate)?_c('Create',{attrs:{\"value\":_vm.value,\"mode\":_vm.mode}}):_c('CruResource',{attrs:{\"resource\":_vm.value,\"mode\":_vm.realMode,\"can-yaml\":false},on:{\"finish\":_vm.finish}},[_c('Config',{attrs:{\"value\":_vm.value,\"mode\":_vm.realMode},on:{\"updateYamlValues\":_vm.updateYamlValuesFromEdit}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport jsyaml from 'js-yaml';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport CreateEditView from '@shell/mixins/create-edit-view';\n\nimport CruResource from '@shell/components/CruResource';\nimport { removeEmptyAttrs } from '../utils/object';\nimport { handleGrowl } from '../utils/handle-growl';\n\nimport Config from '../components/Policies/Config';\nimport Create from '../components/Policies/Create';\n\nexport default {\n  name: 'AdmissionPolicy',\n\n  props: {\n    value: {\n      type:     Object,\n      required: true\n    },\n\n    mode: {\n      type:    String,\n      default: _EDIT\n    },\n\n    realMode: {\n      type:    String,\n      default: _EDIT\n    }\n  },\n\n  components: {\n    CruResource, Config, Create\n  },\n\n  mixins: [CreateEditView],\n\n  provide() {\n    return { chartType: this.value.type, realMode: this.realMode };\n  },\n\n  computed: {\n    isCreate() {\n      return this.realMode === _CREATE;\n    },\n  },\n\n  methods: {\n    async finish(event) {\n      try {\n        removeEmptyAttrs(this.value);\n\n        await this.save(event);\n      } catch (e) {\n        handleGrowl({ error: e, store: this.$store });\n      }\n    },\n    // this updates the \"value\" obj for CAP's\n    // with the updated values that came from the \"edit YAML\" scenario\n    updateYamlValuesFromEdit(val) {\n      const parsed = jsyaml.load(val);\n\n      removeEmptyAttrs(parsed);\n      Object.assign(this.value, parsed);\n    }\n  }\n};\n</script>\n\n<template>\n  <Create v-if=\"isCreate\" :value=\"value\" :mode=\"mode\" />\n  <CruResource\n    v-else\n    :resource=\"value\"\n    :mode=\"realMode\"\n    :can-yaml=\"false\"\n    @finish=\"finish\"\n  >\n    <Config\n      :value=\"value\"\n      :mode=\"realMode\"\n      @updateYamlValues=\"updateYamlValuesFromEdit\"\n    />\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=template&id=b7080908&\"\nimport script from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=style&index=0&id=d467cb12&prod&lang=scss&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=style&index=0&id=d467cb12&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"224a7bda\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading'):_c('Values',{attrs:{\"value\":_vm.value,\"chart-values\":_vm.chartValues,\"yaml-values\":_vm.yamlValues,\"mode\":_vm.mode},on:{\"updateYamlValues\":function($event){return _vm.$emit('updateYamlValues', $event)}}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport merge from 'lodash/merge';\n\nimport { _VIEW } from '@shell/config/query-params';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { set } from '@shell/utils/object';\n\nimport Loading from '@shell/components/Loading';\n\nimport { ARTIFACTHUB_PKG_ANNOTATION, DATA_ANNOTATIONS, DEFAULT_POLICY } from '../../types';\n\nimport Values from './Values.vue';\n\nexport default {\n  name: 'Config',\n\n  props: {\n    mode: {\n      type:     String,\n      default:  _VIEW\n    },\n    value: {\n      type:    Object,\n      default: () => {}\n    }\n  },\n\n  components: { Loading, Values },\n\n  async fetch() {},\n\n  async mounted() {\n    this.chartValues = {\n      policy:    this.value,\n      questions: null\n    };\n\n    if ( this.value?.metadata?.annotations?.[ARTIFACTHUB_PKG_ANNOTATION] ) {\n      try {\n        const artifactHubPackage = await this.value.artifactHubPackageVersion();\n\n        if ( artifactHubPackage && !artifactHubPackage.error && artifactHubPackage.data?.[DATA_ANNOTATIONS.QUESTIONS] ) {\n          const defaultPolicy = structuredClone(DEFAULT_POLICY);\n\n          const merged = merge(defaultPolicy.spec.settings, this.chartValues.policy?.spec?.settings);\n\n          set(this.chartValues.policy.spec, 'settings', merged);\n\n          this.policyQuestions = this.value.parsePackageMetadata(artifactHubPackage.data[DATA_ANNOTATIONS.QUESTIONS]);\n\n          if ( this.policyQuestions ) {\n            set(this.chartValues, 'questions', this.policyQuestions);\n          }\n        }\n      } catch (e) {\n        console.warn(`Unable to fetch artifacthub package: ${ e }`); // eslint-disable-line no-console\n      }\n    }\n\n    this.yamlValues = saferDump(this.value);\n  },\n\n  data() {\n    return {\n      chartValues:     null,\n      yamlValues:      '',\n      policyQuestions: null\n    };\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <Values\n    v-else\n    :value=\"value\"\n    :chart-values=\"chartValues\"\n    :yaml-values=\"yamlValues\"\n    :mode=\"mode\"\n    @updateYamlValues=\"$emit('updateYamlValues', $event)\"\n  />\n</template>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Config.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Config.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Config.vue?vue&type=template&id=3f8229cb&\"\nimport script from \"./Config.vue?vue&type=script&lang=js&\"\nexport * from \"./Config.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-5ae37dc8] .step-container{height:auto}.step__basic[data-v-5ae37dc8]{display:flex;flex-direction:column;flex:1;overflow-x:hidden}.step__basic .spacer[data-v-5ae37dc8]{line-height:2}.step__values__controls[data-v-5ae37dc8]{display:flex;margin-bottom:15px}.step__values__controls[data-v-5ae37dc8]>:not(:last-of-type){margin-right:10px}.step__values__content[data-v-5ae37dc8],.step__values__controls--spacer[data-v-5ae37dc8]{flex:1}.step__values__content[data-v-5ae37dc8] .tab-container{overflow:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=style&index=0&id=5ae37dc8&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=db2b144a&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".step__values__controls[data-v-d467cb12]{display:flex;margin-bottom:15px}.step__values__controls[data-v-d467cb12]>:not(:last-of-type){margin-right:10px}.step__values__content[data-v-d467cb12],.step__values__controls--spacer[data-v-d467cb12]{flex:1}.step__values__content[data-v-d467cb12] .tab-container{overflow:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading',{attrs:{\"mode\":\"relative\"}}):_c('div',[(!_vm.hideArtifactHubBanner)?[_c('Banner',{staticClass:\"type-banner mb-20 mt-0\",attrs:{\"data-testid\":\"kw-policy-create-ah-banner\",\"color\":\"warning\",\"closable\":true},on:{\"close\":function($event){return _vm.closeBanner('updateHideBannerArtifactHub')}}},[_c('div',[_c('p',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('kubewarden.policies.noArtifactHub', {}, true)),expression:\"t('kubewarden.policies.noArtifactHub', {}, true)\"}],staticClass:\"mb-10\"}),_c('AsyncButton',{attrs:{\"mode\":\"artifactHub\"},on:{\"click\":_vm.addArtifactHub}})],1)])]:_vm._e(),(!_vm.hideAirgapBanner)?[_c('Banner',{staticClass:\"type-banner mb-20 mt-0\",attrs:{\"data-testid\":\"kw-policy-create-ag-banner\",\"color\":\"warning\",\"closable\":true,\"label\":_vm.t('kubewarden.policies.airgap.banner')},on:{\"close\":function($event){return _vm.closeBanner('updateHideBannerAirgapPolicy')}}})]:_vm._e(),(_vm.loadingPackages)?_c('Loading'):_vm._e(),(_vm.value && !_vm.loadingPackages)?_c('Wizard',{ref:\"wizard\",staticClass:\"wizard\",attrs:{\"data-testid\":\"kw-policy-create-wizard\",\"errors\":_vm.errors,\"steps\":_vm.steps,\"edit-first-step\":true,\"banner-title\":_vm.bannerTitle,\"banner-title-subtext\":_vm.typeModule},on:{\"next\":_vm.reset,\"cancel\":_vm.done,\"finish\":_vm.finish},scopedSlots:_vm._u([{key:\"policies\",fn:function(){return [_c('PolicyGrid',{attrs:{\"data-testid\":\"kw-policy-create-grid\",\"value\":_vm.packages},on:{\"selectType\":function($event){return _vm.selectType($event)}},scopedSlots:_vm._u([{key:\"customSubtype\",fn:function(){return [_c('div',{staticClass:\"subtype custom\",attrs:{\"data-testid\":\"kw-grid-subtype-card-custom\"},on:{\"click\":function($event){return _vm.selectType('custom')}}},[_c('div',{staticClass:\"subtype__metadata\"},[_c('div',{staticClass:\"subtype__body\"},[_c('div',{staticClass:\"subtype__badge\",style:({ 'background-color': 'var(--darker)' })},[_c('label',[_vm._v(_vm._s(_vm.t('kubewarden.customPolicy.badge')))])]),_c('h4',{staticClass:\"subtype__label\"},[_vm._v(\" \"+_vm._s(_vm.t('kubewarden.customPolicy.title'))+\" \")]),_c('div',{staticClass:\"subtype__description\"},[_vm._v(\" \"+_vm._s(_vm.t('kubewarden.customPolicy.description'))+\" \")])])])])]},proxy:true}],null,false,3987605579)})]},proxy:true},{key:\"readme\",fn:function(){return [(_vm.packageValues && _vm.packageValues.readme)?_c('Markdown',{staticClass:\"mb-20\",attrs:{\"data-testid\":\"kw-policy-create-readme\",\"value\":_vm.packageValues.readme}}):_vm._e()]},proxy:true},{key:\"values\",fn:function(){return [_c('Values',{attrs:{\"value\":_vm.value,\"chart-values\":_vm.chartValues,\"yaml-values\":_vm.yamlValues,\"mode\":_vm.mode,\"custom-policy\":_vm.customPolicy},on:{\"editor\":$event => _vm.yamlOption = $event,\"updateYamlValues\":$event => _vm.yamlValues = $event}})]},proxy:true},{key:\"finish\",fn:function(){return [_c('AsyncButton',{attrs:{\"data-testid\":\"kw-policy-create-finish-button\",\"disabled\":!_vm.canFinish,\"mode\":\"finish\"},on:{\"click\":_vm.finish}})]},proxy:true}],null,false,1243871800),model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('form',{staticClass:\"create-resource-container step__policies\"},[_c('div',{staticClass:\"filter\"},[(_vm.organizationOptions.length)?_c('LabeledSelect',{staticClass:\"filter__organization\",attrs:{\"data-testid\":\"kw-grid-filter-organization\",\"clearable\":true,\"taggable\":true,\"mode\":_vm.mode,\"multiple\":true,\"label\":_vm.t('kubewarden.utils.organization'),\"options\":_vm.organizationOptions},model:{value:(_vm.organizations),callback:function ($$v) {_vm.organizations=$$v},expression:\"organizations\"}}):_vm._e(),_c('LabeledSelect',{staticClass:\"filter__keywords\",attrs:{\"data-testid\":\"kw-grid-filter-keywords\",\"clearable\":true,\"taggable\":true,\"mode\":_vm.mode,\"multiple\":true,\"label\":_vm.t('kubewarden.utils.keyword'),\"options\":_vm.keywordOptions},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}}),_c('LabeledSelect',{staticClass:\"filter__category\",attrs:{\"data-testid\":\"kw-grid-filter-category\",\"clearable\":true,\"searchable\":false,\"mode\":_vm.mode,\"multiple\":true,\"placement\":\"bottom\",\"label\":_vm.t('kubewarden.utils.resource'),\"options\":_vm.resourceOptions},model:{value:(_vm.category),callback:function ($$v) {_vm.category=$$v},expression:\"category\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchQuery),expression:\"searchQuery\"}],ref:\"searchQuery\",staticClass:\"input-sm filter__search\",attrs:{\"data-testid\":\"kw-grid-filter-search\",\"type\":\"search\",\"placeholder\":_vm.t('catalog.charts.search')},domProps:{\"value\":(_vm.searchQuery)},on:{\"input\":function($event){if($event.target.composing)return;_vm.searchQuery=$event.target.value}}}),_c('button',{ref:\"btn\",staticClass:\"btn, btn-sm, role-primary, filter__reset\",attrs:{\"data-testid\":\"kw-grid-filter-refresh\",\"type\":\"button\"},on:{\"click\":_vm.refresh}},[_vm._v(\" \"+_vm._s(_vm.t('kubewarden.utils.resetFilter'))+\" \")])],1),_c('div',{staticClass:\"grid\"},[_vm._t(\"customSubtype\"),_vm._l((_vm.filteredSubtypes),function(subtype){return _c('div',{key:subtype.package_id,staticClass:\"subtype\",attrs:{\"data-testid\":`kw-grid-subtype-card-${ subtype.package_id }`},on:{\"click\":function($event){return _vm.$emit('selectType', subtype)}}},[_c('div',{staticClass:\"subtype__metadata\"},[_c('div',{staticClass:\"subtype__body\"},[(_vm.hasAnnotation(subtype, 'kubewarden/resources'))?_c('div',{staticClass:\"subtype__badge\"},[_c('label',[_vm._v(_vm._s(_vm.resourceType(subtype.data['kubewarden/resources'])))])]):_vm._e(),_c('div',{staticClass:\"subtype__label\"},[_c('h4',[_vm._v(\" \"+_vm._s(subtype.display_name)+\" \")])]),(subtype.description)?_c('div',{staticClass:\"subtype__description\"},[_vm._v(\" \"+_vm._s(subtype.description)+\" \")]):_vm._e()]),_c('div',{staticClass:\"subtype__footer\"},[_c('div',{staticClass:\"subtype__left\"},[(subtype.signed)?_c('div',{staticClass:\"subtype__signed\"},[_c('span',{directives:[{name:\"clean-tooltip\",rawName:\"v-clean-tooltip\",value:(_vm.t('kubewarden.policyCharts.signedPolicy.tooltip', { signatures: _vm.subtypeSignature(subtype) })),expression:\"t('kubewarden.policyCharts.signedPolicy.tooltip', { signatures: subtypeSignature(subtype) })\"}]},[_c('i',{staticClass:\"icon icon-lock\"})])]):_vm._e(),(_vm.isOfficial(subtype))?_c('div',{staticClass:\"subtype__icon\"},[_c('img',{directives:[{name:\"clean-tooltip\",rawName:\"v-clean-tooltip\",value:(_vm.t('kubewarden.policies.official')),expression:\"t('kubewarden.policies.official')\"}],staticClass:\"ml-5\",attrs:{\"src\":require(\"../../assets/icon-kubewarden.svg\"),\"alt\":_vm.t('kubewarden.policies.official')}})]):_vm._e()]),_c('div',{staticClass:\"subtype__right\"},[(_vm.hasAnnotation(subtype, 'kubewarden/mutation'))?_c('div',{staticClass:\"subtype__mutation\"},[_c('span',{directives:[{name:\"clean-tooltip\",rawName:\"v-clean-tooltip\",value:(_vm.t('kubewarden.policyCharts.mutationPolicy.tooltip')),expression:\"t('kubewarden.policyCharts.mutationPolicy.tooltip')\"}]},[_vm._v(\" \"+_vm._s(_vm.t('kubewarden.policyCharts.mutationPolicy.label'))+\" \")])]):_vm._e(),(_vm.hasAnnotation(subtype, 'kubewarden/contextAwareResources'))?_c('div',{staticClass:\"subtype__aware\"},[_c('span',{directives:[{name:\"clean-tooltip\",rawName:\"v-clean-tooltip\",value:(_vm.t('kubewarden.policyCharts.contextAware.tooltip')),expression:\"t('kubewarden.policyCharts.contextAware.tooltip')\"}]},[_vm._v(\" \"+_vm._s(_vm.t('kubewarden.policyCharts.contextAware.label'))+\" \")])]):_vm._e()])])])])})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { ArtifactHubPackage } from '../types';\n\n/**\n * Extracts resource kinds from a list of ArtifactHub packages with the `kubewarden/resources` annotation.\n * @param artifactHubPackages\n * @returns `string[]` | Resource kinds\n */\nexport function resourcesFromAnnotation(artifactHubPackages: ArtifactHubPackage[]): string[] | void {\n  const out: string[] = [];\n\n  const resources = artifactHubPackages?.flatMap((artifactHubPackage) => {\n    const annotation = artifactHubPackage?.data?.['kubewarden/resources'];\n\n    if ( annotation ) {\n      return annotation;\n    }\n  });\n\n  resources?.flatMap((resource) => {\n    if ( resource ) {\n      const split = resource.split(',');\n\n      if ( split.length > 1 ) {\n        split.forEach((s: string) => out.push(s.trim()));\n      } else {\n        out.push(resource);\n      }\n    }\n\n    return [];\n  })?.sort();\n\n  if ( !out || out?.length === 0 ) {\n    return [];\n  }\n\n  return [...new Set(out.filter(Boolean))];\n}\n\n/**\n * Checks the resources within a ArtifactHub package's `kubewarden/resources` annotation to determine if\n * the policy is targeting non-namespaced resources. Needed to gate CAP from AP grid.\n * @param artifactHubPackage `schemas`\n * @returns Boolean\n */\nexport function isGlobalPolicy(artifactHubPackage: ArtifactHubPackage, schemas: any): Boolean {\n  if ( artifactHubPackage ) {\n    const resources: string[] | undefined = artifactHubPackage.data?.['kubewarden/resources']?.split(',');\n    let targetsNonNamespaced: Boolean = false;\n\n    if ( resources ) {\n      for ( const resource of resources ) {\n        targetsNonNamespaced = schemas?.some((schema: any) => (\n          schema?.attributes?.kind === resource && (schema?.attributes?.namespaced === false || undefined)\n        ));\n      }\n    }\n\n    return targetsNonNamespaced;\n  }\n\n  return false;\n}\n","<script>\nimport isEmpty from 'lodash/isEmpty';\nimport semver from 'semver';\n\nimport { SCHEMA } from '@shell/config/types';\nimport { _CREATE, CATEGORY, SEARCH_QUERY } from '@shell/config/query-params';\nimport { SHOW_PRE_RELEASE } from '@shell/store/prefs';\nimport { ensureRegex } from '@shell/utils/string';\nimport { sortBy } from '@shell/utils/sort';\n\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nimport { KUBEWARDEN, KUBEWARDEN_PRODUCT_NAME } from '../../types';\nimport { resourcesFromAnnotation, isGlobalPolicy } from '../../modules/artifacthub';\n\nexport default {\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE\n    },\n\n    // ArtifactHub packages\n    value: {\n      type:    Array,\n      default: () => {\n        return [];\n      }\n    }\n  },\n\n  inject: ['chartType'],\n\n  components: { LabeledSelect },\n\n  fetch() {\n    const query = this.$route.query;\n\n    this.category = query[CATEGORY] || '';\n    this.searchQuery = query[SEARCH_QUERY] || '';\n  },\n\n  data() {\n    return {\n      KUBEWARDEN_PRODUCT_NAME,\n\n      category:      null,\n      keywords:      [],\n      organizations: [],\n      searchQuery:   null\n    };\n  },\n\n  beforeMount() {\n    if ( !isEmpty(this.filteredSubtypes) ) {\n      const officialExists = this.filteredSubtypes.find(subtype => this.isOfficial(subtype));\n\n      this.$nextTick(() => {\n        if ( officialExists && officialExists.repository?.organization_display_name ) {\n          this.organizations.push(officialExists.repository.organization_display_name);\n        }\n      });\n    }\n  },\n\n  computed: {\n    allSchemas() {\n      return this.$store.getters['cluster/all'](SCHEMA);\n    },\n\n    filteredPackages() {\n      const filteredPackages = this.value?.filter((artifactHubPackage) => {\n        // Determine if the package is a pre-release\n        const isPreRelease = this.isPrerelease(artifactHubPackage);\n\n        if ( !this.showPreRelease && isPreRelease ) {\n          return false; // Exclude pre-releases if showPreRelease is false\n        }\n\n        if ( this.chartType === KUBEWARDEN.ADMISSION_POLICY ) {\n          return !isGlobalPolicy(artifactHubPackage, this.allSchemas);\n        }\n\n        return true;\n      });\n\n      return filteredPackages || [];\n    },\n\n    filteredSubtypes() {\n      const subtypes = ( this.filteredPackages || [] );\n\n      const out = subtypes.filter((subtype) => {\n        if ( this.category ) {\n          if ( !this.hasAnnotation(subtype, 'kubewarden/resources') || !subtype.data?.['kubewarden/resources']?.includes(this.category) ) {\n            return false;\n          }\n        }\n\n        if ( this.searchQuery ) {\n          const searchTokens = this.searchQuery.split(/\\s*[, ]\\s*/).map(x => ensureRegex(x, false));\n\n          for ( const token of searchTokens ) {\n            if ( !subtype.display_name?.match(token) && (subtype.description && !subtype.description.match(token)) ) {\n              return false;\n            }\n          }\n        }\n\n        if ( this.keywords.length ) {\n          for ( const selected of this.keywords ) {\n            if ( !subtype.keywords || subtype.keywords?.length === 0 || !subtype.keywords?.includes(selected) ) {\n              return false;\n            }\n          }\n        }\n\n        if ( this.organizations.length ) {\n          for ( const org of this.organizations ) {\n            const name = subtype.repository?.organization_display_name || subtype.repository?.user_alias;\n\n            if ( !name || name !== org ) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n\n      return sortBy(out, ['name']);\n    },\n\n    keywordOptions() {\n      const flattened = this.filteredSubtypes?.flatMap((subtype) => {\n        if ( subtype?.keywords && subtype.keywords.length ) {\n          return subtype.keywords;\n        }\n      });\n\n      if ( !flattened || flattened?.length === 0 ) {\n        return [];\n      }\n\n      return [...new Set(flattened.filter(Boolean))];\n    },\n\n    organizationOptions() {\n      const out = this.filteredSubtypes?.flatMap((subtype) => {\n        const name = subtype?.repository?.organization_display_name || subtype?.repository?.user_alias;\n\n        return name || [];\n      });\n\n      if ( !out || out?.length === 0 ) {\n        return [];\n      }\n\n      return [...new Set(out)];\n    },\n\n    resourceOptions() {\n      return resourcesFromAnnotation(this.filteredSubtypes);\n    },\n\n    showPreRelease() {\n      return this.$store.getters['prefs/get'](SHOW_PRE_RELEASE);\n    }\n  },\n\n  methods: {\n    hasAnnotation(subtype, annotation) {\n      if ( subtype.data?.[annotation] && subtype.data?.[annotation] !== 'false' ) {\n        return true;\n      }\n\n      return false;\n    },\n\n    isPrerelease(artifactHubPackage) {\n      const parsed = semver.prerelease(artifactHubPackage.version);\n\n      /**\n       * Custom condition for Deprecated API Versions policy as these versions\n       * have specific k8s versions attached (e.g. `v0.1.12-k8sv1.29.0`).\n       */\n      if ( parsed && artifactHubPackage.name === 'deprecated-api-versions' ) {\n        return !!parsed.includes('rc');\n      }\n\n      return !!parsed;\n    },\n\n    refresh() {\n      this.category = null;\n      this.keywords = [];\n      this.organizations = [];\n      this.searchQuery = null;\n    },\n\n    resourceType(type) {\n      if ( type === undefined ) {\n        return null;\n      }\n\n      const t = type?.split(',');\n\n      if ( t?.length > 1 ) {\n        return 'Multiple';\n      }\n\n      return type === '*' ? 'Global' : type;\n    },\n\n    isOfficial(subtype) {\n      return subtype?.repository?.organization_name?.toLowerCase() === KUBEWARDEN_PRODUCT_NAME;\n    },\n\n    subtypeSignature(subtype) {\n      return subtype.signatures?.[0] || 'unknown';\n    }\n  }\n};\n</script>\n\n<template>\n  <form\n    class=\"create-resource-container step__policies\"\n  >\n    <div class=\"filter\">\n      <LabeledSelect\n        v-if=\"organizationOptions.length\"\n        v-model=\"organizations\"\n        data-testid=\"kw-grid-filter-organization\"\n        :clearable=\"true\"\n        :taggable=\"true\"\n        :mode=\"mode\"\n        :multiple=\"true\"\n        class=\"filter__organization\"\n        :label=\"t('kubewarden.utils.organization')\"\n        :options=\"organizationOptions\"\n      />\n\n      <LabeledSelect\n        v-model=\"keywords\"\n        data-testid=\"kw-grid-filter-keywords\"\n        :clearable=\"true\"\n        :taggable=\"true\"\n        :mode=\"mode\"\n        :multiple=\"true\"\n        class=\"filter__keywords\"\n        :label=\"t('kubewarden.utils.keyword')\"\n        :options=\"keywordOptions\"\n      />\n\n      <LabeledSelect\n        v-model=\"category\"\n        data-testid=\"kw-grid-filter-category\"\n        :clearable=\"true\"\n        :searchable=\"false\"\n        :mode=\"mode\"\n        :multiple=\"true\"\n        placement=\"bottom\"\n        class=\"filter__category\"\n        :label=\"t('kubewarden.utils.resource')\"\n        :options=\"resourceOptions\"\n      />\n\n      <input\n        ref=\"searchQuery\"\n        v-model=\"searchQuery\"\n        data-testid=\"kw-grid-filter-search\"\n        type=\"search\"\n        class=\"input-sm filter__search\"\n        :placeholder=\"t('catalog.charts.search')\"\n      >\n      <button\n        ref=\"btn\"\n        data-testid=\"kw-grid-filter-refresh\"\n        class=\"btn, btn-sm, role-primary, filter__reset\"\n        type=\"button\"\n        @click=\"refresh\"\n      >\n        {{ t('kubewarden.utils.resetFilter') }}\n      </button>\n    </div>\n\n    <div class=\"grid\">\n      <slot name=\"customSubtype\"></slot>\n\n      <div\n        v-for=\"subtype in filteredSubtypes\"\n        :key=\"subtype.package_id\"\n        :data-testid=\"`kw-grid-subtype-card-${ subtype.package_id }`\"\n        class=\"subtype\"\n        @click=\"$emit('selectType', subtype)\"\n      >\n        <div class=\"subtype__metadata\">\n          <div class=\"subtype__body\">\n            <div v-if=\"hasAnnotation(subtype, 'kubewarden/resources')\" class=\"subtype__badge\">\n              <label>{{ resourceType(subtype.data['kubewarden/resources']) }}</label>\n            </div>\n\n            <div class=\"subtype__label\">\n              <h4>\n                {{ subtype.display_name }}\n              </h4>\n            </div>\n\n            <div v-if=\"subtype.description\" class=\"subtype__description\">\n              {{ subtype.description }}\n            </div>\n          </div>\n\n          <div class=\"subtype__footer\">\n            <div class=\"subtype__left\">\n              <div v-if=\"subtype.signed\" class=\"subtype__signed\">\n                <span v-clean-tooltip=\"t('kubewarden.policyCharts.signedPolicy.tooltip', { signatures: subtypeSignature(subtype) })\">\n                  <i class=\"icon icon-lock\" />\n                </span>\n              </div>\n\n              <div v-if=\"isOfficial(subtype)\" class=\"subtype__icon\">\n                <img\n                  v-clean-tooltip=\"t('kubewarden.policies.official')\"\n                  src=\"../../assets/icon-kubewarden.svg\"\n                  :alt=\"t('kubewarden.policies.official')\"\n                  class=\"ml-5\"\n                >\n              </div>\n            </div>\n\n            <div class=\"subtype__right\">\n              <div v-if=\"hasAnnotation(subtype, 'kubewarden/mutation')\" class=\"subtype__mutation\">\n                <span v-clean-tooltip=\"t('kubewarden.policyCharts.mutationPolicy.tooltip')\">\n                  {{ t('kubewarden.policyCharts.mutationPolicy.label') }}\n                </span>\n              </div>\n\n              <div v-if=\"hasAnnotation(subtype, 'kubewarden/contextAwareResources')\" class=\"subtype__aware\">\n                <span v-clean-tooltip=\"t('kubewarden.policyCharts.contextAware.tooltip')\">\n                  {{ t('kubewarden.policyCharts.contextAware.label') }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n</template>\n\n<style lang=\"scss\" scoped>\n$margin: 10px;\n\n::v-deep .vs__selected {\n  height: auto !important;\n}\n\n.step {\n  &__policies {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    overflow-x: hidden;\n\n    .spacer {\n      line-height: 2;\n    }\n  }\n}\n\n.filter {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-self: flex-end;\n  align-items: center;\n\n  & > * {\n    margin: $margin;\n    max-width: 33%;\n  }\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n\n  &__category {\n    min-width: 200px;\n    height: unset;\n  }\n\n  &__search, &__reset {\n    height: 61px;\n  }\n}\n\n@media only screen and (max-width: map-get($breakpoints, '--viewport-12')) {\n  .filter {\n    width: 100%;\n  }\n}\n@media only screen and (min-width: map-get($breakpoints, '--viewport-12')) {\n  .filter {\n    width: 75%;\n  }\n}\n\n.grid {\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  margin: 0 -1*$margin;\n\n  .custom {\n    height: 110px;\n  }\n\n  .subtype {\n    height: auto;\n  }\n\n  @media only screen and (min-width: map-get($breakpoints, '--viewport-4')) {\n    .subtype {\n      width: 100%;\n    }\n  }\n  @media only screen and (min-width: map-get($breakpoints, '--viewport-7')) {\n    .subtype {\n      width: calc(50% - 2 * #{$margin});\n    }\n  }\n  @media only screen and (min-width: map-get($breakpoints, '--viewport-9')) {\n    .subtype {\n      width: calc(33.33333% - 2 * #{$margin});\n    }\n  }\n  @media only screen and (min-width: map-get($breakpoints, '--viewport-12')) {\n    .subtype {\n      width: calc(25% - 2 * #{$margin});\n    }\n  }\n  @media only screen and (min-width: 1600px) {\n    .subtype {\n      &__label {\n        max-width: 100%;\n      }\n\n      h4 {\n        white-space: nowrap;\n      }\n    }\n  }\n\n  .disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n}\n\n.subtype {\n  &__metadata {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 5px 10px;\n  }\n\n  &__label {\n    max-width: 205px;\n\n    h4 {\n      white-space: normal;\n    }\n  }\n\n  &__badge {\n    background-color: var(--darker);\n    padding: 4px 5px;\n  }\n\n  &__body {\n    height: auto;\n  }\n\n  &__footer {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    margin-top: $margin;\n  }\n\n  &__mutation, &__aware {\n    border: 1px solid var(--border);\n    padding: 0px 5px;\n    margin-left: 2px;\n  }\n\n  &__left, &__right {\n    display: flex;\n    flex-direction: row;\n  }\n\n  &__left {\n    align-items: flex-start;\n  }\n\n  &__right {\n    align-items: flex-end;\n  }\n\n  &__icon {\n    width: 20px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyGrid.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyGrid.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyGrid.vue?vue&type=template&id=bd6d92b8&scoped=true&\"\nimport script from \"./PolicyGrid.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyGrid.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicyGrid.vue?vue&type=style&index=0&id=bd6d92b8&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bd6d92b8\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport jsyaml from 'js-yaml';\nimport merge from 'lodash/merge';\nimport isEmpty from 'lodash/isEmpty';\nimport isEqual from 'lodash/isEqual';\n\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { NAMESPACE } from '@shell/config/types';\nimport { _CREATE } from '@shell/config/query-params';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { set } from '@shell/utils/object';\n\nimport { Banner } from '@components/Banner';\n\nimport AsyncButton from '@shell/components/AsyncButton';\nimport Loading from '@shell/components/Loading';\nimport Markdown from '@shell/components/Markdown';\nimport Wizard from '@shell/components/Wizard';\n\nimport {\n  KUBEWARDEN,\n  KUBEWARDEN_PRODUCT_NAME,\n  VALUES_STATE,\n  ARTIFACTHUB_PKG_ANNOTATION,\n  DEFAULT_POLICY\n} from '../../types';\nimport { removeEmptyAttrs } from '../../utils/object';\nimport { handleGrowl } from '../../utils/handle-growl';\n\nimport { DATA_ANNOTATIONS } from '../../types/artifacthub';\nimport PolicyGrid from './PolicyGrid';\nimport Values from './Values';\n\nexport default ({\n  name: 'Create',\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE\n    },\n\n    value: {\n      type:     Object,\n      default:  () => ({})\n    },\n  },\n\n  components: {\n    AsyncButton,\n    Banner,\n    Loading,\n    Markdown,\n    Wizard,\n    PolicyGrid,\n    Values\n  },\n\n  inject: ['chartType'],\n\n  mixins: [CreateEditView],\n\n  async fetch() {\n    this.errors = [];\n\n    if ( this.hasArtifactHub ) {\n      await this.getPackages();\n    }\n\n    this.value.apiVersion = `${ this.schema?.attributes?.group }.${ this.schema?.attributes?.version }`;\n    this.value.kind = this.schema?.attributes?.kind;\n  },\n\n  data() {\n    return {\n      errors:            [],\n      bannerTitle:       null,\n      loadingPackages:   false,\n      packages:          null,\n      repository:        null,\n      type:              null,\n      typeModule:        null,\n      version:           null,\n\n      chartValues: {\n        policy:    {},\n        questions: {}\n      },\n      yamlValues: '',\n\n      hasCustomPolicy: false,\n      yamlOption:      VALUES_STATE.FORM,\n\n      // Steps\n      stepPolicies: {\n        hidden: false,\n        name:   'policies',\n        label:  'Policies',\n        ready:  false,\n        weight: 99\n      },\n      stepReadme: {\n        hidden: false,\n        name:   'readme',\n        label:  'Readme',\n        ready:  true,\n        weight: 98\n      },\n      stepValues: {\n        name:   'values',\n        label:  'Values',\n        ready:  true,\n        weight: 97\n      },\n    };\n  },\n\n  computed: {\n    isAirgap() {\n      return this.$store.getters['kubewarden/airGapped'];\n    },\n\n    isCreate() {\n      return this.realMode === _CREATE;\n    },\n\n    isSelected() {\n      return !!this.type;\n    },\n\n    customPolicy() {\n      return this.type === 'custom';\n    },\n\n    /** Allow create if either editing in yaml view or module and required rules/settings have been met */\n    canFinish() {\n      if ( this.yamlOption === VALUES_STATE.YAML ) {\n        return true;\n      }\n\n      return !!this.chartValues?.policy?.spec?.module && this.hasRequired;\n    },\n\n    hasArtifactHub() {\n      return this.value.artifactHubWhitelist;\n    },\n\n    /** Determines if the required rules/settings are set, if not the resource can not be created */\n    hasRequired() {\n      if ( !isEmpty(this.chartValues?.policy) && this.chartValues.policy.spec ) {\n        const { rules, settings } = this.chartValues.policy.spec;\n\n        const requiredRules = ['apiVersions', 'operations', 'resources'];\n        const acceptedRules = this.acceptedValues(rules, requiredRules);\n\n        const requiredQuestions = this.chartValues?.questions?.questions?.map((q) => {\n          if ( q.required ) {\n            return q.variable;\n          }\n        }).filter(Boolean);\n        const acceptedQuestions = this.acceptedValues(settings, requiredQuestions);\n\n        if ( !isEmpty(acceptedRules) && (isEmpty(requiredQuestions) || !isEmpty(acceptedQuestions)) ) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    hideArtifactHubBanner() {\n      return this.$store.getters['kubewarden/hideBannerArtifactHub'] || !!this.hasArtifactHub || !!this.isAirgap;\n    },\n\n    hideAirgapBanner() {\n      return !this.isAirgap || this.$store.getters['kubewarden/hideBannerAirgapPolicy'];\n    },\n\n    packageValues() {\n      if ( this.type?.repository?.url ) {\n        return this.packages?.find(p => p.repository?.url === this.type.repository.url);\n      }\n\n      return null;\n    },\n\n    steps() {\n      const steps = [];\n\n      steps.push(\n        this.stepPolicies,\n        this.stepReadme,\n        this.stepValues\n      );\n\n      return steps.sort((a, b) => b.weight - a.weight);\n    }\n  },\n\n  methods: {\n    /** Determine values which need to be required from supplied property and keys */\n    acceptedValues(requiredProp, requiredKeys) {\n      if ( isEmpty(requiredKeys) ) {\n        return null;\n      }\n\n      let accepted;\n\n      if ( Array.isArray(requiredProp) ) {\n        accepted = requiredProp.find(prop => this.checkProperties(prop, requiredKeys));\n      } else {\n        accepted = this.checkProperties(requiredProp, requiredKeys);\n      }\n\n      return accepted;\n    },\n\n    /** Check supplied property for required keys */\n    checkProperties(requiredProp, requiredKeys) {\n      const match = [];\n\n      if ( !isEmpty(requiredKeys) ) {\n        for ( const key of requiredKeys.values() ) {\n          if ( !isEmpty(requiredProp[key]) ) {\n            match.push(key);\n          }\n        }\n        if ( requiredKeys && isEqual(match, requiredKeys) ) {\n          return requiredProp;\n        }\n      }\n\n      return null;\n    },\n\n    async closeBanner(banner, retry = 0) {\n      const res = await this.$store.dispatch(`kubewarden/${ banner }`, true);\n\n      if ( retry === 0 && res?.type === 'error' && res?.status === 500 ) {\n        await this.close(retry + 1);\n      }\n    },\n\n    async createNamespace(ns) {\n      const allNamespaces = this.$store.getters['cluster/all'](NAMESPACE);\n      const nsTemplate = {\n        type:                     NAMESPACE,\n        metadata:                 { name: ns },\n        disableOpenApiValidation: false\n      };\n\n      const existing = allNamespaces?.find(n => n?.metadata?.name === ns);\n\n      if ( !existing ) {\n        const nsResource = await this.$store.dispatch('cluster/create', nsTemplate);\n\n        try {\n          await nsResource.save();\n        } catch (e) {\n          this.errors.push(e);\n        }\n      }\n    },\n\n    async addArtifactHub(btnCb) {\n      try {\n        this.loadingPackages = true;\n\n        await this.value.updateWhitelist('artifacthub.io');\n        await this.getPackages();\n\n        btnCb(true);\n        this.loadingPackages = false;\n      } catch (e) {\n        handleGrowl({ error: e, store: this.$store });\n\n        btnCb(false);\n        this.loadingPackages = false;\n      }\n    },\n\n    done() {\n      this.$router.replace({\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  this.$route.params.cluster,\n          product:  KUBEWARDEN_PRODUCT_NAME,\n          resource: this.schema?.id\n        }\n      });\n    },\n\n    async finish(event) {\n      try {\n        let out;\n\n        if ( this.yamlOption === VALUES_STATE.YAML ) {\n          out = jsyaml.load(this.yamlValues);\n        } else {\n          out = this.chartValues?.policy ? this.chartValues.policy : jsyaml.load(this.yamlValues);\n        }\n\n        removeEmptyAttrs(out); // Clean up empty values from questions\n        merge(this.value, out);\n\n        // If create new namespace option is selected, create the ns before saving the policy\n        if ( this.chartType === KUBEWARDEN.ADMISSION_POLICY && this.chartValues?.isNamespaceNew ) {\n          await this.createNamespace(this.value?.metadata?.namespace);\n        }\n\n        await this.save(event);\n      } catch (e) {\n        handleGrowl({ error: e, store: this.$store });\n\n        console.error('Error creating policy', e); // eslint-disable-line no-console\n      }\n    },\n\n    /** Fetch packages from ArtifactHub repository */\n    async getPackages() {\n      this.repository = await this.value.artifactHubRepo();\n\n      if ( this.repository && this.repository.packages.length > 0 ) {\n        const promises = this.repository.packages.map(pkg => this.packageDetails(pkg));\n\n        try {\n          const packages = await Promise.all(promises);\n\n          this.packages = packages.filter(pkg => pkg?.data?.['kubewarden/hidden-ui'] !== 'true');\n        } catch (e) {\n          handleGrowl({ error: e, store: this.$store });\n\n          console.warn(`Error fetching packages`, e); // eslint-disable-line no-console\n        }\n      }\n    },\n\n    async packageDetails(pkg) {\n      try {\n        return await this.value.artifactHubPackage(pkg);\n      } catch (e) {}\n    },\n\n    /** Extract policy questions from ArtifactHub package if available */\n    policyQuestions() {\n      const defaultPolicy = structuredClone(DEFAULT_POLICY);\n\n      if ( this.type === 'custom' ) {\n        // Add contextAwareResources to custom policy spec\n        const updatedCustomPolicy = { spec: { contextAwareResources: [] } };\n\n        merge(defaultPolicy, updatedCustomPolicy);\n        set(this.chartValues, 'policy', defaultPolicy);\n        this.yamlValues = saferDump(defaultPolicy);\n\n        return;\n      }\n\n      const policyDetails = this.packages.find(pkg => pkg.repository?.url === this.type?.repository?.url);\n      const packageQuestions = this.value.parsePackageMetadata(policyDetails?.data?.[DATA_ANNOTATIONS.QUESTIONS]);\n      const packageAnnotation = `${ policyDetails.repository.name }/${ policyDetails.name }/${ policyDetails.version }`;\n      /** Return spec from package if annotation exists */\n      const parseAnnotation = (annotation, obj) => {\n        const spec = this.value.parsePackageMetadata(policyDetails?.data?.[annotation]);\n\n        if ( spec?.[obj] !== undefined ) {\n          return spec[obj];\n        }\n\n        return spec || [];\n      };\n\n      /** Return value of annotation if it exists */\n      const determineAnnotation = (annotation) => {\n        if ( policyDetails?.data?.[annotation] !== undefined ) {\n          return JSON.parse(policyDetails.data[annotation]);\n        }\n\n        return false;\n      };\n\n      const updatedPolicy = {\n        apiVersion: this.value.apiVersion,\n        kind:       this.value.kind,\n        metadata:   { annotations: { [ARTIFACTHUB_PKG_ANNOTATION]: packageAnnotation } },\n        spec:       {\n          module:                policyDetails.containers_images[0].image,\n          contextAwareResources: parseAnnotation(DATA_ANNOTATIONS.CONTEXT_AWARE, 'contextAwareResources'),\n          rules:                 parseAnnotation(DATA_ANNOTATIONS.RULES, 'rules'),\n          mutating:              determineAnnotation(DATA_ANNOTATIONS.MUTATION)\n        }\n      };\n\n      merge(defaultPolicy, updatedPolicy);\n      set(this.chartValues, 'policy', defaultPolicy);\n\n      this.yamlValues = saferDump(defaultPolicy);\n\n      if ( packageQuestions ) {\n        set(this.chartValues, 'questions', packageQuestions);\n      }\n    },\n\n    reset(event) {\n      this.$nextTick(() => {\n        if ( event.step?.name === this.stepPolicies.name ) {\n          const initialState = [\n            'errors',\n            'bannerTitle',\n            'type',\n            'typeModule',\n            'version',\n            'hasCustomPolicy',\n          ];\n\n          initialState.forEach((i) => {\n            this[i] = null;\n          });\n\n          this.stepPolicies.ready = false;\n          this.stepReadme.hidden = false;\n\n          this.chartValues = {\n            policy:    {},\n            questions: {}\n          };\n          this.yamlOption = VALUES_STATE.FORM;\n          this.yamlValues = '';\n        }\n      });\n    },\n\n    selectType(type) {\n      this.type = type;\n      const isCustom = type === 'custom';\n\n      if ( isCustom ) {\n        this.stepReadme.hidden = true;\n        this.$set(this, 'hasCustomPolicy', true);\n      } else {\n        !!this.packageValues ? this.stepReadme.hidden = false : this.stepReadme.hidden = true;\n        this.$set(this, 'hasCustomPolicy', false);\n      }\n\n      this.policyQuestions();\n      this.stepPolicies.ready = true;\n      this.$refs.wizard.next();\n      this.bannerTitle = isCustom ? 'Custom Policy' : type?.display_name;\n      this.typeModule = this.chartValues?.policy?.spec.module;\n    }\n  }\n\n});\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" mode=\"relative\" />\n  <div v-else>\n    <template v-if=\"!hideArtifactHubBanner\">\n      <Banner\n        data-testid=\"kw-policy-create-ah-banner\"\n        class=\"type-banner mb-20 mt-0\"\n        color=\"warning\"\n        :closable=\"true\"\n        @close=\"closeBanner('updateHideBannerArtifactHub')\"\n      >\n        <div>\n          <p v-clean-html=\"t('kubewarden.policies.noArtifactHub', {}, true)\" class=\"mb-10\" />\n          <AsyncButton mode=\"artifactHub\" @click=\"addArtifactHub\" />\n        </div>\n      </Banner>\n    </template>\n    <template v-if=\"!hideAirgapBanner\">\n      <Banner\n        data-testid=\"kw-policy-create-ag-banner\"\n        class=\"type-banner mb-20 mt-0\"\n        color=\"warning\"\n        :closable=\"true\"\n        :label=\"t('kubewarden.policies.airgap.banner')\"\n        @close=\"closeBanner('updateHideBannerAirgapPolicy')\"\n      />\n    </template>\n    <Loading v-if=\"loadingPackages\" />\n    <Wizard\n      v-if=\"value && !loadingPackages\"\n      ref=\"wizard\"\n      v-model=\"value\"\n      data-testid=\"kw-policy-create-wizard\"\n      :errors=\"errors\"\n      :steps=\"steps\"\n      :edit-first-step=\"true\"\n      :banner-title=\"bannerTitle\"\n      :banner-title-subtext=\"typeModule\"\n      class=\"wizard\"\n      @next=\"reset\"\n      @cancel=\"done\"\n      @finish=\"finish\"\n    >\n      <template #policies>\n        <PolicyGrid data-testid=\"kw-policy-create-grid\" :value=\"packages\" @selectType=\"selectType($event)\">\n          <template #customSubtype>\n            <div data-testid=\"kw-grid-subtype-card-custom\" class=\"subtype custom\" @click=\"selectType('custom')\">\n              <div class=\"subtype__metadata\">\n                <div class=\"subtype__body\">\n                  <div class=\"subtype__badge\" :style=\"{ 'background-color': 'var(--darker)' }\">\n                    <label>{{ t('kubewarden.customPolicy.badge') }}</label>\n                  </div>\n\n                  <h4 class=\"subtype__label\">\n                    {{ t('kubewarden.customPolicy.title') }}\n                  </h4>\n\n                  <div class=\"subtype__description\">\n                    {{ t('kubewarden.customPolicy.description') }}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </template>\n        </PolicyGrid>\n      </template>\n\n      <template #readme>\n        <Markdown v-if=\"packageValues && packageValues.readme\" data-testid=\"kw-policy-create-readme\" :value=\"packageValues.readme\" class=\"mb-20\" />\n      </template>\n\n      <template #values>\n        <Values\n          :value=\"value\"\n          :chart-values=\"chartValues\"\n          :yaml-values=\"yamlValues\"\n          :mode=\"mode\"\n          :custom-policy=\"customPolicy\"\n          @editor=\"$event => yamlOption = $event\"\n          @updateYamlValues=\"$event => yamlValues = $event\"\n        />\n      </template>\n\n      <template #finish>\n        <AsyncButton\n          data-testid=\"kw-policy-create-finish-button\"\n          :disabled=\"!canFinish\"\n          mode=\"finish\"\n          @click=\"finish\"\n        />\n      </template>\n    </Wizard>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n$padding: 5px;\n$height: 110px;\n$margin: 10px;\n$color: var(--body-text) !important;\n\n::v-deep .step-container {\n  height: auto;\n}\n\n::v-deep .header {\n  .step-sequence {\n    display: block;\n\n    .steps {\n      & .divider {\n        top: 22px;\n      }\n    }\n  }\n}\n\n::v-deep .controls-row {\n  position: relative;\n  width: auto;\n\n  .controls-steps {\n    display: flex;\n  }\n}\n\n::v-deep .custom {\n  min-height: 110px;\n}\n\n::v-deep .subtype {\n  height: $height;\n  margin: $margin;\n  position: relative;\n  border-radius: calc( 1.5 * var(--border-radius));\n  border: 1px solid var(--border);\n  text-decoration: none !important;\n  color: $color;\n\n  &:hover:not(.disabled) {\n    box-shadow: 0 0 30px var(--shadow);\n    transition: box-shadow 0.1s ease-in-out;\n    cursor: pointer;\n    text-decoration: none !important;\n  }\n\n  &__metadata {\n    padding: $margin;\n\n    &__label, &__description {\n      padding-right: 20px;\n    }\n  }\n\n  &__badge {\n    position: absolute;\n    right: 0;\n    top: 0;\n    padding: 4px $padding;\n    border-bottom-left-radius: var(--border-radius);\n\n    label {\n      font-size: 12px;\n      line-height: 12px;\n      text-align: center;\n      display: block;\n      white-space: no-wrap;\n      text-overflow: ellipsis;\n      color: var(--app-rancher-accent-text);\n      margin: 0;\n    }\n  }\n\n  &__label {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin-bottom: 4px;\n    line-height: initial;\n  }\n\n  &__description {\n    margin-right: $margin;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 3;\n    line-clamp: 3;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    color: var(--input-label);\n  }\n}\n\n.wizard {\n  position: relative;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=db2b144a&scoped=true&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Create.vue?vue&type=style&index=0&id=db2b144a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"db2b144a\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=style&index=0&id=5ae37dc8&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"dec66a40\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import isEmpty from 'lodash/isEmpty';\nimport isObject from 'lodash/isObject';\n\nexport function removeEmptyAttrs(obj: any): any {\n  Object.keys(obj).forEach((key: any) => {\n    const value = obj[key];\n\n    // Check for value being empty, null, or an empty array\n    if ( value === undefined || value === null || value === '' || (Array.isArray(value) && !value.length) ) {\n      delete obj[key];\n    } else if ( isObject(value) ) {\n      // Recursively clean the object\n      removeEmptyAttrs(value);\n\n      // After cleaning, if the object is empty, delete it\n      if ( isEmpty(value) ) {\n        delete obj[key];\n      }\n    }\n  });\n\n  // Added check: If the parent object is now empty, return null to signal removal\n  if ( isEmpty(obj) ) {\n    return null;\n  }\n\n  return obj;\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('CruResource',{attrs:{\"resource\":_vm.value,\"mode\":_vm.realMode,\"can-yaml\":false,\"done-route\":_vm.doneRoute,\"errors\":_vm.errors,\"validation-passed\":_vm.validationPassed},on:{\"finish\":_vm.finish,\"error\":e => _vm.errors = e}},[_c('Values',{attrs:{\"value\":_vm.value,\"chart-values\":_vm.chartValues,\"mode\":_vm.mode},on:{\"validation-passed\":_vm.handleValidationPassed}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading',{attrs:{\"mode\":\"relative\"}}):_c('div',{staticClass:\"scroll__container\"},[(_vm.isCreate || _vm.isEdit)?_c('div',{staticClass:\"step__values__controls\"},[_c('ButtonGroup',{attrs:{\"data-testid\":\"kw-policy-server-config-yaml-option\",\"options\":_vm.YAML_OPTIONS,\"inactive-class\":\"bg-disabled btn-sm\",\"active-class\":\"bg-primary btn-sm\"},model:{value:(_vm.yamlOption),callback:function ($$v) {_vm.yamlOption=$$v},expression:\"yamlOption\"}})],1):_vm._e(),_c('div',{staticClass:\"scroll__content\"},[(_vm.showForm)?[_c('Tabbed',{ref:\"tabs\",staticClass:\"step__values__content\",attrs:{\"side-tabs\":true},on:{\"changed\":function($event){return _vm.tabChanged($event)}}},[_c(_vm.valuesComponent,{tag:\"component\",attrs:{\"resource\":_vm.value,\"mode\":_vm.mode},on:{\"validation-passed\":_vm.handleValidationPassed},model:{value:(_vm.values),callback:function ($$v) {_vm.values=$$v},expression:\"values\"}})],1)]:((_vm.isCreate || _vm.isEdit) && !_vm.showForm)?[_c('YamlEditor',{ref:\"yaml\",staticClass:\"step__values__content\",attrs:{\"data-testid\":\"kw-policy-server-config-yaml-editor\",\"scrolling\":true,\"initial-yaml-values\":_vm.originalYamlValues,\"editor-mode\":_vm.editorMode,\"hide-preview-buttons\":true},on:{\"onChanges\":_vm.updateYamlValues},model:{value:(_vm.currentYamlValues),callback:function ($$v) {_vm.currentYamlValues=$$v},expression:\"currentYamlValues\"}})]:_vm._e(),_c('ResourceCancelModal',{ref:\"cancelModal\",attrs:{\"data-testid\":\"kw-policy-server-config-yaml-cancel\",\"is-cancel-modal\":false,\"is-form\":true},on:{\"cancel-cancel\":function($event){_vm.preYamlOption = _vm.yamlOption},\"confirm-cancel\":function($event){_vm.yamlOption = _vm.preYamlOption}}})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport merge from 'lodash/merge';\nimport isEmpty from 'lodash/isEmpty';\nimport jsyaml from 'js-yaml';\n\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { SCHEMA } from '@shell/config/types';\nimport { createYaml } from '@shell/utils/create-yaml';\n\nimport ButtonGroup from '@shell/components/ButtonGroup';\nimport Loading from '@shell/components/Loading';\nimport ResourceCancelModal from '@shell/components/ResourceCancelModal';\nimport Tabbed from '@shell/components/Tabbed';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\n\nimport { VALUES_STATE, YAML_OPTIONS } from '../../types';\n\nexport default {\n  name: 'Values',\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE\n    },\n\n    chartValues: {\n      type:     Object,\n      default:  () => {}\n    },\n\n    value: {\n      type:     Object,\n      required: true\n    }\n  },\n\n  components: {\n    ButtonGroup, Loading, ResourceCancelModal, Tabbed, YamlEditor\n  },\n\n  async fetch() {\n    const valuesYaml = this.generateYaml();\n\n    this.currentYamlValues = valuesYaml;\n    this.originalYamlValues = valuesYaml;\n\n    try {\n      await this.loadValuesComponent();\n    } catch (e) {\n      console.error(`Error loading values component: ${ e }`); // eslint-disable-line no-console\n    }\n  },\n\n  data() {\n    return {\n      YAML_OPTIONS,\n      currentYamlValues:   '',\n      originalYamlValues:  '',\n      showForm:            true,\n      configValues:        null,\n      showQuestions:       true,\n      showValuesComponent: false,\n      valuesComponent:     null,\n      preYamlOption:       VALUES_STATE.FORM,\n      yamlOption:          VALUES_STATE.FORM,\n      values:              this.chartValues\n    };\n  },\n\n  watch: {\n    yamlOption(neu, old) {\n      switch (neu) {\n      case VALUES_STATE.FORM:\n        this.showForm = true;\n        break;\n      case VALUES_STATE.YAML:\n        if ( old === VALUES_STATE.FORM ) {\n          this.currentYamlValues = this.generateYaml();\n          this.updateYamlValues();\n        }\n\n        this.showForm = false;\n        break;\n      }\n    },\n  },\n\n  computed: {\n    editorMode() {\n      return EDITOR_MODES.EDIT_CODE;\n    },\n\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n\n    isEdit() {\n      return this.mode === _EDIT;\n    }\n  },\n\n  methods: {\n    generateYaml() {\n      const schemas = this.$store.getters['cluster/all'](SCHEMA);\n      const yaml = createYaml(schemas, this.value?.type, this.chartValues);\n\n      const lines = yaml.split('\\n');\n      const filteredLines = lines.filter(line => !line.includes('Error loading schema for array'));\n      const modifiedYAML = filteredLines.join('\\n');\n\n      return modifiedYAML;\n    },\n\n    async loadValuesComponent() {\n      if ( this.value.haveComponent('kubewarden/policy-server') ) {\n        this.valuesComponent = this.value.importComponent('kubewarden/policy-server');\n        await this.valuesComponent();\n\n        this.showValuesComponent = true;\n      }\n    },\n\n    tabChanged() {\n      window.scrollTop = 0;\n    },\n\n    updateYamlValues() {\n      if ( !isEmpty(this.currentYamlValues) ) {\n        const parsed = jsyaml.load(this.currentYamlValues);\n\n        if ( parsed ) {\n          merge(this.chartValues, parsed);\n        }\n      }\n    },\n\n    handleValidationPassed(val) {\n      this.$emit('validation-passed', val);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" mode=\"relative\" />\n  <div v-else class=\"scroll__container\">\n    <div v-if=\"isCreate || isEdit\" class=\"step__values__controls\">\n      <ButtonGroup\n        v-model=\"yamlOption\"\n        data-testid=\"kw-policy-server-config-yaml-option\"\n        :options=\"YAML_OPTIONS\"\n        inactive-class=\"bg-disabled btn-sm\"\n        active-class=\"bg-primary btn-sm\"\n      />\n    </div>\n    <div class=\"scroll__content\">\n      <template v-if=\"showForm\">\n        <Tabbed\n          ref=\"tabs\"\n          :side-tabs=\"true\"\n          class=\"step__values__content\"\n          @changed=\"tabChanged($event)\"\n        >\n          <component\n            :is=\"valuesComponent\"\n            v-model=\"values\"\n            :resource=\"value\"\n            :mode=\"mode\"\n            @validation-passed=\"handleValidationPassed\"\n          />\n        </Tabbed>\n      </template>\n      <template v-else-if=\"(isCreate || isEdit) && !showForm\">\n        <YamlEditor\n          ref=\"yaml\"\n          v-model=\"currentYamlValues\"\n          data-testid=\"kw-policy-server-config-yaml-editor\"\n          class=\"step__values__content\"\n          :scrolling=\"true\"\n          :initial-yaml-values=\"originalYamlValues\"\n          :editor-mode=\"editorMode\"\n          :hide-preview-buttons=\"true\"\n          @onChanges=\"updateYamlValues\"\n        />\n      </template>\n\n      <ResourceCancelModal\n        ref=\"cancelModal\"\n        data-testid=\"kw-policy-server-config-yaml-cancel\"\n        :is-cancel-modal=\"false\"\n        :is-form=\"true\"\n        @cancel-cancel=\"preYamlOption = yamlOption\"\n        @confirm-cancel=\"yamlOption = preYamlOption\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $padding: 5px;\n  $height: 110px;\n  $side: 15px;\n  $margin: 10px;\n  $logo: 60px;\n\n  ::v-deep .step-container {\n    height: auto;\n  }\n\n  .step {\n    &__basic {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n      overflow-x: hidden;\n\n      .spacer {\n        line-height: 2;\n      }\n    }\n\n    &__values {\n      &__controls {\n        display: flex;\n        margin-bottom: 15px;\n\n        & > *:not(:last-of-type) {\n          margin-right: $padding * 2;\n        }\n\n        &--spacer {\n          flex: 1\n        }\n\n      }\n\n      &__content {\n        flex: 1;\n\n        ::v-deep .tab-container {\n          overflow: auto;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Values.vue?vue&type=template&id=5ae37dc8&scoped=true&\"\nimport script from \"./Values.vue?vue&type=script&lang=js&\"\nexport * from \"./Values.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Values.vue?vue&type=style&index=0&id=5ae37dc8&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ae37dc8\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport merge from 'lodash/merge';\n\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport CreateEditView from '@shell/mixins/create-edit-view';\n\nimport CruResource from '@shell/components/CruResource';\n\nimport { DEFAULT_POLICY_SERVER } from '../models/policies.kubewarden.io.policyserver';\n\nimport Values from '../components/PolicyServer/Values';\n\nexport default {\n  components: { CruResource, Values },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      type:    String,\n      default: _EDIT\n    },\n\n    realMode: {\n      type:    String,\n      default: _EDIT\n    },\n\n    value: {\n      type:     Object,\n      required: true\n    },\n  },\n\n  data() {\n    return {\n      errors:           [],\n      chartValues:      this.value,\n      validationPassed: true,\n    };\n  },\n\n  created() {\n    if ( this.isCreate ) {\n      merge(this.chartValues, structuredClone(DEFAULT_POLICY_SERVER));\n    }\n  },\n\n  computed: {\n    isCreate() {\n      return this.realMode === _CREATE;\n    }\n  },\n\n  methods: {\n    handleValidationPassed(val) {\n      this.validationPassed = val;\n    },\n    async finish(event) {\n      // here we cleanup the securityContexts \"seccompProfile\" property if there are no keys set on the object\n      ['pod', 'container'].forEach((type) => {\n        if (this.chartValues?.spec?.securityContexts?.[type]?.seccompProfile && !Object.keys(this.chartValues?.spec?.securityContexts?.[type]?.seccompProfile).length) {\n          delete this.chartValues?.spec?.securityContexts?.[type]?.seccompProfile;\n        }\n      });\n\n      try {\n        await this.save(event);\n      } catch (e) {\n        this.errors.push(e);\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <CruResource\n    :resource=\"value\"\n    :mode=\"realMode\"\n    :can-yaml=\"false\"\n    :done-route=\"doneRoute\"\n    :errors=\"errors\"\n    :validation-passed=\"validationPassed\"\n    @finish=\"finish\"\n    @error=\"e => errors = e\"\n  >\n    <Values\n      :value=\"value\"\n      :chart-values=\"chartValues\"\n      :mode=\"mode\"\n      @validation-passed=\"handleValidationPassed\"\n    />\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.policyserver.vue?vue&type=template&id=1955e4de&\"\nimport script from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading',{attrs:{\"mode\":\"relative\"}}):_c('div',[(_vm.isCreate || _vm.isEdit)?_c('div',{staticClass:\"step__values__controls\"},[_c('ButtonGroup',{attrs:{\"data-testid\":\"kw-policy-config-yaml-option\",\"options\":_vm.YAML_OPTIONS,\"inactive-class\":\"bg-disabled btn-sm\",\"active-class\":\"bg-primary btn-sm\"},model:{value:(_vm.yamlOption),callback:function ($$v) {_vm.yamlOption=$$v},expression:\"yamlOption\"}})],1):_vm._e(),_c('div',{staticClass:\"scroll__container\"},[_c('div',{staticClass:\"scroll__content\"},[(_vm.showForm)?[_c('Tabbed',{ref:\"tabs\",staticClass:\"step__values__content\",attrs:{\"side-tabs\":true},on:{\"changed\":function($event){return _vm.tabChanged($event)}}},[(_vm.valuesComponent)?[_c(_vm.valuesComponent,{tag:\"component\",attrs:{\"mode\":_vm.mode,\"custom-policy\":_vm.customPolicy},model:{value:(_vm.chartValues),callback:function ($$v) {_vm.chartValues=$$v},expression:\"chartValues\"}})]:_vm._e()],2)]:((_vm.isCreate || _vm.isEdit) && !_vm.showForm)?[_c('YamlEditor',{ref:\"yaml\",staticClass:\"step__values__content\",attrs:{\"data-testid\":\"kw-policy-config-yaml-editor\",\"scrolling\":true,\"initial-yaml-values\":_vm.originalYamlValues,\"editor-mode\":_vm.editorMode,\"hide-preview-buttons\":true},on:{\"onChanges\":_vm.updateYamlValues},model:{value:(_vm.currentYamlValues),callback:function ($$v) {_vm.currentYamlValues=$$v},expression:\"currentYamlValues\"}})]:_vm._e(),_c('ResourceCancelModal',{ref:\"cancelModal\",attrs:{\"data-testid\":\"kw-policy-config-yaml-cancel\",\"is-cancel-modal\":false,\"is-form\":true},on:{\"cancel-cancel\":function($event){_vm.preYamlOption = _vm.yamlOption},\"confirm-cancel\":function($event){_vm.yamlOption = _vm.preYamlOption}}})],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport isEmpty from 'lodash/isEmpty';\n\nimport { _CREATE, _EDIT, _VIEW } from '@shell/config/query-params';\nimport { SCHEMA } from '@shell/config/types';\nimport { createYaml, saferDump } from '@shell/utils/create-yaml';\nimport { set } from '@shell/utils/object';\n\nimport ButtonGroup from '@shell/components/ButtonGroup';\nimport Loading from '@shell/components/Loading';\nimport ResourceCancelModal from '@shell/components/ResourceCancelModal';\nimport Tabbed from '@shell/components/Tabbed';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\n\nimport { KUBEWARDEN_CHARTS, VALUES_STATE, YAML_OPTIONS, RANCHER_NS_MATCH_EXPRESSION } from '../../types';\n\nexport default {\n  name: 'Values',\n\n  props: {\n    mode: {\n      type:     String,\n      default:  _VIEW\n    },\n    chartValues: {\n      type:     Object,\n      default:  () => {}\n    },\n    customPolicy: {\n      type:    Boolean,\n      default: false\n    },\n    value: {\n      type:     Object,\n      required: true\n    },\n    yamlValues: {\n      type:    String,\n      default: ''\n    }\n  },\n\n  components: {\n    ButtonGroup, Loading, ResourceCancelModal, Tabbed, YamlEditor\n  },\n\n  async fetch() {\n    if ( isEmpty(this.chartValues.questions) && !!this.chartValues?.policy?.spec?.settings ) {\n      try {\n        const pkg = await this.value.artifactHubPackageVersion();\n\n        if ( pkg && !pkg.error ) {\n          const packageQuestions = this.value.parsePackageMetadata(pkg?.data?.['kubewarden/questions-ui']);\n\n          if ( packageQuestions ) {\n            set(this.chartValues, 'questions', packageQuestions);\n          }\n        }\n      } catch (e) {\n        console.warn(`Unable to fetch chart questions: ${ e }`); // eslint-disable-line no-console\n      }\n    }\n\n    try {\n      this.version = this.$store.getters['catalog/version']({\n        repoType:      'cluster',\n        repoName:      'kubewarden',\n        chartName:     KUBEWARDEN_CHARTS.CONTROLLER,\n      });\n\n      await this.loadValuesComponent();\n    } catch (e) {\n      console.warn(`Unable to fetch Version: ${ e }`); // eslint-disable-line no-console\n    }\n\n    this.generateYaml();\n  },\n\n  data() {\n    return {\n      YAML_OPTIONS,\n      currentYamlValues:   '',\n      originalYamlValues:  '',\n      showForm:            true,\n      valuesComponent:     null,\n      preYamlOption:       VALUES_STATE.FORM,\n      yamlOption:          VALUES_STATE.FORM\n    };\n  },\n\n  mounted() {\n    // by default, every clusterAdmissionPolicy created will ignore Rancher system namespaces\n    // so that policies in PROTECT mode don't crash the system\n    // needs to be in this component because MatchExpression component is not automatically updated\n    if (this.mode === _CREATE && this.chartValues?.policy?.kind === 'ClusterAdmissionPolicy') {\n      if (!this.chartValues?.policy?.spec?.namespaceSelector) {\n        this.chartValues.policy.spec.namespaceSelector = {};\n      }\n\n      this.chartValues.policy.spec.namespaceSelector.matchExpressions = [RANCHER_NS_MATCH_EXPRESSION];\n    }\n  },\n\n  watch: {\n    yamlOption(neu, old) {\n      switch (neu) {\n      case VALUES_STATE.FORM:\n        this.showForm = true;\n        this.$emit('editor', neu);\n\n        break;\n      case VALUES_STATE.YAML:\n        if ( old === VALUES_STATE.FORM ) {\n          this.currentYamlValues = saferDump(this.chartValues.policy);\n          this.updateYamlValues();\n        }\n\n        this.showForm = false;\n        this.$emit('editor', neu);\n\n        break;\n      }\n    },\n  },\n\n  computed: {\n    editorMode() {\n      return EDITOR_MODES.EDIT_CODE;\n    },\n\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n\n    isEdit() {\n      return this.mode === _EDIT;\n    }\n  },\n\n  methods: {\n    generateYaml() {\n      const schemas = this.$store.getters['cluster/all'](SCHEMA);\n      const cloned = this.chartValues?.policy ? structuredClone(this.chartValues.policy) : this.value;\n\n      if ( this.yamlValues?.length ) {\n        this.currentYamlValues = this.yamlValues;\n      } else {\n        this.currentYamlValues = createYaml(schemas, this.value?.type, cloned);\n      }\n    },\n\n    async loadValuesComponent() {\n      if ( this.value?.haveComponent('kubewarden/admission') ) {\n        this.valuesComponent = this.value?.importComponent('kubewarden/admission');\n\n        await this.valuesComponent();\n      }\n    },\n\n    tabChanged() {\n      window.scrollTop = 0;\n    },\n\n    updateYamlValues() {\n      this.$emit('updateYamlValues', this.currentYamlValues);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" mode=\"relative\" />\n  <div v-else>\n    <div v-if=\"isCreate || isEdit\" class=\"step__values__controls\">\n      <ButtonGroup\n        v-model=\"yamlOption\"\n        data-testid=\"kw-policy-config-yaml-option\"\n        :options=\"YAML_OPTIONS\"\n        inactive-class=\"bg-disabled btn-sm\"\n        active-class=\"bg-primary btn-sm\"\n      />\n    </div>\n    <div class=\"scroll__container\">\n      <div class=\"scroll__content\">\n        <template v-if=\"showForm\">\n          <Tabbed\n            ref=\"tabs\"\n            :side-tabs=\"true\"\n            class=\"step__values__content\"\n            @changed=\"tabChanged($event)\"\n          >\n            <template v-if=\"valuesComponent\">\n              <component\n                :is=\"valuesComponent\"\n                v-model=\"chartValues\"\n                :mode=\"mode\"\n                :custom-policy=\"customPolicy\"\n              />\n            </template>\n          </Tabbed>\n        </template>\n        <template v-else-if=\"(isCreate || isEdit) && !showForm\">\n          <YamlEditor\n            ref=\"yaml\"\n            v-model=\"currentYamlValues\"\n            data-testid=\"kw-policy-config-yaml-editor\"\n            class=\"step__values__content\"\n            :scrolling=\"true\"\n            :initial-yaml-values=\"originalYamlValues\"\n            :editor-mode=\"editorMode\"\n            :hide-preview-buttons=\"true\"\n            @onChanges=\"updateYamlValues\"\n          />\n        </template>\n\n        <ResourceCancelModal\n          ref=\"cancelModal\"\n          data-testid=\"kw-policy-config-yaml-cancel\"\n          :is-cancel-modal=\"false\"\n          :is-form=\"true\"\n          @cancel-cancel=\"preYamlOption = yamlOption\"\n          @confirm-cancel=\"yamlOption = preYamlOption\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $padding: 5px;\n\n  .step {\n    &__values {\n      &__controls {\n        display: flex;\n        margin-bottom: 15px;\n\n        & > *:not(:last-of-type) {\n          margin-right: $padding * 2;\n        }\n\n        &--spacer {\n          flex: 1\n        }\n\n      }\n\n      &__content {\n        flex: 1;\n\n        ::v-deep .tab-container {\n          overflow: auto;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Values.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Values.vue?vue&type=template&id=d467cb12&scoped=true&\"\nimport script from \"./Values.vue?vue&type=script&lang=js&\"\nexport * from \"./Values.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Values.vue?vue&type=style&index=0&id=d467cb12&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d467cb12\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isCreate)?_c('Create',{attrs:{\"value\":_vm.value,\"mode\":_vm.mode}}):_c('CruResource',{attrs:{\"resource\":_vm.value,\"mode\":_vm.realMode,\"can-yaml\":false},on:{\"finish\":_vm.finish}},[_c('Config',{attrs:{\"value\":_vm.value,\"mode\":_vm.realMode},on:{\"updateYamlValues\":_vm.updateYamlValuesFromEdit}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport jsyaml from 'js-yaml';\nimport { _CREATE, _EDIT, _CLONE } from '@shell/config/query-params';\nimport CreateEditView from '@shell/mixins/create-edit-view';\n\nimport CruResource from '@shell/components/CruResource';\nimport { removeEmptyAttrs } from '../utils/object';\nimport { handleGrowl } from '../utils/handle-growl';\n\nimport Config from '../components/Policies/Config';\nimport Create from '../components/Policies/Create';\n\nexport default {\n  name: 'ClusterAdmissionPolicy',\n\n  props: {\n    value: {\n      type:     Object,\n      required: true\n    },\n\n    mode: {\n      type:    String,\n      default: _EDIT\n    },\n\n    realMode: {\n      type:    String,\n      default: _EDIT\n    }\n  },\n\n  components: {\n    CruResource, Config, Create\n  },\n\n  mixins: [CreateEditView],\n\n  provide() {\n    return { chartType: this.value.type, realMode: this.realMode };\n  },\n\n  computed: {\n    isCreate() {\n      return this.realMode === _CREATE;\n    },\n\n    isClone() {\n      return this.realMode === _CLONE;\n    }\n  },\n\n  methods: {\n    async finish(event) {\n      try {\n        removeEmptyAttrs(this.value);\n\n        // remove metadata that identifies a CAP as a default policy, so that we can edit it later on the UI\n        // https://github.com/rancher/kubewarden-ui/issues/682\n        if (this.isClone && this.value.isKubewardenDefaultPolicy && this.value?.metadata?.labels?.['app.kubernetes.io/name'] === 'kubewarden-defaults') {\n          delete this.value?.metadata?.labels?.['app.kubernetes.io/name'];\n        }\n\n        await this.save(event);\n      } catch (e) {\n        handleGrowl({ error: e, store: this.$store });\n      }\n    },\n    // this updates the \"value\" obj for CAP's\n    // with the updated values that came from the \"edit YAML\" scenario\n    updateYamlValuesFromEdit(val) {\n      const parsed = jsyaml.load(val);\n\n      removeEmptyAttrs(parsed);\n      Object.assign(this.value, parsed);\n    }\n  }\n};\n</script>\n\n<template>\n  <Create v-if=\"isCreate\" :value=\"value\" :mode=\"mode\" />\n  <CruResource\n    v-else\n    :resource=\"value\"\n    :mode=\"realMode\"\n    :can-yaml=\"false\"\n    @finish=\"finish\"\n  >\n    <Config\n      :value=\"value\"\n      :mode=\"realMode\"\n      @updateYamlValues=\"updateYamlValuesFromEdit\"\n    />\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=template&id=27ab086c&\"\nimport script from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-bd6d92b8] .vs__selected{height:auto!important}.step__policies[data-v-bd6d92b8]{display:flex;flex-direction:column;flex:1;overflow-x:hidden}.step__policies .spacer[data-v-bd6d92b8]{line-height:2}.filter[data-v-bd6d92b8]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end;align-items:center}.filter>*[data-v-bd6d92b8]{margin:10px;max-width:33%}.filter[data-v-bd6d92b8]>:first-child{margin-left:0}.filter[data-v-bd6d92b8]>:last-child{margin-right:0}.filter__category[data-v-bd6d92b8]{min-width:200px;height:unset}.filter__reset[data-v-bd6d92b8],.filter__search[data-v-bd6d92b8]{height:61px}@media only screen and (max-width:1281px){.filter[data-v-bd6d92b8]{width:100%}}@media only screen and (min-width:1281px){.filter[data-v-bd6d92b8]{width:75%}}.grid[data-v-bd6d92b8]{display:flex;justify-content:flex-start;flex-wrap:wrap;margin:0 -10px}.grid .custom[data-v-bd6d92b8]{height:110px}.grid .subtype[data-v-bd6d92b8]{height:auto}@media only screen and (min-width:480px){.grid .subtype[data-v-bd6d92b8]{width:100%}}@media only screen and (min-width:768px){.grid .subtype[data-v-bd6d92b8]{width:calc(50% - 20px)}}@media only screen and (min-width:992px){.grid .subtype[data-v-bd6d92b8]{width:calc(33.33333% - 20px)}}@media only screen and (min-width:1281px){.grid .subtype[data-v-bd6d92b8]{width:calc(25% - 20px)}}@media only screen and (min-width:1600px){.grid .subtype__label[data-v-bd6d92b8]{max-width:100%}.grid .subtype h4[data-v-bd6d92b8]{white-space:nowrap}}.grid .disabled[data-v-bd6d92b8]{opacity:.5;cursor:not-allowed}.subtype__metadata[data-v-bd6d92b8]{height:100%;display:flex;flex-direction:column;justify-content:space-between;padding:5px 10px}.subtype__label[data-v-bd6d92b8]{max-width:205px}.subtype__label h4[data-v-bd6d92b8]{white-space:normal}.subtype__badge[data-v-bd6d92b8]{background-color:var(--darker);padding:4px 5px}.subtype__body[data-v-bd6d92b8]{height:auto}.subtype__footer[data-v-bd6d92b8]{display:flex;flex-direction:row;justify-content:space-between;margin-top:10px}.subtype__aware[data-v-bd6d92b8],.subtype__mutation[data-v-bd6d92b8]{border:1px solid var(--border);padding:0 5px;margin-left:2px}.subtype__left[data-v-bd6d92b8],.subtype__right[data-v-bd6d92b8]{display:flex;flex-direction:row}.subtype__left[data-v-bd6d92b8]{align-items:flex-start}.subtype__right[data-v-bd6d92b8]{align-items:flex-end}.subtype__icon[data-v-bd6d92b8]{width:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyGrid.vue?vue&type=style&index=0&id=bd6d92b8&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7da1d330\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"[data-v-db2b144a] .step-container{height:auto}[data-v-db2b144a] .header .step-sequence{display:block}[data-v-db2b144a] .header .step-sequence .steps .divider{top:22px}[data-v-db2b144a] .controls-row{position:relative;width:auto}[data-v-db2b144a] .controls-row .controls-steps{display:flex}[data-v-db2b144a] .custom{min-height:110px}[data-v-db2b144a] .subtype{height:110px;margin:10px;position:relative;border-radius:calc(var(--border-radius)*1.5);border:1px solid var(--border);text-decoration:none!important;color:var(--body-text)!important}[data-v-db2b144a] .subtype:hover:not(.disabled){box-shadow:0 0 30px var(--shadow);transition:box-shadow .1s ease-in-out;cursor:pointer;text-decoration:none!important}[data-v-db2b144a] .subtype__metadata{padding:10px}[data-v-db2b144a] .subtype__metadata__description,[data-v-db2b144a] .subtype__metadata__label{padding-right:20px}[data-v-db2b144a] .subtype__badge{position:absolute;right:0;top:0;padding:4px 5px;border-bottom-left-radius:var(--border-radius)}[data-v-db2b144a] .subtype__badge label{font-size:12px;line-height:12px;text-align:center;display:block;white-space:no-wrap;text-overflow:ellipsis;color:var(--app-rancher-accent-text);margin:0}[data-v-db2b144a] .subtype__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px;line-height:normal}[data-v-db2b144a] .subtype__description{margin-right:10px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden;text-overflow:ellipsis;color:var(--input-label)}.wizard[data-v-db2b144a]{position:relative;height:100%}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}