(("undefined"!==typeof self?self:this)["webpackJsonpkubewarden_1_2_0"]=("undefined"!==typeof self?self:this)["webpackJsonpkubewarden_1_2_0"]||[]).push([[6],{"0cb2":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{class:{"side-tabs":!!e.sideTabs,"tabs-only":e.tabsOnly}},[t("ul",{ref:"tablist",staticClass:"tabs",class:{clearfix:!e.sideTabs,vertical:e.sideTabs,horizontal:!e.sideTabs},attrs:{role:"tablist",tabindex:"0"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:(t.preventDefault(),e.selectNext(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:(t.preventDefault(),e.selectNext(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.selectNext(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.selectNext(-1))}]}},[e._l(e.sortedTabs,(function(a){return t("li",{key:a.name,class:{tab:!0,active:a.active,disabled:a.disabled,error:a.error},attrs:{id:a.name,"data-testid":a.name,role:"presentation"}},[t("a",{attrs:{"data-testid":"btn-"+a.name,"aria-controls":"#"+a.name,"aria-selected":a.active,role:"tab"},on:{click:function(t){return t.preventDefault(),e.select(a.name,t)}}},[t("span",[e._v(e._s(a.labelDisplay))]),a.badge?t("span",{staticClass:"tab-badge"},[e._v(e._s(a.badge))]):e._e(),e.hasIcon(a)?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("validation.tab"),expression:"t('validation.tab')"}],staticClass:"conditions-alert-icon icon-error"}):e._e()])])})),e.sideTabs&&!e.sortedTabs.length?t("li",{staticClass:"tab disabled"},[t("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v("(None)")])]):e._e(),e.sideTabs&&e.showTabsAddRemove?t("ul",{staticClass:"tab-list-footer"},[t("li",[t("button",{staticClass:"btn bg-transparent",attrs:{type:"button"},on:{click:e.tabAddClicked}},[t("i",{staticClass:"icon icon-plus"})]),t("button",{staticClass:"btn bg-transparent",attrs:{type:"button",disabled:!e.sortedTabs.length},on:{click:e.tabRemoveClicked}},[t("i",{staticClass:"icon icon-minus"})])])]):e._e(),e._t("tab-row-extras")],2),t("div",{class:{"tab-container":!!e.tabs.length||!!e.sideTabs,"no-content":e.noContent,"tab-container--flat":!!e.flat}},[e._t("default")],2)])},s=[],o=a("a1d8"),n=a.n(o),i=a("330a"),l=a.n(i),d=a("bddd"),c=a("1d19"),u=a("1659"),p=a.n(u),h={name:"Tabbed",props:{defaultTab:{type:String,default:null},sideTabs:{type:Boolean,default:!1},showTabsAddRemove:{type:Boolean,default:!1},scrollOnChange:{type:Boolean,default:!1},useHash:{type:Boolean,default:!0},noContent:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},tabsOnly:{type:Boolean,default:!1}},provide(){const e=this.tabs;return{sideTabs:this.sideTabs,addTab(t){const a=Object(d["e"])(e,"name",t.name);a&&Object(d["i"])(e,a),Object(d["a"])(e,t)},removeTab(t){Object(d["i"])(e,t)}}},data(){return{tabs:[],activeTabName:null}},computed:{sortedTabs(){return Object(c["a"])(this.tabs,["weight:desc","labelDisplay","name"])}},watch:{sortedTabs(e){const{defaultTab:t,useHash:a}=this,r=e.find(e=>e.active),s=a?this.$route.hash:void 0,o=a?s.slice(1):void 0,i=e.find(e=>e.name===o&&!e.active),d=n()(e)||null;l()(r)?a&&!l()(i)?this.select(i.name):l()(t)||l()(e.find(e=>e.name===t))?null!==d&&void 0!==d&&d.name&&this.select(d.name):this.select(t):a&&(null===r||void 0===r?void 0:r.name)===o&&this.select(r.name)}},mounted(){this.useHash&&window.addEventListener("hashchange",this.hashChange)},unmounted(){this.useHash&&window.removeEventListener("hashchange",this.hashChange)},methods:{hasIcon(e){return e.displayAlertIcon||e.error&&!e.active},hashChange(){if(!this.scrollOnChange){const e=document.getElementsByTagName("main")[0];e&&(e.scrollTop=0)}this.select(this.$route.hash)},find(e){return this.sortedTabs.find(t=>t.name===e)},select(e){const{sortedTabs:t}=this,a=this.find(e),r="#"+e;if(a&&!a.disabled){if(this.useHash){const{$route:{hash:e},$router:{currentRoute:t}}=this;if(this.useHash&&e!==r){const e={...t};e.hash=r,this.$router.replace(e)}}for(const e of t)e.active=e.name===a.name;this.$emit("changed",{tab:a,selectedName:a.name}),this.activeTabName=a.name}},selectNext(e){const{sortedTabs:t}=this,a=t.findIndex(e=>e.active),r=o(a,e,t.length),s=t[r].name;function o(e,t,a){const r=e+t;return r>=a?0:r<=0?a-1:r}this.select(s),this.$nextTick(()=>{this.$refs.tablist.focus()})},tabAddClicked(){const e=p()(this.tabs,e=>e.active);this.$emit("addTab",e)},tabRemoveClicked(){const e=p()(this.tabs,e=>e.active);this.$emit("removeTab",e)}}},f=h,b=(a("5074"),a("d802")),v=Object(b["a"])(f,r,s,!1,null,"f1718c5e",null);t["a"]=v.exports},"13ad":function(e,t,a){"use strict";a("764c")},1645:function(e,t,a){"use strict";a("1b16")},1659:function(e,t,a){var r=a("0ee5"),s=a("4b7a"),o=a("9b66"),n=Math.max;function i(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var l=null==a?0:o(a);return l<0&&(l=n(i+l,0)),r(e,s(t,3),l)}e.exports=i},"1b16":function(e,t,a){var r=a("1cfd");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("30fa9d8c",r,!0,{sourceMap:!1,shadowMode:!1})},"1bf1":function(e,t,a){var r=a("96ab");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("d7b84d86",r,!0,{sourceMap:!1,shadowMode:!1})},"1ce3":function(e,t,a){"use strict";a("f9f6")},"1cfd":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".zero circle{stroke:var(--gauge-zero)}.count-gauge{padding:10px;position:relative;display:flex;flex-direction:row;align-items:center}.count-gauge.clickable{cursor:pointer}.count-gauge .data{display:flex;flex-direction:column;flex:1}.count-gauge .data label{opacity:.7}.count-gauge .graphical{width:40px;height:40px;margin-right:10px}.count-gauge h1{font-size:40px;line-height:36px;padding-bottom:5px;margin-bottom:0}@media only screen and (min-width:768px){.count-gauge h1{font-size:40px;line-height:36px}}.count-gauge .alerts{position:absolute;right:10px;top:5px;font-size:15px}.count-gauge .alerts .text-error{margin-left:5px}",""]),e.exports=t},"25a4":function(e,t,a){"use strict";a("8356")},"305c":function(e,t,a){"use strict";var r=a("da25"),s=a("8bbf"),o=a.n(s),n=a("cd6d");t["a"]=o.a.extend({...n["a"],props:{mode:{type:String,default:r["t"]},realMode:{type:String,default:r["t"]},as:{type:String,default:r["B"]},value:{type:Object,required:!0},initialValue:{type:Object,default:null},liveValue:{type:Object,default:null},doneEvent:{type:Boolean,default:!1}}})},5074:function(e,t,a){"use strict";a("9c34")},"5a1e":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".tabs[data-v-f1718c5e]{list-style-type:none;margin:0;padding:0}.tabs.horizontal[data-v-f1718c5e]{border:solid thin var(--border);border-bottom:0;display:flex;flex-direction:row}.tabs.horizontal+.tab-container[data-v-f1718c5e]{border:solid thin var(--border)}.tabs.horizontal .tab.active[data-v-f1718c5e]{border-bottom:solid 2px var(--primary)}.tabs[data-v-f1718c5e]:focus{outline:none}.tabs:focus .tab.active a span[data-v-f1718c5e]{text-decoration:underline}.tabs .tab[data-v-f1718c5e]{position:relative;float:left;padding:0 8px 0 0;cursor:pointer}.tabs .tab A[data-v-f1718c5e]{display:flex;align-items:center;padding:10px 15px}.tabs .tab A[data-v-f1718c5e]:hover{text-decoration:none}.tabs .tab A:hover span[data-v-f1718c5e]{text-decoration:underline}.tabs .tab .conditions-alert-icon[data-v-f1718c5e]{color:var(--error);padding-left:4px}.tabs .tab[data-v-f1718c5e]:last-child{padding-right:0}.tabs .tab.active>A[data-v-f1718c5e]{color:var(--primary);text-decoration:none}.tabs .tab.error A>i[data-v-f1718c5e]{color:var(--error)}.tabs .tab .tab-badge[data-v-f1718c5e]{margin-left:5px;background-color:var(--link);color:#fff;border-radius:6px;padding:1px 7px;font-size:11px}.tab-container[data-v-f1718c5e]{padding:20px}.tab-container.no-content[data-v-f1718c5e]{padding:0 0 3px 0}.tab-container--flat[data-v-f1718c5e]{padding:0}.tab-container--flat .side-tabs[data-v-f1718c5e]{box-shadow:unset}.tabs-only[data-v-f1718c5e]{margin-bottom:20px}.tabs-only .tab-container[data-v-f1718c5e]{display:none}.tabs-only .tabs[data-v-f1718c5e]{border:0;border-bottom:2px solid var(--border)}.side-tabs[data-v-f1718c5e]{display:flex;box-shadow:0 0 20px var(--shadow);border-radius:calc(var(--border-radius)*2);background-color:var(--tabbed-sidebar-bg)}.side-tabs .tab-container[data-v-f1718c5e]{padding:20px}.side-tabs .tabs[data-v-f1718c5e]{width:200px;min-width:200px;display:flex;flex:1 0;flex-direction:column}.side-tabs .tabs .tab[data-v-f1718c5e]{width:100%;border-left:5px solid transparent}.side-tabs .tabs .tab.toggle A[data-v-f1718c5e],.side-tabs .tabs .tab A[data-v-f1718c5e]{color:var(--primary)}.side-tabs .tabs .tab.active[data-v-f1718c5e]{background-color:var(--body-bg);border-left:solid 5px var(--primary)}.side-tabs .tabs .tab.active A[data-v-f1718c5e]{color:var(--input-label)}.side-tabs .tabs .tab.disabled[data-v-f1718c5e]{background-color:var(--disabled-bg)}.side-tabs .tabs .tab.disabled A[data-v-f1718c5e]{color:var(--disabled-text);text-decoration:none}.side-tabs .tabs .tab-list-footer[data-v-f1718c5e]{list-style:none;padding:0;margin-top:auto}.side-tabs .tabs .tab-list-footer li[data-v-f1718c5e]{display:flex;flex:1}.side-tabs .tabs .tab-list-footer li .btn[data-v-f1718c5e]{flex:1 1;display:flex;justify-content:center}.side-tabs .tabs .tab-list-footer li button[data-v-f1718c5e]:first-of-type{border-top:solid 1px var(--border);border-right:solid 1px var(--border);border-top-right-radius:0}.side-tabs .tabs .tab-list-footer li button[data-v-f1718c5e]:last-of-type{border-top:solid 1px var(--border);border-top-left-radius:0}.side-tabs .tab-container[data-v-f1718c5e]{width:calc(100% - 200px);flex-grow:1;background-color:var(--body-bg)}",""]),e.exports=t},"66a2":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".grafana-graph[data-v-a5a1b7f4]{position:relative;min-height:100%;min-width:100%}.grafana-graph[data-v-a5a1b7f4] .content{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;padding:0}.grafana-graph[data-v-a5a1b7f4] .overlay{position:static;background-color:initial}.grafana-graph iframe[data-v-a5a1b7f4]{position:absolute;left:0;right:0;top:20px;bottom:0;width:100%;height:100%;overflow:hidden}.grafana-graph iframe.loading[data-v-a5a1b7f4]{visibility:hidden}",""]),e.exports=t},"6fc4":function(e,t,a){var r=a("facb");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("5efe5fa7",r,!0,{sourceMap:!1,shadowMode:!1})},"74c2":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("GradientBox",{staticClass:"count-gauge",class:{clickable:e.clickable},attrs:{"primary-color-var":e.primaryColorVar,plain:e.plain},nativeOn:{click:function(t){return e.visitLocation()}}},[e.graphical?t("div",{staticClass:"graphical"},[e.percentage>0?t("GraphCircle",{attrs:{"primary-stroke-color":`rgba(var(${e.primaryColorVar}))`,"secondary-stroke-color":"rgb(var(--resource-gauge-back-circle))",percentage:e.percentage}}):e._e(),0===e.percentage?t("GraphCircle",{staticClass:"zero",attrs:{"primary-stroke-color":`rgba(var(${e.primaryColorVar}))`,"secondary-stroke-color":"rgb(var(--resource-gauge-back-circle))",percentage:100}}):e._e()],1):e._e(),t("div",{staticClass:"data"},[t("h1",[e._v(e._s(e.useful))]),t("label",[e._v(e._s(e.name))]),e.showAlerts?t("div",{staticClass:"alerts"},[t("span",{staticClass:"text-warning"},[t("i",{staticClass:"icon icon-warning"}),t("span",{staticClass:"count"},[e._v(e._s(e.warningCount))])]),t("span",{staticClass:"text-error"},[t("i",{staticClass:"icon icon-error"}),t("span",{staticClass:"count"},[e._v(e._s(e.errorCount))])])]):e._e()])])},s=[],o=function(){var e=this,t=e._self._c;return t("svg",{staticClass:"circle",attrs:{width:"100%",height:"100%",viewBox:e.viewBox}},[t("g",{attrs:{transform:e.transform}},[t("defs",[t("linearGradient",{attrs:{id:e.primaryStrokeColorId,x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[t("stop",{attrs:{offset:"50%","stop-color":e.primaryStrokeGradientColor||e.primaryStrokeColor}}),t("stop",{attrs:{offset:"100%","stop-color":e.primaryStrokeColor}})],1),t("linearGradient",{attrs:{id:e.secondaryStrokeColorId,x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[t("stop",{attrs:{offset:"50%","stop-color":e.secondaryStrokeGradientColor||e.secondaryStrokeColor}}),t("stop",{attrs:{offset:"100%","stop-color":e.secondaryStrokeColor}})],1)],1),t("circle",{attrs:{r:e.radius,cy:e.center,cx:e.center,"stroke-width":e.strokeWidth,stroke:`url(#${e.secondaryStrokeColorId})`,fill:"none"}}),t("circle",{attrs:{r:e.radius,cy:e.center,cx:e.center,"stroke-width":e.strokeWidth,stroke:`url(#${e.primaryStrokeColorId})`,"stroke-dasharray":e.circumference,"stroke-dashoffset":e.circumference*(1-e.percentage),fill:"none"}})]),e.showText?t("text",{staticStyle:{"font-size":"25","dominant-baseline":"middle","text-anchor":"middle"},attrs:{x:e.center,y:e.center,fill:`url(#${e.primaryStrokeColorId})`}},[e._v(" "+e._s(e.parsePercentage)+"% ")]):e._e()])},n=[];let i=0;var l={props:{percentage:{type:Number,default:.75},strokeWidth:{type:Number,default:22},primaryStrokeColor:{type:String,required:!0},primaryStrokeGradientColor:{type:String,default:null},secondaryStrokeColor:{type:String,required:!0},secondaryStrokeGradientColor:{type:String,default:null},rotate:{type:Number,default:90},showText:{type:Boolean,default:!1}},data(){return{id:i++}},computed:{viewportSize(){return 100},radius(){const e=this.viewportSize/2,t=this.strokeWidth/2;return e-t},center(){return this.viewportSize/2},viewBox(){return`0 0 ${this.viewportSize} ${this.viewportSize}`},circumference(){return 2*Math.PI*this.radius},transform(){return`rotate(${this.rotate}, ${this.center}, ${this.center})`},strokeDasharray(){return this.circumference},strokeDashoffset(){return this.circumference*(1-this.percentage)},primaryStrokeColorId(){return"primary-"+i},secondaryStrokeColorId(){return"secondary-"+i},parsePercentage(){return parseInt(100*this.percentage)||0}}},d=l,c=(a("a357"),a("d802")),u=Object(c["a"])(d,o,n,!1,null,"5f78e642",null),p=u.exports,h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gradient-box",class:{"show-tab":e.showTab,plain:e.plain},style:e.style},[e._t("default")],2)},f=[],b={props:{primaryColorVar:{type:String,default:null},showTab:{type:Boolean,default:!0},showSolid:{type:Boolean,default:!1},backgroundOpacityAdjustment:{type:Number,default:1},plain:{type:Boolean,default:!1}},computed:{leftColor(){return this.showSolid?this.primaryColor:this.customizePrimaryColorOpacity(.25*this.backgroundOpacityAdjustment)},rightColor(){return this.showSolid?this.primaryColor:this.customizePrimaryColorOpacity(.125*this.backgroundOpacityAdjustment)},primaryColor(){return this.customizePrimaryColorOpacity(1)},style(){if(!this.plain){const e=`background: transparent linear-gradient(94deg, ${this.leftColor} 0%, ${this.rightColor} 100%) 0% 0% no-repeat padding-box;`,t=this.showBorder?`border: 1px solid ${this.primaryColor};`:"",a=this.showTab?`border-left: 9px solid ${this.primaryColor};`:"";return`${e}${t}${a}`}return""}},methods:{customizePrimaryColorOpacity(e){return`rgba(var(${this.primaryColorVar}), ${e})`}}},v=b,m=(a("9e9f"),a("25a4"),Object(c["a"])(v,h,f,!1,null,"42940dc4",null)),g=m.exports,y={components:{GradientBox:g,GraphCircle:p},props:{name:{type:String,required:!0},total:{type:Number,required:!0},useful:{type:Number,required:!0},primaryColorVar:{type:String,default:null},warningCount:{type:Number,default:0},errorCount:{type:Number,default:0},location:{type:Object,default:null},plain:{type:Boolean,default:!1},graphical:{type:Boolean,default:!0}},computed:{percentage(){return 0===this.total?0:this.useful/this.total},clickable(){return!!this.location},showAlerts(){const e=this.warningCount+this.errorCount;return e>0}},methods:{visitLocation(){this.clickable&&this.$router.push(this.location)}}},x=y,w=(a("1645"),Object(c["a"])(x,r,s,!1,null,null,null));t["a"]=w.exports},"764c":function(e,t,a){var r=a("66a2");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("23f110c9",r,!0,{sourceMap:!1,shadowMode:!1})},"7d6c":function(e,t,a){var r=a("9ef5"),s=1/0,o=17976931348623157e292;function n(e){if(!e)return 0===e?e:0;if(e=r(e),e===s||e===-s){var t=e<0?-1:1;return t*o}return e===e?e:0}e.exports=n},8356:function(e,t,a){var r=a("db3f");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("1fc9ca71",r,!0,{sourceMap:!1,shadowMode:!1})},"898f":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".dashboard-metrics[data-v-1e72d538] .external-link{position:absolute;left:200px;top:-45px}.dashboard-metrics[data-v-1e72d538] .frame{top:0}.dashboard-metrics.external-link-pull-left[data-v-1e72d538] .external-link{position:absolute;left:10px;top:-47px}",""]),e.exports=t},9648:function(e,t,a){var r=a("898f");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("37c375f2",r,!0,{sourceMap:!1,shadowMode:!1})},"96ab":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".gradient-box{border-radius:5px}",""]),e.exports=t},"9b66":function(e,t,a){var r=a("7d6c");function s(e){var t=r(e),a=t%1;return t===t?a?t-a:t:0}e.exports=s},"9c34":function(e,t,a){var r=a("5a1e");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("e1b83e60",r,!0,{sourceMap:!1,shadowMode:!1})},"9e9f":function(e,t,a){"use strict";a("1bf1")},a1d8:function(e,t){function a(e){return e&&e.length?e[0]:void 0}e.exports=a},a357:function(e,t,a){"use strict";a("6fc4")},b45b:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var r=a("f390"),s=a("4048");a("907c");const o=["100.2.0+up40.1.2","102.0.0+up40.1.2"];function n(e,t){return o.includes(e)?"/k8s/clusters/"+t:"local"===t?"":"/k8s/clusters/"+t}function i(e,t,a,r,o=!0){const i=Object(s["c"])(t);let l=o?`${n(e,a)}${i.path}`:i.path;return i.query.viewPanel&&(l=Object(s["a"])(l,"viewPanel",i.query.viewPanel)),l=Object(s["a"])(l,"orgId",i.query.orgId),l=Object(s["a"])(l,"kiosk",null),Object.entries(r).forEach(e=>{l=Object(s["a"])(l,e[0],e[1])}),l}async function l(e,t,a,o,i="cluster"){if(!Object(r["b"])(t.getters))return!1;const l=Object(s["c"])(o),d=n(e,a)+"/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/",c="http:rancher-monitoring-grafana:80/proxy/",u=l.path.split(c)[1],p=u.split("/")[1],h=`${d}api/dashboards/uid/${p}`;try{return await t.dispatch(i+"/request",{url:h,redirectUnauthorized:!1}),!0}catch(f){return!1}}},c389:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-metrics",class:!e.hasSummaryAndDetail&&"external-link-pull-left"},[t("div",{staticClass:"graph-options mb-10"},[t("DashboardOptions",{attrs:{"has-summary-and-detail":e.hasSummaryAndDetail},model:{value:e.graphOptions,callback:function(t){e.graphOptions=t},expression:"graphOptions"}})],1),t("div",{staticClass:"info"},[e._t("default")],2),t("div",{staticClass:"graphs",style:{height:e.graphHeight}},["detail"===e.graphOptions.type?t("GrafanaDashboard",{key:"'detail'",staticClass:"col span-12 detail",attrs:{"background-color":e.graphBackgroundColor,theme:e.theme,"refresh-rate":e.graphOptions.refreshRate,range:e.graphOptions.range,url:e.detailUrl,vars:e.vars,"modify-prefix":e.modifyPrefix}}):t("GrafanaDashboard",{key:"'summary'",staticClass:"col span-12 summary",attrs:{"background-color":e.graphBackgroundColor,theme:e.theme,"refresh-rate":e.graphOptions.refreshRate,range:e.graphOptions.range,url:e.summaryUrl,vars:e.vars,"modify-prefix":e.modifyPrefix}})],1)])},s=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"graph-options"},[e.hasSummaryAndDetail?t("div",[t("ButtonGroup",{attrs:{options:e.detailSummaryOptions},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1):t("div",[t("div")]),t("div",{staticClass:"range-refresh"},[t("LabeledSelect",{attrs:{options:e.rangeOptions,label:e.t("graphOptions.range")},model:{value:e.value.range,callback:function(t){e.$set(e.value,"range",t)},expression:"value.range"}}),t("LabeledSelect",{attrs:{options:e.refreshOptions,label:e.t("graphOptions.refresh")},model:{value:e.value.refreshRate,callback:function(t){e.$set(e.value,"refreshRate",t)},expression:"value.refreshRate"}})],1)])},n=[],i=a("cc2d"),l=a("466b"),d={components:{ButtonGroup:i["a"],LabeledSelect:l["a"]},props:{value:{type:Object,required:!0},hasSummaryAndDetail:{type:Boolean,default:!0}},data(){return{range:null,rangeOptions:[{label:this.t("generic.units.time.5m"),value:"5m"},{label:this.t("generic.units.time.1h"),value:"1h"},{label:this.t("generic.units.time.6h"),value:"6h"},{label:this.t("generic.units.time.1d"),value:"1d"},{label:this.t("generic.units.time.7d"),value:"7d"},{label:this.t("generic.units.time.30d"),value:"30d"}],refreshOptions:[{label:this.t("generic.units.time.5s"),value:"5s"},{label:this.t("generic.units.time.10s"),value:"10s"},{label:this.t("generic.units.time.30s"),value:"30s"},{label:this.t("generic.units.time.1m"),value:"1m"},{label:this.t("generic.units.time.5m"),value:"5m"},{label:this.t("generic.units.time.15m"),value:"15m"},{label:this.t("generic.units.time.30m"),value:"30m"},{label:this.t("generic.units.time.1h"),value:"1h"},{label:this.t("generic.units.time.2h"),value:"2h"},{label:this.t("generic.units.time.1d"),value:"1d"}],detailSummaryOptions:[{label:this.t("graphOptions.detail"),value:"detail"},{label:this.t("graphOptions.summary"),value:"summary"}]}}},c=d,u=(a("1ce3"),a("d802")),p=Object(u["a"])(c,o,n,!1,null,"b7bcaa58",null),h=p.exports,f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grafana-graph"},[e.error?t("Banner",{staticStyle:{"z-index":"1000"},attrs:{color:"error"}},[t("div",{staticClass:"text-center"},[e._v(" "+e._s(e.t("grafanaDashboard.failedToLoad"))+" "),t("a",{attrs:{href:"#"},on:{click:e.reload}},[e._v(e._s(e.t("grafanaDashboard.reload")))])])]):e._e(),t("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],ref:"frame",class:{loading:e.loading,frame:!0},attrs:{src:e.currentUrl,frameborder:"0",scrolling:"no"}}),e.loading?t("div",[t("Loading")],1):e._e(),e.loading||e.error?e._e():t("div",{staticClass:"external-link"},[t("a",{attrs:{href:e.grafanaUrl,target:"_blank",rel:"noopener noreferrer nofollow"}},[e._v(e._s(e.t("grafanaDashboard.grafana"))+" "),t("i",{staticClass:"icon icon-external-link"})])])],1)},b=[],v=a("15ca"),m=a("6418"),g=a("b45b"),y=a("907c"),x={components:{Banner:m["a"],Loading:v["a"]},props:{url:{type:String,required:!0},vars:{type:Object,default:()=>({})},range:{type:String,default:null},refreshRate:{type:String,default:null},modifyPrefix:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#1b1c21"},theme:{type:String,default:"dark"}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(e+"/find",{type:y["b"].APP,id:"cattle-monitoring-system/rancher-monitoring"});this.monitoringVersion=null===t||void 0===t?void 0:t.currentVersion},data(){return{loading:!1,error:!1,interval:null,errorTimer:null,monitoringVersion:null}},computed:{currentUrl(){return this.computeUrl()},grafanaUrl(){return this.currentUrl.replace("&kiosk","")},graphWindow(){var e;return null===(e=this.$refs.frame)||void 0===e?void 0:e.contentWindow},graphHistory(){var e;return null===(e=this.graphWindow)||void 0===e?void 0:e.history},graphDocument(){var e;return null===(e=this.graphWindow)||void 0===e?void 0:e.document}},watch:{currentUrl(e){var t;this.graphHistory&&null!==(t=this.graphWindow)&&void 0!==t&&t.angular&&this.graphWindow.location.replace(e)},error(e){e?this.errorTimer=setInterval(()=>{this.reload()},45e3):(clearInterval(this.errorTimer),this.errorTimer=null)}},mounted(){this.$refs.frame.onload=this.inject,this.poll()},beforeDestroy(){this.interval&&clearInterval(this.interval),this.errorTimer&&clearInterval(this.errorTimer)},methods:{poll(){this.interval&&(clearInterval(this.interval),this.interval=null),this.interval=setInterval(()=>{try{var e;const t=null===(e=this.$refs.frame)||void 0===e?void 0:e.contentWindow,a=t.document.getElementsByClassName("alert-error"),r=t.document.getElementsByClassName("panel-info-corner--error"),s=t.document.getElementsByClassName("panel-in-fullscreen"),o=t.document.getElementsByClassName("panel-container"),n=a.length>0||r.length>0,i=s.length>0||o.length>0,l=t.document.getElementsByTagName("pre"),d=l.length>0?l[0].innerText:"",c=d.includes('"status": "Failure"');if(n)throw new Error("An error was detected in the iframe");this.$set(this,"loading",!i),this.$set(this,"error",c)}catch(t){this.$set(this,"error",!0),this.$set(this,"loading",!1),clearInterval(this.interval),this.interval=null}},100)},computeFromTo(){return{from:"now-"+this.range,to:"now"}},computeUrl(){const e=this.url,t=this.$store.getters["currentCluster"].id,a=this.computeParams();return Object(g["a"])(this.monitoringVersion,e,t,a,this.modifyPrefix)},computeParams(){const e={},t=this.computeFromTo();return t.from&&(e.from=t.from),t.to&&(e.to=t.to),this.refreshRate&&(e.refresh=this.refreshRate),Object.keys(this.vars).length>0&&Object.entries(this.vars).forEach(t=>{const a="var-"+t[0];e[a]=t[1]}),e.theme=this.theme,e},reload(e){e&&e.preventDefault(),this.$refs.frame.contentWindow.location.reload(),this.poll()},injectCss(){var e;const t=document.createElement("style");t.innerHTML=`\n        body .grafana-app .dashboard-content {\n          background: ${this.backgroundColor};\n          padding: 0;\n        }\n\n        body .grafana-app .layout {\n          background: ${this.backgroundColor};\n        }\n\n\n        body .grafana-app .dashboard-content .panel-container {\n          background-color: initial;\n          border: none;\n        }\n\n        body .grafana-app .dashboard-content .panel-wrapper {\n          height: 100%;\n        }\n\n        body .grafana-app .panel-menu-container {\n          display: none;\n        }\n\n        body .grafana-app .panel-title {\n          cursor: default;\n        }\n\n        body .grafana-app .panel-title .panel-title-text div {\n          display: none;\n        }\n      `;const a=null===(e=this.$refs.frame)||void 0===e?void 0:e.contentWindow,r=null===a||void 0===a?void 0:a.document;r.head&&r.head.appendChild(t)},inject(){this.injectCss()}}},w=x,k=(a("13ad"),Object(u["a"])(w,f,b,!1,null,"a5a1b7f4",null)),C=k.exports,_=a("9ce4"),T={components:{DashboardOptions:h,GrafanaDashboard:C},props:{detailUrl:{type:String,required:!0},summaryUrl:{type:String,default:""},vars:{type:Object,default:()=>({})},graphHeight:{type:String,required:!0},hasSummaryAndDetail:{type:Boolean,default:!0},modifyPrefix:{type:Boolean,default:!0}},data(){return{graphOptions:{range:"5m",refreshRate:"30s",type:"detail"}}},computed:{...Object(_["a"])(["prefs/theme"]),graphBackgroundColor(){return"dark"===this.theme?"#2e3035":"#f3f4f9"},theme(){return this["prefs/theme"]}}},O=T,S=(a("ec0b"),Object(u["a"])(O,r,s,!1,null,"1e72d538",null));t["a"]=S.exports},c422:function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("Tabbed",e._b({attrs:{"default-tab":e.defaultTab},on:{changed:e.tabChange}},"Tabbed",e.$attrs,!1),[e._t("default"),e.showConditions?t("Tab",{attrs:{"label-key":"resourceTabs.conditions.tab",name:"conditions",weight:-1,"display-alert-icon":e.conditionsHaveIssues}},[t("Conditions",{attrs:{value:e.value}})],1):e._e(),e.showEvents?t("Tab",{attrs:{"label-key":"resourceTabs.events.tab",name:"events",weight:-2}},["events"===e.selectedTab?t("SortableTable",{attrs:{rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"}}):e._e()],1):e._e(),e.showRelated?t("Tab",{attrs:{name:"related","label-key":"resourceTabs.related.tab",weight:-3}},[t("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.from",expression:"'resourceTabs.related.from'"}]}),t("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"from"}}),t("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.to",expression:"'resourceTabs.related.to'"}],staticClass:"mt-20"}),t("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"to"}})],1):e._e(),e._l(e.extensionTabs,(function(a,r){return t("Tab",{key:`${a.name}${r}`,attrs:{name:a.name,label:a.label,"label-key":a.labelKey,weight:a.weight,tooltip:a.tooltip,"show-header":a.showHeader,"display-alert-icon":a.displayAlertIcon,error:a.error,badge:a.badge}},[t(a.component,{tag:"component",attrs:{resource:e.value}})],1)}))],2)},s=[],o=a("0cb2"),n=a("38de"),i=a("305c"),l=function(){var e=this,t=e._self._c;return t("SortableTable",{attrs:{headers:e.headers,rows:e.rows,"key-field":"condition","default-sort-by":"condition","table-actions":!1,"row-actions":!1,search:!1},scopedSlots:e._u([{key:"cell:condition",fn:function({row:a}){return[t("span",{class:{"text-error":a.error}},[e._v(e._s(a.condition))])]}},{key:"cell:status",fn:function({row:a}){return[t("span",{class:{"text-error":a.error}},[e._v(e._s(a.status))])]}}])})},d=[],c=a("0fb1"),u={components:{SortableTable:c["b"]},props:{value:{type:Object,default:()=>({})}},computed:{headers(){return[{name:"condition",labelKey:"tableHeaders.condition",value:"condition",width:150,sort:"condition",dashIfEmpty:!0},{name:"status",labelKey:"tableHeaders.status",value:"status",width:75,sort:"status",dashIfEmpty:!0},{name:"time",labelKey:"tableHeaders.updated",value:"time",sort:"time",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,dashIfEmpty:!0},{name:"message",labelKey:"tableHeaders.message",value:"message",sort:["message"],dashIfEmpty:!0}]},rows(){var e;return((null===(e=this.value.status)||void 0===e?void 0:e.conditions)||[]).map(e=>{let t=e.message||"";return e.reason&&(t=`[${e.reason}] ${t}`.trim()),{condition:e.type||"Unknown",status:e.status||"Unknown",error:e.error,time:e.lastProbeTime||e.lastUpdateTime||e.lastTransitionTime,message:t}})}}},p=u,h=a("d802"),f=Object(h["a"])(p,l,d,!1,null,null,null),b=f.exports,v=a("907c"),m=a("da25"),g=function(){var e=this,t=e._self._c;return t("ResourceTable",{attrs:{schema:null,rows:e.rows,headers:e.headers,search:!1,"table-actions":!1,namespaced:!0,"mangle-action-resources":e.getRealResources,"paging-label":"sortableTable.paging.generic",groupable:!1},scopedSlots:e._u([{key:"cell:state",fn:function({row:e}){return[e.real?t("BadgeState",{attrs:{value:e.real}}):t("BadgeState",{attrs:{value:e}})]}}])})},y=[],x=a("126f"),w=a("9c09"),k=a("462f"),C=a("1d19"),_=a("bcb3"),T=a("f17a"),O={components:{ResourceTable:x["a"],BadgeState:T["a"]},props:{value:{type:Object,required:!0},rel:{type:String,default:null},direction:{type:String,default:"to"},ignoreTypes:{type:Array,default:()=>[]}},data(){return{loadedResources:1}},computed:{filteredRelationships(){var e,t;let a=(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.relationships)||[];return a=a.filter(e=>{const t=e[this.direction+"Type"];return!(!t||this.ignoreTypes.includes(t))&&(!this.rel||e.rel===this.rel)}),a},rows(){if(this.loadedResources<1)return;const e=this.$store.getters["clusterId"],t=this.$store.getters["currentStore"](),a=[];for(const r of this.filteredRelationships){const s=r.state||"active",o=Object(w["c"])(s,r.error,r.transitioning),n=r[this.direction+"Type"],i=this.$store.getters[t+"/schemaFor"](n);let l=r[this.direction+"Id"];if(!l)continue;let d=null;const c=l.indexOf("/"),u=`${n}/${d}/${l}`;c>0&&(d=l.substr(0,c),l=l.substr(c+1));const p={name:`c-cluster-product-resource${d?"-namespace":""}-id`,params:{product:_["a"],cluster:"management"===t?"local":e,resource:n,namespace:d,id:l}};a.push({type:n,real:this.$store.getters[t+"/byId"](n,r[this.direction+"Id"]),id:r[this.direction+"Id"],state:s,metadata:{namespace:d,name:l},_key:u,name:l,namespace:d,nameDisplay:l,nameSort:Object(C["b"])(l).toLowerCase(),stateColor:o,detailLocation:p,typeDisplay:this.$store.getters["type-map/labelFor"](i),stateDisplay:Object(w["f"])(s),stateBackground:o.replace("text-","bg-"),groupByLabel:d})}return a},headers(){return[k["H"],k["M"],k["s"],k["t"]]}},methods:{async getRealResources(e){const t=this.$store.getters["currentStore"](),a=await Promise.allSettled(e.map(e=>this.$store.dispatch(t+"/find",{type:e.type,id:e.id}))),r=[];for(let s=0;s<a.length;s++)"fulfilled"===a[s].status&&r.push(a[s].value);return this.loadedResources++,r}}},S=O,$=Object(h["a"])(S,g,y,!1,null,null,null),j=$.exports,B=a("7083"),R=a("1722"),A={name:"ResourceTabs",components:{Tabbed:o["a"],Tab:n["a"],Conditions:b,SortableTable:c["b"],RelatedResources:j},mixins:[i["a"]],props:{value:{type:Object,default:()=>({})},mode:{type:String,default:m["A"]},defaultTab:{type:String,default:null},needConditions:{type:Boolean,default:!0},needEvents:{type:Boolean,default:!0},needRelated:{type:Boolean,default:!0}},data(){const e=this.$store.getters["currentStore"](v["f"]);return{hasEvents:this.$store.getters[e+"/schemaFor"](v["f"]),allEvents:[],selectedTab:this.defaultTab,didLoadEvents:!1,extensionTabs:Object(R["a"])(this,B["c"].TAB,B["e"].RESOURCE_DETAIL,this.$route)}},beforeDestroy(){this.$store.dispatch("cluster/forgetType",v["f"])},computed:{showConditions(){const e=this.$store.getters["currentStore"](this.value.type);var t;return!!this.$store.getters[e+"/schemaFor"](this.value.type)&&(this.isView&&this.needConditions&&(null===(t=this.value)||void 0===t?void 0:t.type)&&this.$store.getters[e+"/pathExistsInSchema"](this.value.type,"status.conditions"))},showEvents(){return this.isView&&this.needEvents&&this.hasEvents},showRelated(){return this.isView&&this.needRelated},eventHeaders(){return[{name:"type",label:this.t("tableHeaders.type"),value:"eventType",sort:"eventType"},{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"}]},events(){return this.allEvents.filter(e=>{var t,a,r;return(null===(t=e.involvedObject)||void 0===t?void 0:t.uid)===(null===(a=this.value)||void 0===a||null===(r=a.metadata)||void 0===r?void 0:r.uid)}).map(e=>({reason:`${e.reason||this.t("generic.unknown")}${e.count>1?` (${e.count})`:""}`.trim(),message:e.message||this.t("generic.unknown"),date:e.lastTimestamp||e.firstTimestamp||e.metadata.creationTimestamp,eventType:e.eventType}))},conditionsHaveIssues(){var e,t;return!!this.showConditions&&(null===(e=this.value.status)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.some(e=>e.error))}},methods:{tabChange(e){if(this.selectedTab=null===e||void 0===e?void 0:e.selectedName,!this.didLoadEvents&&"events"===this.selectedTab){const e=this.$store.getters["currentStore"](v["f"]);this.$store.dispatch(e+"/findAll",{type:v["f"]}).then(e=>{this.allEvents=e,this.didLoadEvents=!0})}}}},I=A,D=Object(h["a"])(I,r,s,!1,null,null,null);t["a"]=D.exports},db3f:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".gradient-box.plain[data-v-42940dc4]{border:1px solid var(--border)}",""]),e.exports=t},dcdc:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,".graph-options[data-v-b7bcaa58],.graph-options .range-refresh[data-v-b7bcaa58]{display:flex;flex-direction:row;justify-content:flex-end}.graph-options[data-v-b7bcaa58]{justify-content:space-between;align-items:center}.graph-options .labeled-select[data-v-b7bcaa58]{width:100px;margin-left:10px}",""]),e.exports=t},ec0b:function(e,t,a){"use strict";a("9648")},f9f6:function(e,t,a){var r=a("dcdc");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("51569b1b",r,!0,{sourceMap:!1,shadowMode:!1})},facb:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,"svg.text[data-v-5f78e642]{fill:red}",""]),e.exports=t}}]);
//# sourceMappingURL=kubewarden-1.2.0.umd.min.vendors~detail.js.map