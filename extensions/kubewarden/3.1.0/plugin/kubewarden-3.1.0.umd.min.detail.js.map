{"version":3,"file":"kubewarden-3.1.0.umd.min.detail.js","mappings":"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","sources":["webpack://kubewarden-3.1.0/./utils/service.ts","webpack://kubewarden-3.1.0/./modules/jaegerTracing.ts","webpack://kubewarden-3.1.0/./components/MetricsTab.vue","webpack://kubewarden-3.1.0/./modules/grafana.ts","webpack://kubewarden-3.1.0/./modules/metricsConfig.ts","webpack://kubewarden-3.1.0/./components/MetricsChecklist.vue","webpack://kubewarden-3.1.0/./components/MetricsChecklist.vue?f4a7","webpack://kubewarden-3.1.0/./components/MetricsTab.vue?8408","webpack://kubewarden-3.1.0/./components/Policies/PolicyDetail.vue","webpack://kubewarden-3.1.0/./components/RulesTable.vue","webpack://kubewarden-3.1.0/./components/RulesTable.vue?2417","webpack://kubewarden-3.1.0/./components/Policies/PolicyDetail.vue?9b92","webpack://kubewarden-3.1.0/./components/TraceTable.vue","webpack://kubewarden-3.1.0/./utils/duration-format.ts","webpack://kubewarden-3.1.0/./components/TraceChecklist.vue","webpack://kubewarden-3.1.0/./components/TraceChecklist.vue?29ce","webpack://kubewarden-3.1.0/./components/TraceTable.vue?a3c0","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.admissionpolicy.vue?483c","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.clusteradmissionpolicy.vue?6ad6","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.policyserver.vue?8e86","webpack://kubewarden-3.1.0/./components/MetricsChecklist.vue?465f","webpack://kubewarden-3.1.0/./components/TraceChecklist.vue?6f44","webpack://kubewarden-3.1.0/./components/TraceTable.vue?eed5","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.policyserver.vue?0fab","webpack://kubewarden-3.1.0/./components/MetricsChecklist.vue?25a7","webpack://kubewarden-3.1.0/./components/TraceChecklist.vue?9128","webpack://kubewarden-3.1.0/./components/TraceTable.vue?f2f5","webpack://kubewarden-3.1.0/./detail/policies.kubewarden.io.policyserver.vue?d5ba","webpack://kubewarden-3.1.0/./assets/ lazy ^\\.\\/.*\\.json$ chunkName: policyDashboard namespace object"],"sourcesContent":["export function proxyUrl(service: any, port: number): string {\n  const view: string = service?.links['view'];\n  const idx: number = view.lastIndexOf(`/`);\n\n  return proxyUrlFromBase(view.slice(0, idx), 'http', service?.metadata.name, port);\n}\n\nexport function proxyUrlFromBase(base: string, scheme: string, name: string, port: number, path?: any): string {\n  const schemaNamePort = (scheme ? `${ encodeURIComponent(scheme) }:` : '') + encodeURIComponent(name) + (port ? `:${ encodeURIComponent(port) }` : '');\n\n  const cleanPath = `/${ (path || '').replace(/^\\/+/g, '') }`;\n  const cleanBase = base.replace(/\\/+$/g, '');\n\n  const out = `${ cleanBase }/${ schemaNamePort }/proxy${ cleanPath }`;\n\n  return out;\n}\n","import isEmpty from 'lodash/isEmpty';\n\nimport {\n  KUBEWARDEN, JaegerConfig, PolicyTrace, PolicyTraceConfig, Tag\n} from '../types';\nimport { proxyUrl } from '../utils/service';\n\n/** TODO: Update the `any` types throughout this file */\n\n/**\n * Fetches trace reports from Jaeger for each related policy or singular policy.\n * @param config `JaegerConfig` | Contains the `store`, `jaegerQueryService`, `resource` (policy-server or policy type),\n * `relatedPolicies?` needed for policy server, `policy?` for individual policies, `time?` for trace timeframe.\n * @returns `PolicyTraceConfig | null` | A scaffold object which contains the policy name, cluster id, and traces for the policy.\n */\nexport async function jaegerTraces(config: JaegerConfig): Promise<PolicyTraceConfig | null> {\n  const {\n    store, queryService, resource, relatedPolicies, policy, time\n  } = config;\n\n  try {\n    const proxy = proxyUrl(queryService, 16686);\n\n    const promises = [];\n\n    if ( !isEmpty(relatedPolicies) ) {\n      relatedPolicies?.forEach((p: any) => {\n        const hash = jaegerTraceRequest(store, proxy, p, time);\n\n        if ( hash ) {\n          promises.push(hash);\n        }\n      });\n    } else if ( policy ) {\n      promises.push(jaegerTraceRequest(store, proxy, policy, time));\n    } else {\n      throw new Error('Policy is undefined');\n    }\n\n    let res = await Promise.all(promises);\n\n    res = res.flatMap(o => o?.data);\n\n    return scaffoldPolicyTrace(store, res, resource, relatedPolicies, policy);\n  } catch (e) {\n    console.warn(`Error fetching Jaeger traces: ${ e }`); // eslint-disable-line no-console\n  }\n\n  return null;\n}\n\nexport function jaegerPolicyName(policy: any) {\n  let out = null;\n\n  switch (policy?.kind) {\n  case 'ClusterAdmissionPolicy':\n    out = `clusterwide-${ policy?.metadata?.name }`;\n    break;\n\n  case 'AdmissionPolicy':\n    out = `namespaced-${ policy?.metadata?.namespace }-${ policy?.metadata?.name }`;\n    break;\n\n  default:\n    break;\n  }\n\n  return out;\n}\n\nfunction jaegerTraceRequest(store: any, proxyUrl: any, policy: any, time?: any) {\n  let apiPath = null;\n\n  const name = jaegerPolicyName(policy);\n  const lookbackTime = time || '2d';\n\n  const options = `lookback=${ lookbackTime }&tags={\"policy_id\"%3A\"${ name }\"}`;\n\n  // The service `kubewarden-policy-server` is **not** a k8s Service\n  apiPath = `api/traces?service=kubewarden-policy-server&operation=validation&${ options }`;\n  const JAEGER_PATH = `${ proxyUrl + apiPath }`;\n\n  return store.dispatch('cluster/request', { url: JAEGER_PATH });\n}\n\nfunction scaffoldPolicyTrace(store: any, traces: any, resource: any, relatedPolicies: any, policy: any): any {\n  const currentCluster = store.getters['currentCluster'];\n  const out = [];\n\n  function filterTraces(p: any) {\n    const policyName = jaegerPolicyName(p);\n\n    return traces.reduce((acc: any, trace: any): PolicyTrace[] => {\n      let out = {};\n\n      const validationSpan = trace.spans.find((span: any) => span.operationName === 'validation');\n      const matchedTag = validationSpan?.tags?.find((tag: any) => tag?.key === 'policy_id' && tag?.value === policyName);\n\n      if ( matchedTag ) {\n        const convertedTags = convertTagsToObject(validationSpan.tags);\n\n        out = {\n          id:              trace.traceID,\n          allowed:         convertedTags.allowed,\n          mode:            p.spec.mode,\n          name:            convertedTags.name,\n          operation:       convertedTags.operation,\n          kind:            convertedTags.kind,\n          namespace:       convertedTags.namespace || null,\n          startTime:       validationSpan.startTime,\n          duration:        validationSpan.duration,\n          responseMessage: convertedTags.response_message,\n          responseCode:    convertedTags.response_code,\n          mutated:         convertedTags.mutated\n        };\n      }\n\n      if ( !isEmpty(out) ) {\n        acc.push(out);\n        store.dispatch('kubewarden/updatePolicyTraces', {\n          policyName:   p.metadata.name,\n          cluster:      currentCluster?.id,\n          updatedTrace: out\n        });\n      }\n\n      return acc;\n    }, []);\n  }\n\n  if ( resource === KUBEWARDEN.POLICY_SERVER ) {\n    for ( const relatedPolicy of relatedPolicies ) {\n      const relatedTraces = filterTraces(relatedPolicy);\n\n      if ( !isEmpty(relatedTraces) ) {\n        out.push({\n          policyName: relatedPolicy.metadata.name,\n          cluster:    currentCluster?.id,\n          traces:     relatedTraces\n        });\n      }\n    }\n  } else {\n    const relatedTraces = filterTraces(policy);\n\n    if ( !isEmpty(relatedTraces) ) {\n      out.push({\n        policyName: policy.metadata.name,\n        cluster:    currentCluster?.id,\n        traces:     relatedTraces\n      });\n    }\n  }\n\n  return out;\n}\n\nexport function convertTagsToObject(arr: Tag[]): Record<string, string | number | boolean> {\n  const result: Record<string, string | number | boolean> = {};\n\n  for (const item of arr) {\n    switch (item.type) {\n    case 'string':\n      result[item.key] = item.value as string;\n      break;\n    case 'int64':\n      result[item.key] = parseInt(item.value as string, 10);\n      break;\n    case 'float64':\n      result[item.key] = parseFloat(item.value as string);\n      break;\n    case 'bool':\n      result[item.key] = item.value === 'true';\n      break;\n    default:\n      result[item.key] = item.value;\n    }\n  }\n\n  return result;\n}\n","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\nimport debounce from 'lodash/debounce';\nimport semver from 'semver';\n\nimport {\n  CATALOG, CONFIG_MAP, MONITORING, NAMESPACE, SERVICE\n} from '@shell/config/types';\nimport { KUBERNETES } from '@shell/config/labels-annotations';\nimport { dashboardExists } from '@shell/utils/grafana';\nimport { monitoringStatus } from '@shell/utils/monitoring';\nimport { allHash } from '@shell/utils/promise';\nimport ResourceFetch from '@shell/mixins/resource-fetch';\n\nimport DashboardMetrics from '@shell/components/DashboardMetrics';\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\n\nimport { KUBEWARDEN, KUBEWARDEN_CHARTS, KubewardenDashboardLabels, KubewardenDashboards } from '../types';\nimport { handleGrowl } from '../utils/handle-growl';\nimport { refreshCharts } from '../utils/chart';\nimport { grafanaProxy } from '../modules/grafana';\nimport { findServiceMonitor } from '../modules/metricsConfig';\nimport { jaegerPolicyName } from '../modules/jaegerTracing';\n\nimport MetricsChecklist from './MetricsChecklist';\n\nexport default {\n  props: {\n    active: {\n      type:    Boolean,\n      default: null\n    },\n    resource: {\n      type:    String,\n      default: null\n    },\n    policyObj: {\n      type:    Object,\n      default: null\n    },\n    policyServerObj: {\n      type:    Object,\n      default: null\n    }\n  },\n\n  components: {\n    Banner, DashboardMetrics, Loading, MetricsChecklist\n  },\n\n  mixins: [ResourceFetch],\n\n  async fetch() {\n    this.debouncedRefreshCharts = debounce((init = false) => {\n      refreshCharts({\n        store: this.$store, chartName: 'rancher-monitoring', init\n      });\n    }, 500);\n\n    const resourceMap = [\n      {\n        name:     CATALOG.APP,\n        property: this.allApps\n      },\n      {\n        name:     CATALOG.CLUSTER_REPO,\n        property: this.allRepos\n      },\n      {\n        name:     CONFIG_MAP,\n        property: this.allConfigMaps\n      },\n      {\n        name:     KUBEWARDEN.POLICY_SERVER,\n        property: this.allPolicyServers\n      },\n      {\n        name:     MONITORING.SERVICEMONITOR,\n        property: this.allServiceMonitors\n      },\n      {\n        name:     NAMESPACE,\n        property: this.allNamespaces\n      },\n      {\n        name:     SERVICE,\n        property: this.allServices\n      },\n    ];\n    const hash = [];\n\n    // Check if the resources are already stored with their respective getters before fetching\n    for ( const resource of resourceMap ) {\n      if ( isEmpty(resource.property) && this.$store.getters['cluster/canList'](resource.name) ) {\n        hash.push(this.$fetchType(resource.name));\n      }\n    }\n\n    await allHash(hash);\n\n    if ( this.showChecklist && !this.monitoringChart ) {\n      this.debouncedRefreshCharts(true);\n    }\n\n    // If monitoring is installed look for the dashboard based on the METRICS_TYPE\n    if ( this.monitoringStatus.installed ) {\n      try {\n        this.metricsProxy = await grafanaProxy({ store: this.$store, type: this.METRICS_TYPE });\n\n        if ( this.metricsProxy ) {\n          this.metricsService = await dashboardExists('v2', this.$store, this.currentCluster?.id, this.metricsProxy);\n        }\n      } catch (e) {\n        const error = {\n          _statusText: 'Error',\n          message:     `Error fetching Grafana Service: ${ e }`\n        };\n\n        handleGrowl({ error, store: this.$store });\n      }\n    }\n\n    if (this.controllerApp) {\n      await this.controllerApp.fetchValues(true)\n    }\n  },\n\n  data() {\n    const METRICS_TYPE = this.resource === KUBEWARDEN.POLICY_SERVER ? KubewardenDashboards.POLICY_SERVER : KubewardenDashboards.POLICY;\n\n    return {\n      METRICS_TYPE,\n\n      [CATALOG.APP]:               null,\n      [CATALOG.CLUSTER_REPO]:      null,\n      [CONFIG_MAP]:                null,\n      [MONITORING.SERVICEMONITOR]: null,\n      [SERVICE]:                   null,\n      metricsProxy:                null,\n      metricsService:              null,\n      debouncedRefreshCharts:      null,\n      outdatedTelemetrySpec:       false,\n      unsupportedTelemetrySpec:    false,\n    };\n  },\n\n  watch: {\n    async grafanaService() {\n      if ( !this.metricsProxy ) {\n        this.metricsProxy = await grafanaProxy({ store: this.$store, type: this.METRICS_TYPE });\n\n        if ( this.metricsProxy ) {\n          this.metricsService = await dashboardExists('v2', this.$store, this.currentCluster?.id, this.metricsProxy);\n        }\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster', 'productId']),\n    ...mapGetters({ charts: 'catalog/charts' }),\n    ...monitoringStatus(),\n\n    policyName() {\n      return jaegerPolicyName(this.policyObj);\n    },\n\n    allApps() {\n      return this.$store.getters['cluster/all'](CATALOG.APP);\n    },\n\n    allRepos() {\n      return this.$store.getters['cluster/all'](CATALOG.CLUSTER_REPO);\n    },\n\n    allConfigMaps() {\n      return this.$store.getters['cluster/all'](CONFIG_MAP);\n    },\n\n    allNamespaces() {\n      return this.$store.getters['cluster/all'](NAMESPACE);\n    },\n\n    allPolicyServers() {\n      return this.$store.getters['cluster/all'](KUBEWARDEN.POLICY_SERVER);\n    },\n\n    allServiceMonitors() {\n      return this.$store.getters['cluster/all'](MONITORING.SERVICEMONITOR);\n    },\n\n    allServices() {\n      return this.$store.getters['cluster/all'](SERVICE);\n    },\n\n    cattleDashboardNs() {\n      return this.allNamespaces?.find(ns => ns?.metadata?.name === 'cattle-dashboards');\n    },\n\n    conflictingGrafanaDashboards() {\n      return this.allConfigMaps?.filter((configMap) => {\n        const name = configMap?.metadata?.name;\n\n        if ( name ) {\n          return name === KubewardenDashboards.POLICY_SERVER || name === KubewardenDashboards.POLICY;\n        }\n      });\n    },\n\n    controllerApp() {\n      return this.allApps?.find(app => app?.spec?.chart?.metadata?.name === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    controllerChart() {\n      return this.charts?.find(chart => chart.chartName === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    grafanaService() {\n      const monitoringServices = this.allServices?.filter(svc => svc?.metadata?.labels?.['app.kubernetes.io/instance'] === 'rancher-monitoring');\n\n      return monitoringServices?.find(svc => svc?.metadata?.labels?.['app.kubernetes.io/name'] === 'grafana');\n    },\n\n    kubewardenGrafanaDashboards() {\n      return this.allConfigMaps?.filter(configMap => configMap?.metadata?.labels?.[KubewardenDashboardLabels.DASHBOARD]);\n    },\n\n    kubewardenServiceMonitor() {\n      return findServiceMonitor({\n        policyObj:          this.policyObj,\n        policyServerObj:    this.policyServerObj,\n        controllerNs:       this.controllerApp?.metadata?.namespace,\n        allServiceMonitors: this.allServiceMonitors\n      });\n    },\n\n    metricsConfiguration() {\n      if (!this.controllerApp) {\n        console.log('# 0')\n        return null;\n      }\n\n      const version = this.controllerApp?.spec?.chart?.metadata?.version;\n      const telemetry = this.controllerApp?.values?.telemetry;\n\n      if (semver.gte(version, '4.0.0-0')) {\n        // In version 4+, telemetry.metrics should be boolean or undefined (treated as false).\n        // sidecar.metrics is only meaningful if telemetry.metrics === true.\n        const metricsIsUndefinedOrBoolean = telemetry?.metrics === undefined || typeof telemetry?.metrics === 'boolean';\n        \n        // Check for unsupported 'custom' mode\n        if (telemetry?.mode === 'custom') {\n          this.unsupportedTelemetrySpec = true;\n\n          return null;\n        }\n\n        // If metrics is not undefined or boolean, it's outdated\n        if (!metricsIsUndefinedOrBoolean) {\n          this.outdatedTelemetrySpec = true;\n\n          return null;\n        }\n\n        // If telemetry.metrics is undefined or false, treat it as false.\n        // sidecar config is irrelevant in that case, and not considered outdated.\n        if (telemetry?.metrics !== true) {\n          // metrics is off, no sidecar config needed\n          return null;\n        }\n\n        // If we get here, telemetry.metrics === true and portIsDefined === true\n        return telemetry?.metrics;\n      } else {\n        // Old schema: just return telemetry.metrics.enabled\n        return telemetry?.metrics?.enabled;\n      }\n    },\n\n    monitoringApp() {\n      return this.allApps?.find(app => app?.spec?.chart?.metadata?.name === 'rancher-monitoring');\n    },\n\n    monitoringChart() {\n      return this.charts?.find(chart => chart.chartName === 'rancher-monitoring');\n    },\n\n    openTelemetryServices() {\n      if ( this.allServices ) {\n        return this.allServices.filter(svc => svc?.metadata?.labels?.[KUBERNETES.MANAGED_NAME] === 'opentelemetry-operator');\n      }\n\n      return null;\n    },\n\n    openTelSvc() {\n      if ( !isEmpty(this.openTelemetryServices) ) {\n        return this.openTelemetryServices.find((svc) => {\n          const ports = svc?.spec?.ports;\n\n          if ( ports.length ) {\n            return ports.find(p => p.port === 8080);\n          }\n        });\n      }\n\n      return null;\n    },\n\n    policyServerSvcs() {\n      if ( !isEmpty(this.allPolicyServers) ) {\n        const policyServerNames = this.allPolicyServers.map(ps => ps?.metadata?.name);\n        const out = [];\n\n        for ( const ps of policyServerNames ) {\n          out.push(this.allServices?.find(svc => svc?.metadata?.labels?.app === `kubewarden-policy-server-${ ps }`));\n        }\n\n        return out;\n      }\n\n      return null;\n    },\n\n    showChecklist() {\n      const grafanaDashboardsInstalled = !isEmpty(this.kubewardenGrafanaDashboards);\n\n      return !this.openTelSvc || !this.monitoringApp || !this.kubewardenServiceMonitor || !this.metricsConfiguration || !grafanaDashboardsInstalled;\n    }\n  },\n\n  methods: {\n    async updateServiceMonitors() {\n      await this.$fetchType(MONITORING.SERVICEMONITOR);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" mode=\"relative\" />\n  <div v-else>\n    <MetricsChecklist\n      v-if=\"showChecklist\"\n      :cattle-dashboard-ns=\"cattleDashboardNs\"\n      :conflicting-grafana-dashboards=\"conflictingGrafanaDashboards\"\n      :controller-app=\"controllerApp\"\n      :controller-chart=\"controllerChart\"\n      :kubewarden-service-monitor=\"kubewardenServiceMonitor\"\n      :kubewarden-dashboards=\"kubewardenGrafanaDashboards\"\n      :metrics-configuration=\"metricsConfiguration\"\n      :monitoring-app=\"monitoringApp\"\n      :monitoring-chart=\"monitoringChart\"\n      :open-tel-svc=\"openTelSvc\"\n      :policy-obj=\"policyObj\"\n      :policy-server-obj=\"policyServerObj\"\n      :outdated-telemetry-spec=\"outdatedTelemetrySpec\"\n      :unsupported-telemetry-spec=\"unsupportedTelemetrySpec\"\n      @updateServiceMonitors=\"updateServiceMonitors\"\n    />\n\n    <template v-if=\"!showChecklist\">\n      <Banner\n        v-if=\"monitoringApp && !metricsProxy\"\n        color=\"error\"\n        :label=\"t('kubewarden.monitoring.warning.noProxy')\"\n      />\n      <DashboardMetrics\n        v-if=\"metricsProxy && active\"\n        data-testid=\"kw-ps-metrics-dashboard\"\n        :detail-url=\"metricsProxy\"\n        :summary-url=\"metricsProxy\"\n        :vars=\"{'policy_name': policyName}\"\n        graph-height=\"825px\"\n      />\n    </template>\n  </div>\n</template>","import isEmpty from 'lodash/isEmpty';\n\nimport { CONFIG_MAP, SERVICE } from '@shell/config/types';\n\nimport {\n  CatalogApp,\n  KubewardenDashboards,\n  KubewardenDashboardLabels,\n  GrafanaDashboardLabels,\n  GrafanaDashboardAnnotations,\n  HelmAnnotations\n} from '../types';\nimport { handleGrowl, GrowlConfig } from '../utils/handle-growl';\n\ninterface MetricsConfig {\n  store: any,\n  type: string\n}\n\ninterface DashboardConfig {\n  store: any,\n  monitoringApp: CatalogApp,\n  controllerApp: CatalogApp\n}\n\nexport async function grafanaProxy(config: MetricsConfig): Promise<any> {\n  const { store, type } = config;\n\n  try {\n    const grafana = await grafanaService(store);\n\n    if ( !isEmpty(grafana) ) {\n      const base = `/api/v1/namespaces/${ grafana.metadata.namespace }/services`;\n      const proxy = `/http:${ grafana.metadata.name }:80/proxy`;\n      const path = `/d/${ type }?orgId=1&kiosk`;\n\n      return base + proxy + path;\n    }\n  } catch (e) {\n    handleGrowl({\n      error: e as GrowlConfig | any, store, type: 'warning'\n    });\n  }\n\n  return null;\n}\n\nexport async function grafanaService(store: any) {\n  try {\n    return await store.dispatch('cluster/find', {\n      type: SERVICE,\n      id:   'cattle-monitoring-system/rancher-monitoring-grafana'\n    }, { root: true });\n  } catch (e) {\n    handleGrowl({\n      error: e as GrowlConfig | any, store, type: 'warning'\n    });\n  }\n}\n\nexport async function findKubewardenDashboards(store: any) {\n  try {\n    return await store.dispatch('cluster/findMatching', {\n      type:     CONFIG_MAP,\n      selector: `kubewarden/part-of=cattle-kubewarden-system`\n    });\n  } catch (e) {\n    handleGrowl({\n      error: e as GrowlConfig | any, store, type: 'warning'\n    });\n  }\n}\n\n/**\n   * Creates a ConfigMap for the Grafana dashboard depending on the type supplied\n   * @param `store, type` | Type of resource ( PolicyServer || (Cluster)AdmissionPolicy )\n   */\nexport async function addKubewardenDashboards(config: DashboardConfig): Promise<void> {\n  const { store, monitoringApp, controllerApp } = config;\n\n  if ( monitoringApp && controllerApp ) {\n    /**\n     * There are 2 dashboards for Kubewarden:\n     * PolicyServer is the default one copied from https://grafana.com/grafana/dashboards/15314-kubewarden/\n     * Policies have a condensed version\n    */\n    const dashboardEnums = Object.values(KubewardenDashboards);\n\n    for ( const type of dashboardEnums ) {\n      const file = await import(/* webpackChunkName: \"policyDashboard\" */ `../assets/${ type }.json`);\n      const fileKey = `${ type }.json`;\n\n      /** Check for existing configmaps */\n      const existing = await findKubewardenDashboards(store);\n\n      if ( existing && existing?.metadata?.name === type ) {\n        return;\n      }\n\n      const labels: GrafanaDashboardLabels = {\n        [KubewardenDashboardLabels.DASHBOARD]:         type,\n        [KubewardenDashboardLabels.PART_OF]:           controllerApp.metadata.namespace,\n        [KubewardenDashboardLabels.APP]:               'rancher-monitoring-grafana',\n        [KubewardenDashboardLabels.GRAFANA_DASHBOARD]: '1',\n        'app.kubernetes.io/instance':                  monitoringApp.metadata.name\n      };\n\n      const annotations: GrafanaDashboardAnnotations = {\n        [HelmAnnotations.NAME]:      monitoringApp.metadata.name,\n        [HelmAnnotations.NAMESPACE]: monitoringApp.metadata.namespace\n      };\n\n      const configMapTemplate = await store.dispatch(\n        'cluster/create',\n        {\n          type:     CONFIG_MAP,\n          metadata: {\n            annotations,\n            labels,\n            name:        type,\n            namespace:   'cattle-dashboards',\n          },\n          data: { [fileKey]: JSON.stringify(file) },\n        }\n      );\n\n      try {\n        await configMapTemplate.save();\n      } catch (e) {\n        handleGrowl({ error: e as GrowlConfig | any, store });\n      }\n    }\n  }\n}","import isEmpty from 'lodash/isEmpty';\nimport { MONITORING } from '@shell/config/types';\n\nimport { CatalogApp, Service, ServiceMonitor, ServiceMonitorSpec } from '../types';\nimport { handleGrowl, GrowlConfig } from '../utils/handle-growl';\n\ntype ServiceMonitorConfigured = {\n  namespace: boolean,\n  selectors?: {[key: string]: boolean}[];\n}\n\ninterface MonitoringConfig {\n  serviceMonitorSpec: ServiceMonitorSpec[],\n  controllerApp: CatalogApp,\n  policyServerSvcs: Service[]\n}\n\ninterface ServiceMonitorConfig {\n  store: any,\n  policyObj?: any,\n  policyServerObj?: any,\n  controllerNs: string,\n  allServiceMonitors?: ServiceMonitor[]\n  serviceMonitor?: ServiceMonitor\n}\n\n/**\n * Determines if the Monitoring App is configured correctly with the namespace and label selectors for\n * the Kubewarden controller and policy servers.\n * @param config `serviceMonitorSpec, controllerApp, policyServerSvcs` | Needs monitoring app service monitor spec,\n * kubewarden controller app, and the policy server services.\n * @returns `boolean` | `true` if configured correctly\n */\nexport function monitoringIsConfigured(config: MonitoringConfig): boolean {\n  const configured = serviceMonitorsConfigured(config);\n\n  if ( Array.isArray(configured) ) {\n    return configured?.some((c: ServiceMonitorConfigured) => {\n      const selectorsConfigured = !isEmpty(c?.selectors) && c?.selectors?.some((selector) => {\n        for (const key in selector) {\n          if ( selector[key] && selector[key] === true ) {\n            return true;\n          }\n        }\n\n        return false;\n      });\n\n      return c.namespace && selectorsConfigured;\n    });\n  }\n\n  return false;\n}\n\n/**\n * Searchs for matching `namespaceSelector` and `matchLabels` selector between `serviceMonitorSpec`, `controllerApp`, and `policyServerSvcs`\n * @param config `serviceMonitorSpec, controllerApp, policyServerSvcs` | Needs monitoring app service monitor spec,\n * kubewarden controller app, and the policy server services.\n * @returns `ServiceMonitorConfigured[] | boolean` | If `serviceMonitorSpec` is provided, will return a `ServiceMonitorConfigured` object\n * which contains a `namespace` boolean for a match and selectors[] for `matchLabels`\n */\nexport function serviceMonitorsConfigured(config: MonitoringConfig): ServiceMonitorConfigured[] | boolean {\n  const { serviceMonitorSpec, controllerApp, policyServerSvcs } = config;\n\n  if ( serviceMonitorSpec ) {\n    return serviceMonitorSpec?.map((sm) => {\n      const configured: ServiceMonitorConfigured = {\n        namespace: false,\n        selectors: []\n      };\n\n      /** Find a matching namespaceSelector to the controllerApp */\n      if ( !isEmpty(controllerApp) ) {\n        const hasNamespace: boolean = sm.namespaceSelector?.matchNames?.includes(controllerApp?.metadata?.namespace) || false;\n\n        configured.namespace = hasNamespace;\n      }\n\n      /** Find matching label selectors for policy server services */\n      if ( !isEmpty(policyServerSvcs) ) {\n        policyServerSvcs.forEach((svc) => {\n          if ( sm.selector?.matchLabels ) {\n            for ( const key of Object.keys(sm.selector.matchLabels) ) {\n              const hasLabel = svc?.metadata?.labels?.[key] && svc.metadata.labels[key] === sm.selector.matchLabels[key];\n\n              configured?.selectors?.push({ [key]: !!hasLabel });\n            }\n          }\n        });\n      }\n\n      return configured;\n    });\n  }\n\n  return false;\n}\n\n/**\n * Searches provided ServiceMonitors for a matching resource based on the `selector.matchLabels` including:\n * `app=kubewarden-policy-server-<policy-server-id>`\n * @param config: `policyObj?, policyServerObj?, allServiceMonitors` | Needs either a policy object or policy server object with all fetched\n * ServiceMonitors\n * @returns `ServiceMonitor | void`\n */\nexport function findServiceMonitor(config: ServiceMonitorConfig): ServiceMonitor | void {\n  const { policyObj, policyServerObj, allServiceMonitors } = config;\n\n  if ( !isEmpty(allServiceMonitors) ) {\n    const smName: string = policyObj ? policyObj.spec?.policyServer : policyServerObj?.id;\n\n    return allServiceMonitors?.find(sm => sm?.spec?.selector?.matchLabels?.['app'] === `kubewarden-policy-server-${ smName }`);\n  }\n}\n\n/**\n * Creates a Service Monitor for a PolicyServer when provided either a PS or a policy\n * @param config: `store, policyObj?, policyServerObj?, controllerNs` | Needs kubewarden-controller app namespace, either a policy server or policy.\n */\nexport async function addKubewardenServiceMonitor(config: ServiceMonitorConfig): Promise<void> {\n  const {\n    store, policyObj, policyServerObj, controllerNs, serviceMonitor\n  } = config;\n\n  if ( store.getters['cluster/schemaFor'](MONITORING.SERVICEMONITOR) ) {\n    const smName: string = policyObj ? policyObj.spec?.policyServer : policyServerObj?.id;\n\n    const serviceMonitorTemplate: ServiceMonitor = {\n      kind:     'ServiceMonitor',\n      type:     MONITORING.SERVICEMONITOR,\n      metadata: {\n        name:        smName,\n        namespace:   controllerNs\n      },\n      spec: {\n        endpoints:         [{ interval: '10s', port: 'metrics' }],\n        namespaceSelector: { matchNames: [controllerNs] },\n        selector:          { matchLabels: { app: `kubewarden-policy-server-${ smName }` } }\n      }\n    };\n\n    if ( !serviceMonitor ) {\n      const serviceMonitorObj = await store.dispatch(\n        'cluster/create',\n        serviceMonitorTemplate\n      );\n\n      try {\n        await serviceMonitorObj.save();\n      } catch (e) {\n        handleGrowl({ error: e as GrowlConfig | any, store });\n      }\n    }\n  }\n}","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { CATALOG } from '@shell/config/labels-annotations';\n\nimport {\n  REPO_TYPE, REPO, CHART, NAME, VERSION, NAMESPACE\n} from '@shell/config/query-params';\n\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { Banner } from '@components/Banner';\n\nimport { handleGrowl } from '../utils/handle-growl';\nimport { addKubewardenDashboards } from '../modules/grafana';\nimport { addKubewardenServiceMonitor } from '../modules/metricsConfig';\n\nexport default {\n  props: {\n    cattleDashboardNs: {\n      type:    Object,\n      default: null\n    },\n    conflictingGrafanaDashboards: {\n      type:    Array,\n      default: null\n    },\n    controllerApp: {\n      type:    Object,\n      default: null\n    },\n    controllerChart: {\n      type:    Object,\n      default: null\n    },\n    kubewardenServiceMonitor: {\n      type:    Object,\n      default: null\n    },\n    kubewardenDashboards: {\n      type:    Array,\n      default: null\n    },\n    metricsConfiguration: {\n      type:    Object,\n      default: null\n    },\n    monitoringApp: {\n      type:    Object,\n      default: null\n    },\n    monitoringChart: {\n      type:    Object,\n      default: null\n    },\n    openTelSvc: {\n      type:    Object,\n      default: null\n    },\n    policyObj: {\n      type:    Object,\n      default: null\n    },\n    policyServerObj: {\n      type:    Object,\n      default: null\n    },\n    outdatedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    },\n    unsupportedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  components: { AsyncButton, Banner },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters({ t: 'i18n/t' }),\n\n    controllerLinkDisabled() {\n      return (!this.openTelSvc || !this.monitoringApp || !this.hasKubewardenDashboards || !this.controllerChart || !this.controllerApp);\n    },\n\n    controllerLinkTooltip() {\n      if ( this.controllerLinkDisabled ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.prerequisites');\n      }\n\n      if ( !this.controllerChart ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.chartError', { chart: 'Kubewarden Controller' }, true);\n      }\n\n      return null;\n    },\n\n    dashboardsTooltip() {\n      if ( !this.monitoringApp ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.appNotInstalled', { app: 'Rancher Monitoring' }, true);\n      }\n\n      if ( this.monitoringApp && isEmpty(this.cattleDashboardNs) ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.nsNotFound');\n      }\n\n      return null;\n    },\n\n    dashboardButtonDisabled() {\n      return (!this.monitoringApp ||\n              isEmpty(this.cattleDashboardNs) ||\n              (!this.hasKubewardenDashboards && !!this.conflictingGrafanaDashboards.length)\n      );\n    },\n\n    hasKubewardenDashboards() {\n      return !isEmpty(this.kubewardenDashboards);\n    },\n\n    monitoringChartLink() {\n      if ( !this.monitoringApp ) {\n        return this.t('kubewarden.monitoring.prerequisites.monitoringApp.install');\n      }\n\n      return this.t('kubewarden.monitoring.prerequisites.monitoringApp.edit');\n    },\n\n    monitoringLinkTooltip() {\n      if ( !this.monitoringChart ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.chartError', { chart: 'Rancher Monitoring' }, true);\n      }\n\n      return null;\n    },\n\n    serviceMonitorButtonDisabled() {\n      return (!this.controllerApp || !this.monitoringApp);\n    },\n\n    serviceMonitorsTooltip() {\n      if ( !this.monitoringApp ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.prerequisites');\n      }\n\n      if ( !this.kubewardenServiceMonitor && this.controllerApp ) {\n        return this.t(\n          'kubewarden.monitoring.prerequisites.tooltips.monitorsNotFound',\n          { namespace: this.controllerApp.metadata?.namespace },\n          true\n        );\n      }\n\n      return null;\n    },\n\n    showConflictingDashboardsBanner() {\n      return !this.hasKubewardenDashboards && !isEmpty(this.conflictingGrafanaDashboards);\n    }\n  },\n\n  methods: {\n    async addDashboards(btnCb) {\n      try {\n        await addKubewardenDashboards({\n          store:         this.$store,\n          monitoringApp: this.monitoringApp,\n          controllerApp: this.controllerApp\n        });\n        btnCb(true);\n      } catch (e) {\n        handleGrowl({ error: e, store: this.$store });\n        btnCb(false);\n      }\n    },\n\n    async addServiceMonitor(btnCb) {\n      try {\n        await addKubewardenServiceMonitor({\n          store:           this.$store,\n          policyObj:       this.policyObj,\n          policyServerObj: this.policyServerObj,\n          controllerNs:    this.controllerApp?.metadata?.namespace,\n          serviceMonitor:  this.kubewardenServiceMonitor\n        });\n        this.$emit('updateServiceMonitors');\n        btnCb(true);\n      } catch (e) {\n        handleGrowl({ error: e, store: this.$store });\n        btnCb(false);\n      }\n    },\n\n    badgeIcon(prop) {\n      if ( Array.isArray(prop) ) {\n        const emptyProp = isEmpty(prop);\n\n        return {\n          'icon-dot-open': emptyProp, 'icon-checkmark': !emptyProp, 'text-success': !emptyProp\n        };\n      }\n\n      return {\n        'icon-dot-open': !prop, 'icon-checkmark': prop, 'text-success': prop\n      };\n    },\n\n    monitoringAppRoute() {\n      if ( !this.monitoringApp && this.monitoringChart ) {\n        this.monitoringChart.goToInstall();\n      }\n\n      if ( this.monitoringApp ) {\n        const query = {\n          [NAMESPACE]: this.monitoringApp.metadata?.namespace,\n          [NAME]:      this.monitoringApp.metadata?.name,\n          [VERSION]:   this.monitoringApp.spec?.chart?.metadata?.version,\n          [REPO]:      this.monitoringApp.spec?.chart?.metadata?.annotations?.[CATALOG.SOURCE_REPO_NAME],\n          [REPO_TYPE]: this.monitoringApp.spec?.chart?.metadata?.annotations?.[CATALOG.SOURCE_REPO_TYPE],\n          [CHART]:     this.monitoringApp.spec?.chart?.metadata?.name\n        };\n\n        this.$router.push({\n          name:   'c-cluster-apps-charts-install',\n          params: { cluster: this.currentCluster?.id || '_' },\n          query,\n        });\n      }\n    },\n\n    controllerAppRoute() {\n      if ( this.controllerApp ) {\n        const metadata = this.controllerApp.spec?.chart?.metadata;\n\n        const query = {\n          [NAMESPACE]: metadata?.annotations?.[CATALOG.NAMESPACE],\n          [NAME]:      metadata?.annotations?.[CATALOG.RELEASE_NAME],\n          [VERSION]:   metadata?.annotations?.['catalog.cattle.io/upstream-version'],\n          [REPO]:      metadata?.annotations?.[CATALOG.SOURCE_REPO_NAME],\n          [REPO_TYPE]: metadata?.annotations?.[CATALOG.SOURCE_REPO_TYPE],\n          [CHART]:     metadata?.name\n        };\n\n        this.$router.push({\n          name:   'c-cluster-apps-charts-install',\n          params: { cluster: this.currentCluster?.id || '_' },\n          query,\n        });\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"checklist__container\">\n    <div class=\"checklist__prereq mb-20\">\n      <h2>{{ t('kubewarden.monitoring.prerequisites.label') }}</h2>\n      <p>{{ t('kubewarden.monitoring.prerequisites.description') }}</p>\n    </div>\n    <Banner\n      color=\"warning\"\n      :label=\"t('kubewarden.monitoring.prerequisites.warning')\"\n    />\n    <div class=\"mt-20 mb-20\">\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-open-tel\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(openTelSvc)\" />\n        <p v-clean-html=\"t('kubewarden.tracing.openTelemetry', {}, true)\" />\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-monitoring-app\">\n        <i\n          class=\"icon mr-10\"\n          :class=\"badgeIcon(monitoringApp)\"\n        />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.monitoringApp.label', {}, true)\" p />\n          <button\n            v-if=\"!monitoringApp\"\n            v-clean-tooltip=\"monitoringLinkTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-config-button\"\n            class=\"btn role-primary ml-10\"\n            :disabled=\"!monitoringChart\"\n            @click=\"monitoringAppRoute()\"\n          >\n            {{ monitoringChartLink }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-service-monitor-map\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(kubewardenServiceMonitor)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.serviceMonitor.label', {}, true)\" p />\n          <AsyncButton\n            v-if=\"!kubewardenServiceMonitor\"\n            v-clean-tooltip=\"serviceMonitorsTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-service-monitor-button\"\n            mode=\"serviceMonitor\"\n            class=\"ml-10\"\n            :disabled=\"serviceMonitorButtonDisabled\"\n            @click=\"addServiceMonitor\"\n          />\n        </div>\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-config-map\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(hasKubewardenDashboards)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.configMap.label', {}, true)\" p />\n          <AsyncButton\n            v-if=\"!hasKubewardenDashboards\"\n            v-clean-tooltip=\"dashboardsTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-config-map-button\"\n            mode=\"grafanaDashboard\"\n            class=\"ml-10\"\n            :disabled=\"dashboardButtonDisabled\"\n            @click=\"addDashboards\"\n          />\n        </div>\n      </div>\n      <Banner\n        v-if=\"showConflictingDashboardsBanner\"\n        color=\"error\"\n      >\n        <div class=\"conflicting-banner\">\n          <p>\n            {{ t('kubewarden.monitoring.prerequisites.configMap.conflictingDashboardsBanner', { count: conflictingGrafanaDashboards.length }, true) }}\n          </p>\n          <router-link\n            v-for=\"configMap of conflictingGrafanaDashboards\"\n            :key=\"configMap.metadata.name\"\n            :to=\"configMap.detailLocation\"\n            class=\"text-bold\"\n          >\n            {{ configMap.metadata.name }}\n          </router-link>\n        </div>\n      </Banner>\n\n      <!-- Telemetry banners -->\n      <div>\n        <Banner\n          v-if=\"outdatedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.monitoring.prerequisites.outdated')\"\n        />\n        <Banner\n          v-if=\"unsupportedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.monitoring.prerequisites.unsupported')\"\n        />\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-controller-config\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(metricsConfiguration)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.controllerConfig.label', {}, true)\" p />\n          <button\n            v-if=\"!metricsConfiguration\"\n            v-clean-tooltip=\"controllerLinkTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-config-button\"\n            class=\"btn role-primary ml-10\"\n            :disabled=\"controllerLinkDisabled\"\n            @click=\"controllerAppRoute()\"\n          >\n            {{ t(\"kubewarden.monitoring.prerequisites.controllerConfig.button\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.checklist {\n  &__container {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    border: 1px solid var(--border);\n    padding: 10px;\n  }\n\n  &__step, &__config {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  &__step {\n    min-height: 40px;\n  }\n}\n\n.conflicting-banner {\n  display: flex;\n  flex-direction: column;\n}\n</style>","import { render } from \"./MetricsChecklist.vue?vue&type=template&id=d0e7ec94&scoped=true\"\nimport script from \"./MetricsChecklist.vue?vue&type=script&lang=js\"\nexport * from \"./MetricsChecklist.vue?vue&type=script&lang=js\"\n\nimport \"./MetricsChecklist.vue?vue&type=style&index=0&id=d0e7ec94&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d0e7ec94\"]])\n\nexport default __exports__","import { render } from \"./MetricsTab.vue?vue&type=template&id=219058ba\"\nimport script from \"./MetricsTab.vue?vue&type=script&lang=js\"\nexport * from \"./MetricsTab.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { _CREATE } from '@shell/config/query-params';\nimport { monitoringStatus } from '@shell/utils/monitoring';\nimport CreateEditView from '@shell/mixins/create-edit-view';\n\nimport Markdown from '@shell/components/Markdown';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport Tab from '@shell/components/Tabbed/Tab';\n\nimport { ARTIFACTHUB_PKG_ANNOTATION } from '../../types';\n\nimport MetricsTab from '../MetricsTab';\nimport RulesTable from '../RulesTable';\nimport TraceTable from '../TraceTable';\n\nexport default {\n  name: 'PolicyDetail',\n\n  components: {\n    Markdown, MetricsTab, ResourceTabs, RulesTable, Tab, TraceTable\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n\n    resource: {\n      type:    String,\n      default: null\n    },\n\n    value: {\n      type:    Object,\n      default: () => {},\n    },\n  },\n\n  async mounted() {\n    if ( this.value?.metadata?.annotations?.[ARTIFACTHUB_PKG_ANNOTATION] ) {\n      try {\n        const artifactHubPackage = await this.value.artifactHubPackageVersion();\n\n        if ( artifactHubPackage && !artifactHubPackage.error && artifactHubPackage.readme ) {\n          this.policyReadme = JSON.parse(JSON.stringify(artifactHubPackage.readme));\n        }\n      } catch (e) {\n        console.warn(`Unable to fetch artifacthub package: ${ e }`); // eslint-disable-line no-console\n      }\n    }\n  },\n\n  data() {\n    return { policyReadme: null };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...monitoringStatus(),\n\n    dashboardVars() {\n      return { policy_name: `clusterwide-${ this.value?.id }` };\n    },\n\n    hasRelationships() {\n      return !!this.value?.metadata?.relationships;\n    },\n\n    hasRules() {\n      return !isEmpty(this.rulesRows?.[0]);\n    },\n\n    rulesRows() {\n      return this.value?.spec?.rules;\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"mb-20\">\n      <h3>{{ t('namespace.resources') }}</h3>\n    </div>\n    <ResourceTabs :value=\"value\" data-testid=\"kw-policy-detail-tabs\" :mode=\"mode\" :need-related=\"hasRelationships\">\n      <Tab v-if=\"policyReadme\" name=\"policy-readme\" label=\"Readme\" :weight=\"99\">\n        <Markdown v-model:value=\"policyReadme\" data-testid=\"kw-policy-detail-readme\" />\n      </Tab>\n\n      <Tab v-if=\"hasRules\" name=\"policy-rules\" label=\"Rules\" :weight=\"98\">\n        <RulesTable :rows=\"rulesRows\" data-testid=\"kw-policy-detail-rules-table\" />\n      </Tab>\n\n      <Tab name=\"policy-tracing\" label=\"Tracing\" :weight=\"97\">\n        <TraceTable :resource=\"resource\" :policy=\"value\" data-testid=\"kw-policy-detail-trace-table\" />\n      </Tab>\n\n      <Tab #default=\"props\" name=\"policy-metrics\" label=\"Metrics\" :weight=\"96\">\n        <MetricsTab :resource=\"resource\" :policy-obj=\"value\" :active=\"props.active\" />\n      </Tab>\n    </ResourceTabs>\n  </div>\n</template>\n","<script>\nimport { Banner } from '@components/Banner';\nimport SortableTable from '@shell/components/SortableTable';\n\nimport { RULE_HEADERS } from '../config/table-headers';\n\nexport default {\n  props: {\n    rows: {\n      type:     Array,\n      default:  () => []\n    }\n  },\n\n  components: { Banner, SortableTable },\n\n  data() {\n    return { RULE_HEADERS };\n  },\n\n  methods: {\n    joinColumn(resource) {\n      return resource?.join(', ') || '';\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <SortableTable\n      v-if=\"rows.length > 0\"\n      data-testid=\"kw-policy-rules-sortable-table\"\n      :rows=\"rows\"\n      :headers=\"RULE_HEADERS\"\n      :table-actions=\"false\"\n      :row-actions=\"false\"\n      key-field=\"traceID\"\n      default-sort-by=\"startTime\"\n    >\n      <template #col:apiGroup=\"{row}\">\n        <td>\n          <span>{{ row.apiGroups || '-' }}</span>\n        </td>\n      </template>\n\n      <template #col:apiVersion=\"{row}\">\n        <td>\n          <span>{{ row.apiVersions || '-' }}</span>\n        </td>\n      </template>\n\n      <template #col:operations=\"{row}\">\n        <td>\n          <span>{{ joinColumn(row.operations) }}</span>\n        </td>\n      </template>\n\n      <template #col:resources=\"{row}\">\n        <td>\n          <span>{{ joinColumn(row.resources) }}</span>\n        </td>\n      </template>\n    </SortableTable>\n    <div v-else>\n      <Banner\n        class=\"type-banner mb-20 mt-0\"\n        color=\"warning\"\n        :label=\"t('kubewarden.policies.noRules')\"\n      />\n    </div>\n  </div>\n</template>\n","import { render } from \"./RulesTable.vue?vue&type=template&id=43829b53\"\nimport script from \"./RulesTable.vue?vue&type=script&lang=js\"\nexport * from \"./RulesTable.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PolicyDetail.vue?vue&type=template&id=78a67cf8\"\nimport script from \"./PolicyDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PolicyDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\nimport semver from 'semver';\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport { CATALOG, SERVICE } from '@shell/config/types';\nimport { KUBERNETES } from '@shell/config/labels-annotations';\nimport ResourceFetch from '@shell/mixins/resource-fetch';\nimport { allHash } from '@shell/utils/promise';\n\nimport { BadgeState } from '@components/BadgeState';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\nimport SortableTable from '@shell/components/SortableTable';\n\nimport { TRACE_HEADERS } from '../config/table-headers';\nimport { KUBEWARDEN, KUBEWARDEN_CHARTS, MODE_MAP, OPERATION_MAP } from '../types';\nimport { jaegerTraces } from '../modules/jaegerTracing';\nimport { formatDuration } from '../utils/duration-format';\n\nimport TraceChecklist from './TraceChecklist';\n\ndayjs.extend(relativeTime);\n\nexport default {\n  props: {\n    resource: {\n      type:    String,\n      default: () => ''\n    },\n    relatedPolicies: {\n      type:    Array,\n      default: () => []\n    },\n    policy: {\n      type:    Object,\n      default: () => {}\n    }\n  },\n\n  components: {\n    BadgeState, Banner, Loading, SortableTable, TraceChecklist\n  },\n\n  mixins: [ResourceFetch],\n\n  async fetch() {\n    const types = [CATALOG.APP, CATALOG.CLUSTER_REPO, SERVICE];\n    const hash = [];\n\n    for ( const type of types ) {\n      if ( this.$store.getters['cluster/canList'](type) ) {\n        hash.push(this.$fetchType(type));\n      }\n    }\n\n    await allHash(hash);\n\n    if ( this.jaegerQuerySvc ) {\n      const options = {\n        store:           this.$store,\n        queryService:    this.jaegerQuerySvc,\n        resource:        this.resource,\n        relatedPolicies: null,\n        policy:          null\n      };\n\n      if ( this.resource === KUBEWARDEN.POLICY_SERVER ) {\n        options.relatedPolicies = this.relatedPolicies;\n      } else {\n        options.policy = this.policy;\n      }\n\n      this.specificValidations = await jaegerTraces(options);\n    }\n\n    if (this.controllerApp) {\n      await this.controllerApp.fetchValues(true)\n    }\n  },\n\n  data() {\n    return {\n      MODE_MAP,\n      TRACE_HEADERS,\n      OPERATION_MAP,\n\n      specificValidations: null,\n      outdatedTelemetrySpec: false,\n      unsupportedTelemetrySpec: false,\n      incompleteTelemetrySpec: false\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters({ charts: 'catalog/charts', refreshingCharts: 'kubewarden/refreshingCharts' }),\n\n    allApps() {\n      return this.$store.getters['cluster/all'](CATALOG.APP);\n    },\n\n    allServices() {\n      return this.$store.getters['cluster/all'](SERVICE);\n    },\n\n    controllerApp() {\n      return this.allApps?.find(app => app?.spec?.chart?.metadata?.name === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    controllerChart() {\n      return this.charts?.find(chart => chart?.chartName === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    groupField() {\n      if ( this.isPolicyServer ) {\n        return 'policy_id';\n      }\n\n      return null;\n    },\n\n    isPolicyServer() {\n      return this.resource === KUBEWARDEN.POLICY_SERVER;\n    },\n\n    emptyPolicies() {\n      if ( this.resource === KUBEWARDEN.POLICY_SERVER ) {\n        return isEmpty(this.relatedPolicies);\n      }\n\n      return isEmpty(this.policy);\n    },\n\n    emptyTraces() {\n      return isEmpty(this.filteredValidations);\n    },\n\n    emptyTracesLabel() {\n      if ( this.resource === KUBEWARDEN.POLICY_SERVER ) {\n        return 'kubewarden.tracing.noRelatedTraces';\n      }\n\n      return 'kubewarden.tracing.noTraces';\n    },\n\n    rowsPerPage() {\n      if ( this.isPolicyServer ) {\n        return 40;\n      }\n\n      return 20;\n    },\n\n    tracingConfiguration() {\n      if (!this.controllerApp) {\n        return null;\n      }\n\n      const version = this.controllerApp?.spec?.chart?.metadata?.version;\n      const telemetry = this.controllerApp?.values?.telemetry;\n\n      if (semver.gte(version, '4.0.0-0')) {\n        // In version 4+, telemetry.tracing should be boolean or undefined (treated as false).\n        // sidecar.tracing is only meaningful if telemetry.tracing === true.\n\n        const tracingIsUndefinedOrBoolean = telemetry?.tracing === undefined || typeof telemetry?.tracing === 'boolean';\n        const endpointIsDefined = !!telemetry?.sidecar?.tracing?.jaeger?.endpoint;\n        \n        // Check for unsupported 'custom' mode\n        if (telemetry?.mode === 'custom') {\n          this.unsupportedTelemetrySpec = true;\n\n          return null;\n        }\n\n        // If tracing is not undefined or boolean, it's outdated\n        if (!tracingIsUndefinedOrBoolean) {\n          this.outdatedTelemetrySpec = true;\n\n          return null;\n        }\n\n        // If telemetry.tracing is true, ensure sidecar.tracing is defined\n        if (telemetry?.tracing === true && !endpointIsDefined) {\n          this.incompleteTelemetrySpec = true;\n\n          return null;\n        }\n\n        // If telemetry.tracing is undefined or false, treat it as false.\n        // sidecar config is irrelevant in that case, and not considered outdated.\n        if (telemetry?.tracing !== true) {\n          // tracing is off, no sidecar config needed\n          return null;\n        }\n\n        // If we get here, telemetry.tracing === true and endpointIsDefined === true\n        return telemetry?.sidecar?.tracing;\n      } else {\n        // Old schema: just return telemetry.tracing.enabled\n        return telemetry?.tracing?.enabled;\n      }\n    },\n\n    jaegerServices() {\n      return this.allServices?.filter(svc => svc?.metadata?.labels?.['app.kubernetes.io/part-of'] === 'jaeger');\n    },\n\n    jaegerQuerySvc() {\n      if ( !isEmpty(this.jaegerServices) ) {\n        return this.jaegerServices.find((svc) => {\n          const ports = svc?.spec?.ports;\n\n          if ( ports.length ) {\n            return ports.find(p => p.port === 16685 || p.port === 16686);\n          }\n        });\n      }\n\n      return null;\n    },\n\n    openTelemetryServices() {\n      return this.allServices?.filter(svc => svc?.metadata?.labels?.[KUBERNETES.MANAGED_NAME] === 'opentelemetry-operator');\n    },\n\n    openTelSvc() {\n      if ( !isEmpty(this.openTelemetryServices) ) {\n        return this.openTelemetryServices.find((svc) => {\n          const ports = svc?.spec?.ports;\n\n          if ( ports.length ) {\n            return ports.find(p => p.port === 8080);\n          }\n        });\n      }\n\n      return null;\n    },\n\n    showChecklist() {\n      return (!this.openTelSvc || !this.jaegerQuerySvc || !this.tracingConfiguration);\n    },\n\n    showTable() {\n      return (!this.emptyPolicies && !this.showChecklist && !this.emptyTraces);\n    },\n\n    filteredValidations() {\n      if ( !isEmpty(this.specificValidations) ) {\n        return this.specificValidations.flatMap((v) => {\n          if ( this.currentCluster?.id === v.cluster ) {\n            return v.traces;\n          } else {\n            return [];\n          }\n        });\n      }\n\n      return [];\n    }\n  },\n\n  methods: {\n    modeColor(mode) {\n      return this.MODE_MAP[mode];\n    },\n\n    opColor(op) {\n      return this.OPERATION_MAP[op];\n    },\n\n    formatTime(time) {\n      return dayjs(time / 1000);\n    },\n\n    duration(duration) {\n      return formatDuration(duration);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending || refreshingCharts\" mode=\"relative\" />\n  <div v-else>\n    <TraceChecklist\n      v-if=\"showChecklist\"\n      :controller-app=\"controllerApp\"\n      :controller-chart=\"controllerChart\"\n      :tracing-configuration=\"tracingConfiguration\"\n      :jaeger-query-svc=\"jaegerQuerySvc\"\n      :open-tel-svc=\"openTelSvc\"\n      :outdated-telemetry-spec=\"outdatedTelemetrySpec\"\n      :unsupported-telemetry-spec=\"unsupportedTelemetrySpec\"\n      :incomplete-telemetry-spec=\"incompleteTelemetrySpec\"\n    />\n\n    <Banner\n      v-else-if=\"!showChecklist && emptyPolicies\"\n      color=\"error\"\n      :label=\"t('kubewarden.tracing.noRelatedPolicies')\"\n    />\n\n    <SortableTable\n      v-else-if=\"showTable\"\n      :rows=\"filteredValidations\"\n      :headers=\"TRACE_HEADERS\"\n      :table-actions=\"false\"\n      :row-actions=\"false\"\n      key-field=\"id\"\n      default-sort-by=\"startTime\"\n      :sub-expandable=\"true\"\n      :sub-expand-column=\"true\"\n      :sub-rows=\"true\"\n      :paging=\"true\"\n      :rows-per-page=\"rowsPerPage\"\n    >\n      <template #col:mode=\"{row}\">\n        <td>\n          <BadgeState\n            :label=\"row.mode\"\n            :color=\"modeColor(row.mode)\"\n            class=\"text-capitalize\"\n          />\n        </td>\n      </template>\n\n      <template #col:name=\"{row}\">\n        <td class=\"text-bold\">\n          {{ row.name }}\n        </td>\n      </template>\n\n      <template #col:namespace=\"{row}\">\n        <td>\n          {{ row.namespace ? row.namespace : '-' }}\n        </td>\n      </template>\n\n      <template #col:startTime=\"{row}\">\n        <td>\n          {{ formatTime(row.startTime) }}\n        </td>\n      </template>\n\n      <template #col:duration=\"{row}\">\n        <td>\n          {{ duration(row.duration) }}\n        </td>\n      </template>\n\n      <template #sub-row=\"{row, fullColspan}\">\n        <td :colspan=\"fullColspan\" class=\"sub-row\">\n          <div class=\"details\">\n            <section class=\"col\">\n              <div class=\"title\">\n                Response Message\n              </div>\n              <span class=\"text-info text-capitalize\">\n                {{ row.responseMessage ? row.responseMessage : '-' }}\n              </span>\n            </section>\n            <section class=\"col\">\n              <div class=\"title\">\n                Response Code\n              </div>\n              <span class=\"text-info\">\n                {{ row.responseCode ? row.responseCode : '-' }}\n              </span>\n            </section>\n            <section class=\"col\">\n              <div class=\"title\">\n                Mutated\n              </div>\n              <span class=\"text-info\">\n                {{ row.mutated }}\n              </span>\n            </section>\n          </div>\n        </td>\n      </template>\n    </SortableTable>\n\n    <Banner\n      v-else\n      color=\"warning\"\n      :label=\"t(emptyTracesLabel)\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.policy-table-container {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.filter {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-self: flex-end;\n  align-items: center;\n\n  & > * {\n    margin: 10px;\n    max-width: 33%;\n  }\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n\n  &__category {\n    min-width: 200px;\n    height: unset;\n  }\n\n  &__search, &__reset {\n    height: 61px;\n  }\n}\n</style>","import dayjs from 'dayjs';\nimport _dropWhile from 'lodash/dropWhile';\nimport _round from 'lodash/round';\nimport _duration from 'dayjs/plugin/duration';\n\ndayjs.extend(_duration);\n\nexport const STANDARD_DATE_FORMAT = 'YYYY-MM-DD';\nexport const STANDARD_TIME_FORMAT = 'HH:mm';\nexport const STANDARD_DATETIME_FORMAT = 'MMMM D YYYY, HH:mm:ss.SSS';\n\n/** @constant 1ms as the number of microseconds, which is the precision of Jaeger timestamps */\nexport const ONE_MILLISECOND = 1000 * 1;\n\nconst ONE_SECOND = 1000 * ONE_MILLISECOND;\nconst ONE_MINUTE = 60 * ONE_SECOND;\nconst ONE_HOUR = 60 * ONE_MINUTE;\nconst ONE_DAY = 24 * ONE_HOUR;\n\nconst UNIT_STEPS: { unit: string; microseconds: number; ofPrevious: number }[] = [\n  {\n    unit: 'd', microseconds: ONE_DAY, ofPrevious: 24\n  },\n  {\n    unit: 'h', microseconds: ONE_HOUR, ofPrevious: 60\n  },\n  {\n    unit: 'm', microseconds: ONE_MINUTE, ofPrevious: 60\n  },\n  {\n    unit: 's', microseconds: ONE_SECOND, ofPrevious: 1000\n  },\n  {\n    unit: 'ms', microseconds: ONE_MILLISECOND, ofPrevious: 1000\n  },\n  {\n    unit: 's', microseconds: 1, ofPrevious: 1000\n  },\n];\n\nexport function formatDuration(duration: number): string {\n  // Drop all units that are too large except the last one\n  const [primaryUnit, secondaryUnit] = _dropWhile(\n    UNIT_STEPS,\n    ({ microseconds }, index) => index < UNIT_STEPS.length - 1 && microseconds > duration\n  );\n\n  if (primaryUnit.ofPrevious === 1000) {\n    // If the unit is decimal based, display as a decimal\n    return `${ _round(duration / primaryUnit.microseconds, 2) }${ primaryUnit.unit }`;\n  }\n\n  const primaryValue = Math.floor(duration / primaryUnit.microseconds);\n  const primaryUnitString = `${ primaryValue }${ primaryUnit.unit }`;\n  const secondaryValue = Math.round((duration / secondaryUnit.microseconds) % primaryUnit.ofPrevious);\n  const secondaryUnitString = `${ secondaryValue }${ secondaryUnit.unit }`;\n\n  return secondaryValue === 0 ? primaryUnitString : `${ primaryUnitString } ${ secondaryUnitString }`;\n}","<script>\nimport { mapGetters } from 'vuex';\n\nimport { CATALOG } from '@shell/config/labels-annotations';\nimport {\n  REPO_TYPE, REPO, CHART, NAME, VERSION, NAMESPACE\n} from '@shell/config/query-params';\n\nimport { Banner } from '@components/Banner';\n\nexport default {\n  props: {\n    controllerApp: {\n      type:    Object,\n      default: null\n    },\n    controllerChart: {\n      type:    Object,\n      default: null\n    },\n    tracingConfiguration: {\n      type:    Object,\n      default: null\n    },\n    jaegerQuerySvc: {\n      type:    Object,\n      default: null\n    },\n    openTelSvc: {\n      type:    Object,\n      default: null\n    },\n    outdatedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    },\n    unsupportedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    },\n    incompleteTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  components: { Banner },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n\n    controllerLinkTooltip() {\n      if ( !this.openTelSvc || !this.jaegerQuerySvc ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.prerequisites');\n      }\n\n      if ( !this.controllerApp || !this.controllerChart ) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.chartError', { chart: 'Kubewarden Controller' }, true);\n      }\n\n      return null;\n    },\n\n    controllerLinkDisabled() {\n      return !this.openTelSvc || !this.jaegerQuerySvc || !this.controllerApp || !this.controllerChart;\n    },\n\n    tracingEnabled() {\n      if ( this.tracingConfiguration ) {\n        return this.tracingConfiguration.enabled;\n      }\n\n      return null;\n    }\n  },\n\n  methods: {\n    badgeIcon(prop) {\n      return {\n        'icon-dot-open': !prop, 'icon-checkmark': prop, 'text-success': prop\n      };\n    },\n\n    controllerAppRoute() {\n      if ( this.controllerApp ) {\n        const metadata = this.controllerApp.spec?.chart?.metadata;\n\n        const query = {\n          [NAMESPACE]: metadata?.annotations?.[CATALOG.NAMESPACE],\n          [NAME]:      metadata?.annotations?.[CATALOG.RELEASE_NAME],\n          [VERSION]:   metadata?.annotations?.['catalog.cattle.io/upstream-version'],\n          [REPO]:      metadata?.annotations?.[CATALOG.SOURCE_REPO_NAME],\n          [REPO_TYPE]: metadata?.annotations?.[CATALOG.SOURCE_REPO_TYPE],\n          [CHART]:     metadata?.name\n        };\n\n        this.$router.push({\n          name:   'c-cluster-apps-charts-install',\n          params: { cluster: this.currentCluster?.id || '_' },\n          query,\n        });\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <p class=\"checklist__description mb-20\" data-testid=\"kw-tracing-checklist-description\">\n      {{ t('kubewarden.tracing.description') }}\n    </p>\n    <div class=\"checklist__prereq mb-20\">\n      <h2>{{ t('kubewarden.tracing.prerequisites.label') }}</h2>\n      <p>{{ t('kubewarden.tracing.prerequisites.description') }}</p>\n    </div>\n    <Banner\n      color=\"warning\"\n      :label=\"t('kubewarden.tracing.prerequisites.warning')\"\n    />\n    <div class=\"checklist__container mt-20 mb-20\">\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-tracing-checklist-step-open-tel\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(openTelSvc)\" />\n        <p v-clean-html=\"t('kubewarden.tracing.openTelemetry', {}, true)\" />\n      </div>\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-tracing-checklist-step-jaeger\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(jaegerQuerySvc)\" />\n        <p v-clean-html=\"t('kubewarden.tracing.jaeger', {}, true)\" p />\n      </div>\n\n      <!-- Telemetry banners -->\n      <div>\n        <Banner\n          v-if=\"outdatedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.tracing.prerequisites.outdated')\"\n        />\n        <Banner\n          v-if=\"unsupportedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.tracing.prerequisites.unsupported')\"\n        />\n        <Banner\n          v-if=\"incompleteTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.tracing.prerequisites.incomplete')\"\n        />\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-tracing-checklist-step-config\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(tracingEnabled)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.tracing.config.label', {}, true)\" />\n          <button\n            v-clean-tooltip=\"controllerLinkTooltip\"\n            data-testid=\"kw-tracing-checklist-step-config-button\"\n            class=\"btn role-primary ml-10\"\n            :disabled=\"controllerLinkDisabled\"\n            @click=\"controllerAppRoute\"\n          >\n            {{ t(\"kubewarden.tracing.config.link\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.checklist {\n  &__container {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    border: 1px solid var(--border);\n    padding: 10px;\n  }\n\n  &__step, &__config {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  &__step {\n    min-height: 40px;\n  }\n}\n</style>","import { render } from \"./TraceChecklist.vue?vue&type=template&id=2a5e3224&scoped=true\"\nimport script from \"./TraceChecklist.vue?vue&type=script&lang=js\"\nexport * from \"./TraceChecklist.vue?vue&type=script&lang=js\"\n\nimport \"./TraceChecklist.vue?vue&type=style&index=0&id=2a5e3224&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2a5e3224\"]])\n\nexport default __exports__","import { render } from \"./TraceTable.vue?vue&type=template&id=13983c24&scoped=true\"\nimport script from \"./TraceTable.vue?vue&type=script&lang=js\"\nexport * from \"./TraceTable.vue?vue&type=script&lang=js\"\n\nimport \"./TraceTable.vue?vue&type=style&index=0&id=13983c24&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-13983c24\"]])\n\nexport default __exports__","<script>\nimport { _CREATE } from '@shell/config/query-params';\n\nimport { KUBEWARDEN } from '../types';\n\nimport PolicyDetail from '../components/Policies/PolicyDetail';\n\nexport default {\n  name: 'AdmissionPolicy',\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  components: { PolicyDetail },\n\n  data() {\n    return {\n      resource: KUBEWARDEN.ADMISSION_POLICY\n    }\n  }\n};\n</script>\n\n<template>\n  <PolicyDetail :value=\"value\" :mode=\"mode\" :resource=\"resource\" />\n</template>\n","import { render } from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=template&id=6ac81996\"\nimport script from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { _CREATE } from '@shell/config/query-params';\n\nimport { KUBEWARDEN } from '../types';\n\nimport PolicyDetail from '../components/Policies/PolicyDetail';\n\nexport default {\n  name: 'ClusterAdmissionPolicy',\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  components: { PolicyDetail },\n\n  data() {\n    return {\n      resource: KUBEWARDEN.ADMISSION_POLICY\n    }\n  }\n};\n</script>\n\n<template>\n  <PolicyDetail :value=\"value\" :mode=\"mode\" :resource=\"resource\" />\n</template>\n","import { render } from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=template&id=ea2c3518\"\nimport script from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { _CREATE } from '@shell/config/query-params';\nimport { allHash } from '@shell/utils/promise';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { mapPref, GROUP_RESOURCES } from '@shell/store/prefs';\n\nimport { BadgeState } from '@components/BadgeState';\nimport CountGauge from '@shell/components/CountGauge';\nimport Loading from '@shell/components/Loading';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Tab from '@shell/components/Tabbed/Tab';\n\nimport { RELATED_HEADERS } from '../config/table-headers';\nimport { KUBEWARDEN } from '../types';\n\nimport MetricsTab from '../components/MetricsTab';\nimport TraceTable from '../components/TraceTable';\n\nexport default {\n  name: 'PolicyServer',\n\n  components: {\n    BadgeState, CountGauge, Loading, MetricsTab, ResourceTabs, ResourceTable, Tab, TraceTable\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n    value: {\n      type:     Object,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    const hash = await allHash({\n      relatedPolicies:      this.value.allRelatedPolicies(),\n      policyGauges:         this.value.policyGauges()\n    });\n\n    const assignIfNotEmpty = (prop, value) => {\n      if ( !isEmpty(value) ) {\n        this[prop] = value;\n      }\n    };\n\n    assignIfNotEmpty('relatedPolicies', hash.relatedPolicies);\n    assignIfNotEmpty('policyGauges', hash.policyGauges);\n  },\n\n  data() {\n    return {\n      RELATED_HEADERS,\n      policyGauges:         null,\n      relatedPolicies:      null,\n      reloadRequired:       false,\n      resource:             KUBEWARDEN.POLICY_SERVER\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters({ policyTraces: 'kubewarden/policyTraces' }),\n    _group: mapPref(GROUP_RESOURCES),\n\n    filteredTraces() {\n      if ( !isEmpty(this.policyTraces) ) {\n        return this.policyTraces.filter((policyTraceObj) => {\n          if ( this.currentCluster?.id === policyTraceObj.cluster ) {\n            return policyTraceObj;\n          }\n        });\n      }\n\n      return null;\n    },\n\n    emptyTraces() {\n      return isEmpty(this.filteredTraces);\n    },\n\n    groupPreference() {\n      const out = this._group === 'namespace' ? 'kind' : null;\n\n      return out;\n    },\n\n    relatedPoliciesTotal() {\n      if ( isEmpty(this.relatedPolicies) ) {\n        return 0;\n      }\n\n      return this.relatedPolicies.length;\n    },\n\n    tracesGauges() {\n      if ( !this.emptyTraces ) {\n        return this.value.tracesGauges(this.filteredTraces);\n      }\n\n      return null;\n    },\n\n    traceGaugeTotals() {\n      if ( !this.emptyTraces ) {\n        return this.filteredTraces?.flatMap(policyTraceObj => policyTraceObj.traces).length;\n      }\n\n      return 0;\n    }\n  },\n\n  methods: {\n    hasNamespaceSelector(row) {\n      return row.namespaceSelector;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <template v-if=\"policyGauges\">\n      <div class=\"row\">\n        <template>\n          <div class=\"col span-6\">\n            <h3 data-testid=\"kw-ps-detail-status-title\">\n              {{ t('kubewarden.policyServer.policyGauge.byStatus') }}\n            </h3>\n            <div class=\"gauges mb-20\">\n              <CountGauge\n                v-for=\"(group, key) in policyGauges\"\n                :key=\"key\"\n                :total=\"relatedPoliciesTotal\"\n                :useful=\"group.count || 0\"\n                :graphical=\"false\"\n                :primary-color-var=\"`--sizzle-${group.color}`\"\n                :name=\"key\"\n              />\n            </div>\n          </div>\n        </template>\n        <template v-if=\"!emptyTraces\">\n          <div class=\"col span-6\">\n            <h3>\n              {{ t('kubewarden.policyServer.policyGauge.traces') }}\n            </h3>\n            <div class=\"gauges mb-20\">\n              <CountGauge\n                v-for=\"(group, key) in tracesGauges\"\n                :key=\"key\"\n                :useful=\"group.count || 0\"\n                :total=\"traceGaugeTotals\"\n                :graphical=\"false\"\n                :primary-color-var=\"`--sizzle-${group.color}`\"\n                :name=\"key\"\n              />\n            </div>\n          </div>\n        </template>\n      </div>\n    </template>\n\n    <ResourceTabs :value=\"value\" :mode=\"mode\">\n      <Tab name=\"related-policies\" label=\"Policies\" :weight=\"99\">\n        <template #default>\n          <ResourceTable\n            :rows=\"relatedPolicies || []\"\n            :headers=\"RELATED_HEADERS\"\n            :groupable=\"true\"\n            :group-by=\"groupPreference\"\n            :table-actions=\"true\"\n            data-testid=\"kw-ps-detail-related-policies-list\"\n          >\n            <template #col:operation=\"{ row }\">\n              <td>\n                <BadgeState\n                  :data-testid=\"`kw-ps-detail-${ row.id }-state`\"\n                  :label=\"row.operation\"\n                  :color=\"color(row.operation)\"\n                />\n              </td>\n            </template>\n          </ResourceTable>\n        </template>\n      </Tab>\n\n      <Tab name=\"policy-tracing\" label=\"Tracing\" :weight=\"98\" class=\"relative\">\n        <TraceTable :resource=\"resource\" :related-policies=\"relatedPolicies\" />\n      </Tab>\n\n      <Tab #default=\"props\" name=\"policy-metrics\" label=\"Metrics\" :weight=\"97\" class=\"relative\">\n        <MetricsTab :resource=\"resource\" :policy-server-obj=\"value\" :active=\"props.active\" />\n      </Tab>\n    </ResourceTabs>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.relative {\n  position: relative;\n}\n\n.policy {\n  &__mode {\n    display: flex;\n    align-items: center;\n\n    i {\n      margin-left: 5px;\n      font-size: 22px;\n      color: var(--warning);\n    }\n  }\n}\n\n.gaugesContainer {\n  display: flex;\n}\n\n.gauges {\n  display: flex;\n  justify-content: space-around;\n\n  flex-wrap: wrap;\n  justify-content: left;\n\n  .count-gauge {\n    width: 46%;\n    margin-bottom: 10px;\n    flex: initial;\n  }\n\n  & > *{\n    flex: 1;\n    margin-right: $column-gutter;\n  }\n}\n</style>\n","import { render } from \"./policies.kubewarden.io.policyserver.vue?vue&type=template&id=14ea0f17&scoped=true\"\nimport script from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\n\nimport \"./policies.kubewarden.io.policyserver.vue?vue&type=style&index=0&id=14ea0f17&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-14ea0f17\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".checklist__container[data-v-d0e7ec94]{display:flex;justify-content:center;flex-direction:column;border:1px solid var(--border);padding:10px}.checklist__config[data-v-d0e7ec94],.checklist__step[data-v-d0e7ec94]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.checklist__step[data-v-d0e7ec94]{min-height:40px}.conflicting-banner[data-v-d0e7ec94]{display:flex;flex-direction:column}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".checklist__container[data-v-2a5e3224]{display:flex;justify-content:center;flex-direction:column;border:1px solid var(--border);padding:10px}.checklist__config[data-v-2a5e3224],.checklist__step[data-v-2a5e3224]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.checklist__step[data-v-2a5e3224]{min-height:40px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".policy-table-container[data-v-13983c24]{display:flex;flex-direction:column;gap:1rem}.filter[data-v-13983c24]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end;align-items:center}.filter[data-v-13983c24]>*{margin:10px;max-width:33%}.filter[data-v-13983c24]>:first-child{margin-left:0}.filter[data-v-13983c24]>:last-child{margin-right:0}.filter__category[data-v-13983c24]{min-width:200px;height:unset}.filter__reset[data-v-13983c24],.filter__search[data-v-13983c24]{height:61px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".relative[data-v-14ea0f17]{position:relative}.policy__mode[data-v-14ea0f17]{display:flex;align-items:center}.policy__mode i[data-v-14ea0f17]{margin-left:5px;font-size:22px;color:var(--warning)}.gauges[data-v-14ea0f17],.gaugesContainer[data-v-14ea0f17]{display:flex}.gauges[data-v-14ea0f17]{justify-content:space-around;flex-wrap:wrap;justify-content:left}.gauges .count-gauge[data-v-14ea0f17]{width:46%;margin-bottom:10px;flex:initial}.gauges[data-v-14ea0f17]>*{flex:1;margin-right:1.75%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./MetricsChecklist.vue?vue&type=style&index=0&id=d0e7ec94&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5aea978d\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./TraceChecklist.vue?vue&type=style&index=0&id=2a5e3224&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7184a900\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./TraceTable.vue?vue&type=style&index=0&id=13983c24&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9caa2d06\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./policies.kubewarden.io.policyserver.vue?vue&type=style&index=0&id=14ea0f17&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"476f94ee\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var map = {\n\t\"./kubewarden-dashboard-policy.json\": [\n\t\t18938,\n\t\t521\n\t],\n\t\"./kubewarden-dashboard-policyserver.json\": [\n\t\t65682,\n\t\t712\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 9551;\nmodule.exports = webpackAsyncContext;"],"names":["proxyUrl","service","port","view","links","idx","lastIndexOf","proxyUrlFromBase","slice","metadata","name","base","scheme","path","schemaNamePort","encodeURIComponent","cleanPath","replace","cleanBase","out","async","jaegerTraces","config","store","queryService","resource","relatedPolicies","policy","time","proxy","promises","isEmpty","Error","push","jaegerTraceRequest","forEach","p","hash","res","Promise","all","flatMap","o","data","scaffoldPolicyTrace","e","console","warn","jaegerPolicyName","kind","namespace","apiPath","lookbackTime","options","JAEGER_PATH","dispatch","url","traces","currentCluster","getters","filterTraces","policyName","reduce","acc","trace","validationSpan","spans","find","span","operationName","matchedTag","tags","tag","key","value","convertedTags","convertTagsToObject","id","traceID","allowed","mode","spec","operation","startTime","duration","responseMessage","response_message","responseCode","response_code","mutated","cluster","updatedTrace","KUBEWARDEN","POLICY_SERVER","relatedPolicy","relatedTraces","arr","result","item","type","parseInt","parseFloat","_ctx","$fetchState","pending","_createBlock","_component_Loading","_createElementBlock","_hoisted_1","$options","showChecklist","_component_MetricsChecklist","cattleDashboardNs","conflictingGrafanaDashboards","controllerApp","controllerChart","kubewardenServiceMonitor","kubewardenGrafanaDashboards","metricsConfiguration","monitoringApp","monitoringChart","openTelSvc","$props","policyObj","policyServerObj","$data","outdatedTelemetrySpec","unsupportedTelemetrySpec","onUpdateServiceMonitors","updateServiceMonitors","_createCommentVNode","_Fragment","metricsProxy","_component_Banner","color","label","t","active","_component_DashboardMetrics","vars","grafanaProxy","grafana","grafanaService","handleGrowl","error","SERVICE","root","findKubewardenDashboards","CONFIG_MAP","selector","addKubewardenDashboards","dashboardEnums","Object","values","KubewardenDashboards","file","fileKey","existing","labels","KubewardenDashboardLabels","DASHBOARD","PART_OF","APP","GRAFANA_DASHBOARD","annotations","HelmAnnotations","NAME","NAMESPACE","configMapTemplate","JSON","stringify","save","findServiceMonitor","allServiceMonitors","smName","policyServer","sm","matchLabels","addKubewardenServiceMonitor","controllerNs","serviceMonitor","MONITORING","SERVICEMONITOR","serviceMonitorTemplate","endpoints","interval","namespaceSelector","matchNames","app","serviceMonitorObj","class","_createElementVNode","_hoisted_2","_toDisplayString","_createVNode","_hoisted_3","_hoisted_4","_normalizeClass","badgeIcon","_hoisted_5","_hoisted_6","_hoisted_7","disabled","onClick","_cache","$event","monitoringAppRoute","_createTextVNode","monitoringChartLink","_hoisted_8","monitoringLinkTooltip","_hoisted_9","_hoisted_10","_hoisted_11","_component_AsyncButton","serviceMonitorButtonDisabled","addServiceMonitor","serviceMonitorsTooltip","_hoisted_12","hasKubewardenDashboards","_hoisted_13","_hoisted_14","dashboardButtonDisabled","addDashboards","dashboardsTooltip","showConflictingDashboardsBanner","default","_withCtx","_hoisted_15","count","length","_renderList","configMap","_component_router_link","to","detailLocation","_","_hoisted_16","_hoisted_17","_hoisted_18","controllerLinkDisabled","controllerAppRoute","_hoisted_19","controllerLinkTooltip","props","Array","kubewardenDashboards","Boolean","components","AsyncButton","Banner","computed","mapGetters","this","chart","methods","btnCb","$store","$emit","prop","isArray","emptyProp","goToInstall","query","VERSION","version","REPO","CATALOG","SOURCE_REPO_NAME","REPO_TYPE","SOURCE_REPO_TYPE","CHART","$router","params","RELEASE_NAME","__exports__","String","DashboardMetrics","Loading","MetricsChecklist","mixins","ResourceFetch","fetch","debouncedRefreshCharts","debounce","init","refreshCharts","chartName","resourceMap","property","allApps","CLUSTER_REPO","allRepos","allConfigMaps","allPolicyServers","allNamespaces","allServices","$fetchType","allHash","monitoringStatus","installed","METRICS_TYPE","metricsService","dashboardExists","_statusText","message","fetchValues","POLICY","watch","charts","ns","filter","KUBEWARDEN_CHARTS","CONTROLLER","monitoringServices","svc","log","telemetry","semver","metricsIsUndefinedOrBoolean","undefined","metrics","enabled","openTelemetryServices","KUBERNETES","MANAGED_NAME","ports","policyServerSvcs","policyServerNames","map","ps","grafanaDashboardsInstalled","render","_component_ResourceTabs","hasRelationships","policyReadme","_component_Tab","weight","_component_Markdown","hasRules","_component_RulesTable","rows","rulesRows","_component_TraceTable","_component_MetricsTab","_component_SortableTable","headers","RULE_HEADERS","row","apiGroups","apiVersions","joinColumn","operations","resources","SortableTable","join","Markdown","MetricsTab","ResourceTabs","RulesTable","Tab","TraceTable","CreateEditView","_CREATE","mounted","ARTIFACTHUB_PKG_ANNOTATION","artifactHubPackage","artifactHubPackageVersion","readme","parse","dashboardVars","policy_name","relationships","rules","refreshingCharts","_component_TraceChecklist","tracingConfiguration","jaegerQuerySvc","incompleteTelemetrySpec","emptyPolicies","showTable","filteredValidations","TRACE_HEADERS","paging","rowsPerPage","_component_BadgeState","modeColor","formatTime","fullColspan","colspan","emptyTracesLabel","dayjs","_duration","ONE_MILLISECOND","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","UNIT_STEPS","unit","microseconds","ofPrevious","formatDuration","primaryUnit","secondaryUnit","_dropWhile","index","_round","primaryValue","Math","floor","primaryUnitString","secondaryValue","round","secondaryUnitString","tracingEnabled","args","relativeTime","BadgeState","TraceChecklist","types","specificValidations","MODE_MAP","OPERATION_MAP","groupField","isPolicyServer","emptyTraces","tracingIsUndefinedOrBoolean","tracing","endpointIsDefined","sidecar","jaeger","endpoint","jaegerServices","v","opColor","op","_component_PolicyDetail","required","PolicyDetail","ADMISSION_POLICY","policyGauges","group","_component_CountGauge","total","relatedPoliciesTotal","useful","graphical","tracesGauges","traceGaugeTotals","_component_ResourceTable","RELATED_HEADERS","groupable","groupPreference","CountGauge","ResourceTable","allRelatedPolicies","assignIfNotEmpty","reloadRequired","policyTraces","_group","mapPref","GROUP_RESOURCES","filteredTraces","policyTraceObj","hasNamespaceSelector","___CSS_LOADER_EXPORT___","module","content","__esModule","locals","exports","add","webpackAsyncContext","req","__webpack_require__","resolve","then","code","ids","keys"],"sourceRoot":""}