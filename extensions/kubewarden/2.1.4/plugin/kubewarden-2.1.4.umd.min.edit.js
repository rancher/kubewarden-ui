(("undefined"!==typeof self?self:this)["webpackJsonpkubewarden_2_1_4"]=("undefined"!==typeof self?self:this)["webpackJsonpkubewarden_2_1_4"]||[]).push([[4],{"0b64":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-1f3d98fa] .cru__footer{z-index:1}",""]),e.exports=t},1725:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"policy-info-panel",style:"--banner-top-offset: 0px"},[e.showSlideIn?t("div",{staticClass:"glass",attrs:{"data-testid":"extension-details-bg"},on:{click:function(t){return e.hide()}}}):e._e(),t("div",{staticClass:"slideIn",class:{hide:!1,slideIn__show:e.showSlideIn},attrs:{"data-testid":"extension-details"}},[t("div",{staticClass:"slideIn__header"},[e.packageValues?t("div",{staticClass:"policy-info-content"},[t("div",{staticClass:"policy-header pb-10"},[t("div",{staticClass:"slideIn__header__buttons"},[t("button",{staticClass:"btn btn-sm role-link",on:{click:e.hide}},[t("span",[e._v(e._s(e.t("generic.close")))]),t("i",{staticClass:"icon icon-chevron-right"})])])]),t("div",{staticClass:"policy-title mt-20"},[t("h2",{staticClass:"policy-info-title"},[e._v(" "+e._s(e.packageValues.display_name)+" ")])]),t("ChartReadme",{staticClass:"mt-20",attrs:{"version-info":e.packageValues}})],1):e._e()])])])},i=[],o=a("9ce4"),r=a("7202"),l={props:{packageValues:{type:Object,required:!0}},components:{ChartReadme:r["a"]},data(){return{showSlideIn:!1,info:void 0,infoVersion:void 0,versionInfo:void 0,versionError:void 0,headerBannerSize:0}},computed:{...Object(o["b"])({theme:"prefs/theme"}),applyDarkModeBg(){return"dark"===this.theme?{"dark-mode":!0}:{}}},methods:{show(){this.showSlideIn=!0},hide(){this.showSlideIn=!1}}},n=l,c=(a("6a00"),a("d802")),d=Object(c["a"])(n,s,i,!1,null,"1cec5e9c",null);t["a"]=d.exports},"361b":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.policy-table-container[data-v-73f021fc]{display:flex;flex-direction:column;gap:1rem;padding:1rem}.policy-table-actions[data-v-73f021fc]{display:flex;justify-content:space-between;align-items:center}.filter[data-v-73f021fc]{width:100%;display:grid;grid-template-rows:1fr;grid-template-columns:repeat(2,1fr) .25fr;grid-template-areas:"attributes search reset";gap:1rem}.filter>*[data-v-73f021fc]{margin:.5rem 0}.filter__attributes[data-v-73f021fc]{grid-area:attributes}.filter__search[data-v-73f021fc]{grid-area:search}.filter__reset[data-v-73f021fc]{grid-area:reset}.filter__reset p[data-v-73f021fc]{line-height:1.5;white-space:wrap}[data-v-73f021fc] tr:hover{cursor:pointer}',""]),e.exports=t},3993:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-38945359] .header{display:none}[data-v-38945359] .controls-row{position:sticky;width:auto}[data-v-38945359] .controls-row .controls-steps{display:flex}[data-v-38945359] .custom{min-height:110px}[data-v-38945359] .subtype{height:110px;margin:10px;position:relative;border-radius:calc(var(--border-radius)*1.5);border:1px solid var(--border);text-decoration:none!important;color:var(--body-text)!important}[data-v-38945359] .subtype:hover:not(.disabled){box-shadow:0 0 30px var(--shadow);transition:box-shadow .1s ease-in-out;cursor:pointer;text-decoration:none!important}[data-v-38945359] .subtype__metadata{padding:10px}[data-v-38945359] .subtype__metadata__description,[data-v-38945359] .subtype__metadata__label{padding-right:20px}[data-v-38945359] .subtype__badge{position:absolute;right:0;top:0;padding:4px 5px;border-bottom-left-radius:var(--border-radius)}[data-v-38945359] .subtype__badge label{font-size:12px;line-height:12px;text-align:center;display:block;white-space:no-wrap;text-overflow:ellipsis;color:var(--app-rancher-accent-text);margin:0}[data-v-38945359] .subtype__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px;line-height:normal}[data-v-38945359] .subtype__description{margin-right:10px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden;text-overflow:ellipsis;color:var(--input-label)}[data-v-38945359] .footer-error{margin-top:15px}.wizard[data-v-38945359]{position:relative;height:100%;z-index:1}.banner__title[data-v-38945359]{padding-top:10px;margin-bottom:10px;border-bottom:1px solid var(--border);min-height:60px}.banner__readme-button[data-v-38945359]{padding:0 7px 0 0}",""]),e.exports=t},"448a":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-50366f21] .cru__footer{z-index:1}",""]),e.exports=t},4579:function(e,t,a){var s=a("361b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("7db5bf6d",s,!0,{sourceMap:!1,shadowMode:!1})},"4ac6a":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-1cec5e9c] .btn-sm{padding:0 7px 0 0}.policy-info-panel[data-v-1cec5e9c]{position:fixed;top:0;left:0;z-index:2;overflow-y:auto;--banner-top-offset:0}.policy-info-panel .glass[data-v-1cec5e9c]{left:0;width:100%;opacity:0}.policy-info-panel .glass[data-v-1cec5e9c],.policy-info-panel .slideIn[data-v-1cec5e9c]{position:fixed;top:calc(54px + var(--banner-top-offset));height:calc(100% - 54px - var(--banner-top-offset));overflow-y:auto}.policy-info-panel .slideIn[data-v-1cec5e9c]{border-left:var(--header-border-size) solid var(--header-border);right:-45%;background-color:var(--topmenu-bg);width:45%;display:flex;flex-direction:column;box-shadow:-3px 0 5px rgba(0,0,0,.1);padding:10px;transition:right .5s ease}.policy-info-panel .slideIn__header[data-v-1cec5e9c]{text-transform:capitalize}.policy-info-panel .slideIn .policy-info-content[data-v-1cec5e9c]{display:flex;flex-direction:column;overflow-y:auto}.policy-info-panel .slideIn h3[data-v-1cec5e9c]{font-size:14px;margin:0;opacity:.7;text-transform:uppercase}.policy-info-panel .slideIn .policy-header[data-v-1cec5e9c]{border-bottom:1px solid var(--border);display:flex;align-items:center}.policy-info-panel .slideIn .policy-header .policy-title[data-v-1cec5e9c]{flex:1}.policy-info-panel .slideIn__header[data-v-1cec5e9c]{display:flex;align-items:center;justify-content:space-between}.policy-info-panel .slideIn__header__buttons[data-v-1cec5e9c]{display:flex;align-items:center}.policy-info-panel .slideIn__header__button[data-v-1cec5e9c]{cursor:pointer;display:flex;align-items:center;justify-content:center}.policy-info-panel .slideIn__header__button>i[data-v-1cec5e9c]{font-size:20px;opacity:.5}.policy-info-panel .slideIn__header__button[data-v-1cec5e9c]:hover{background-color:var(--wm-closer-hover-bg)}.policy-info-panel .slideIn__show[data-v-1cec5e9c]{right:0}",""]),e.exports=t},5281:function(e,t,a){var s=a("4ac6a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("6c8f2915",s,!0,{sourceMap:!1,shadowMode:!1})},5402:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.isCreate?t("Create",{attrs:{value:e.value,mode:e.mode}}):t("CruResource",{attrs:{resource:e.value,mode:e.realMode,"can-yaml":!1},on:{finish:e.finish}},[t("Config",{attrs:{value:e.value,mode:e.realMode},on:{updateYamlValues:e.updateYamlValuesFromEdit}})],1)},i=[],o=a("7838"),r=a.n(o),l=a("da25"),n=a("305c"),c=a("fd5f"),d=a("8b5f"),u=a("e9a3"),p=a("666d"),h=a("81fb"),v={name:"AdmissionPolicy",props:{value:{type:Object,required:!0},mode:{type:String,default:l["t"]},realMode:{type:String,default:l["t"]}},components:{CruResource:c["a"],Config:p["a"],Create:h["a"]},mixins:[n["a"]],provide(){return{chartType:this.value.type,realMode:this.realMode}},computed:{isCreate(){return this.realMode===l["r"]}},methods:{async finish(e){try{Object(d["a"])(this.value),await this.save(e)}catch(t){Object(u["a"])({error:t,store:this.$store})}},updateYamlValuesFromEdit(e){const t=r.a.load(e);Object(d["a"])(t),Object.assign(this.value,t)}}},f=v,m=(a("5d2e"),a("d802")),b=Object(m["a"])(f,s,i,!1,null,"50366f21",null);t["default"]=b.exports},"546b":function(e,t,a){"use strict";a("6166")},"5d2e":function(e,t,a){"use strict";a("dbb4")},6166:function(e,t,a){var s=a("801cb");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("224a7bda",s,!0,{sourceMap:!1,shadowMode:!1})},"666d":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("div",{staticClass:"content"},[t("div",{staticClass:"banner__title"},[e.shortDescription?[t("p",{staticClass:"banner__short-description"},[e._v(" "+e._s(e.shortDescription)+" ")]),e.policyReadme?t("button",{staticClass:"btn btn-sm role-link banner__readme-button",on:{click:e.showReadme}},[e._v(" "+e._s(e.t("kubewarden.policyConfig.description.showReadme"))+" ")]):e._e()]:e._e()],2),t("Values",{attrs:{value:e.value,"chart-values":e.chartValues,"yaml-values":e.yamlValues,mode:e.mode},on:{updateYamlValues:function(t){return e.$emit("updateYamlValues",t)}}})],1),e.policyReadme?[t("PolicyReadmePanel",{ref:"readmePanel",attrs:{"package-values":e.artifactHubPackage}})]:e._e()],2)},i=[],o=a("1fcb"),r=a.n(o),l=a("da25"),n=a("c5e6"),c=a("e24b"),d=a("15ca"),u=a("90cd"),p=a("9c6e"),h=a("1725"),v={name:"Config",props:{mode:{type:String,default:l["A"]},value:{type:Object,default:()=>{}}},components:{Loading:d["a"],Values:p["a"],PolicyReadmePanel:h["a"]},async fetch(){},async mounted(){var e;if(this.chartValues={policy:this.value,questions:null},null!==(e=this.value)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&null!==(e=e.annotations)&&void 0!==e&&e[u["b"]])try{const e=await this.value.artifactHubPackageVersion();var t;if(e&&!e.error)if(this.artifactHubPackage=e,e.description&&(this.shortDescription=e.description),e.readme&&(this.policyReadme=JSON.parse(JSON.stringify(e.readme))),null!==(t=e.data)&&void 0!==t&&t[u["c"].QUESTIONS]){var a;const t=structuredClone(u["d"]),s=r()(t.spec.settings,null===(a=this.chartValues.policy)||void 0===a||null===(a=a.spec)||void 0===a?void 0:a.settings);Object(c["k"])(this.chartValues.policy.spec,"settings",s),this.policyQuestions=this.value.parsePackageMetadata(e.data[u["c"].QUESTIONS]),this.policyQuestions&&Object(c["k"])(this.chartValues,"questions",this.policyQuestions)}}catch(s){console.warn("Unable to fetch artifacthub package: "+s)}this.yamlValues=Object(n["d"])(this.value)},data(){return{artifactHubPackage:null,chartValues:null,yamlValues:"",policyQuestions:null,shortDescription:"",policyReadme:null}},methods:{showReadme(){this.$refs.readmePanel.show()}}},f=v,m=(a("ed96"),a("d802")),b=Object(m["a"])(f,s,i,!1,null,"29773f24",null);t["a"]=b.exports},"673d":function(e,t,a){var s=a("3993");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("48b70f6a",s,!0,{sourceMap:!1,shadowMode:!1})},"6a00":function(e,t,a){"use strict";a("5281")},7089:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-5ae37dc8] .step-container{height:auto}.step__basic[data-v-5ae37dc8]{display:flex;flex-direction:column;flex:1;overflow-x:hidden}.step__basic .spacer[data-v-5ae37dc8]{line-height:2}.step__values__controls[data-v-5ae37dc8]{display:flex;margin-bottom:15px}.step__values__controls[data-v-5ae37dc8]>:not(:last-of-type){margin-right:10px}.step__values__content[data-v-5ae37dc8],.step__values__controls--spacer[data-v-5ae37dc8]{flex:1}.step__values__content[data-v-5ae37dc8] .tab-container{overflow:auto}",""]),e.exports=t},"71ed":function(e,t,a){"use strict";a("8737")},"801cb":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".step__values__controls[data-v-d467cb12]{display:flex;margin-bottom:15px}.step__values__controls[data-v-d467cb12]>:not(:last-of-type){margin-right:10px}.step__values__content[data-v-d467cb12],.step__values__controls--spacer[data-v-d467cb12]{flex:1}.step__values__content[data-v-d467cb12] .tab-container{overflow:auto}",""]),e.exports=t},"81fb":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading",{attrs:{mode:"relative"}}):t("div",[e.hideArtifactHubBanner?e._e():[t("Banner",{staticClass:"type-banner mb-20 mt-0",attrs:{"data-testid":"kw-policy-create-ah-banner",color:"warning",closable:!0},on:{close:function(t){return e.closeBanner("updateHideBannerArtifactHub")}}},[t("div",[t("p",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("kubewarden.policies.noArtifactHub",{},!0),expression:"t('kubewarden.policies.noArtifactHub', {}, true)"}],staticClass:"mb-10"}),t("AsyncButton",{attrs:{mode:"artifactHub"},on:{click:e.addArtifactHub}})],1)])],e.hideAirgapBanner?e._e():[t("Banner",{staticClass:"type-banner mb-20 mt-0",attrs:{"data-testid":"kw-policy-create-ag-banner",color:"warning",closable:!0,label:e.t("kubewarden.policies.airgap.banner")},on:{close:function(t){return e.closeBanner("updateHideBannerAirgapPolicy")}}})],e.loadingPackages?t("Loading"):e._e(),e.value&&!e.loadingPackages?t("Wizard",{ref:"wizard",staticClass:"wizard",attrs:{"data-testid":"kw-policy-create-wizard",errors:e.errors,steps:e.steps,"show-banner":!1,"edit-first-step":!0},on:{next:e.reset,cancel:e.done,finish:e.finish},scopedSlots:e._u([{key:"policies",fn:function(){return[t("PolicyTable",{attrs:{"data-testid":"kw-policy-create-table",value:e.packages},on:{selectType:function(t){return e.selectType(t)}}})]},proxy:!0},{key:"values",fn:function(){return[t("div",{staticClass:"banner__title"},[t("h2",[e._v(e._s(e.bannerTitle))]),e.customPolicy?e._e():[t("p",{staticClass:"banner__short-description"},[e._v(" "+e._s(e.shortDescription)+" ")]),t("button",{staticClass:"btn btn-sm role-link banner__readme-button",on:{click:e.showReadme}},[e._v(" "+e._s(e.t("kubewarden.policyConfig.description.showReadme"))+" ")])]],2),t("Values",{attrs:{value:e.value,"chart-values":e.chartValues,"yaml-values":e.yamlValues,mode:e.mode,"custom-policy":e.customPolicy},on:{editor:t=>e.yamlOption=t,updateYamlValues:t=>e.yamlValues=t}})]},proxy:!0},{key:"finish",fn:function(){return[t("AsyncButton",{attrs:{"data-testid":"kw-policy-create-finish-button",disabled:!e.canFinish,mode:"finish"},on:{click:e.finish}})]},proxy:!0}],null,!1,3245187313),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e(),e.packageValues&&!e.customPolicy?[t("PolicyReadmePanel",{ref:"readmePanel",attrs:{"package-values":e.packageValues}})]:e._e()],2)},i=[],o=a("7838"),r=a.n(o),l=a("1fcb"),n=a.n(l),c=a("330a"),d=a.n(c),u=a("9e74"),p=a.n(u),h=a("305c"),v=a("907c"),f=a("da25"),m=a("c5e6"),b=a("e24b"),y=a("6418"),g=a("d709"),_=a("15ca"),w=a("ed59"),k=a("90cd"),x=a("8b5f"),V=a("e9a3"),C=a("f010"),O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"policy-table-container"},[t("div",{staticClass:"filter"},[e.attributeOptions.length?t("LabeledSelect",{staticClass:"filter__attributes",attrs:{"data-testid":"kw-table-filter-source",clearable:!0,taggable:!0,mode:e.mode,multiple:!0,"label-key":"kubewarden.utils.attributes.label",options:e.attributeOptions},on:{selecting:t=>e.handleAttributeSelect(t)},model:{value:e.attributes,callback:function(t){e.attributes=t},expression:"attributes"}}):e._e(),t("LabeledInput",{ref:"searchQuery",staticClass:"input-sm filter__search",attrs:{"data-testid":"kw-table-filter-search",mode:e.mode,label:e.t("kubewarden.utils.search"),placeholder:e.t("kubewarden.generic.name")},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),t("button",{ref:"btn",staticClass:"btn role-tertiary filter__reset",attrs:{"data-testid":"kw-table-filter-refresh",type:"button"},on:{click:e.refresh}},[t("p",[e._v(" "+e._s(e.t("kubewarden.utils.resetFilter"))+" ")])])],1),t("div",{staticClass:"policy-table-actions"},[t("Checkbox",{attrs:{label:e.t("kubewarden.utils.official.label"),"data-testid":"kw-table-filter-official"},model:{value:e.showKubewardenOfficial,callback:function(t){e.showKubewardenOfficial=t},expression:"showKubewardenOfficial"}}),t("button",{ref:"btn",staticClass:"btn role-tertiary",attrs:{"data-testid":"kw-table-custom-buttom",type:"button"},on:{click:function(t){return e.$emit("selectType","custom")}}},[t("p",[e._v(" "+e._s(e.t("kubewarden.utils.custom.create"))+" ")])])],1),t("SortableTableWrapper",{attrs:{rows:e.filteredSubtypes,headers:e.POLICY_TABLE_HEADERS,"table-actions":!1,"row-actions":!1,"key-field":"package_id","default-sort-by":"name",paging:!0,search:!1},on:{selectRow:t=>e.$emit("selectType",t)}})],1)},P=[],M=a("d1f7"),S=a.n(M),A=a("5000"),R=a("2cb5"),Y=a("1d19"),j=a("466b"),E=a("8e93"),$=a("0df0"),L=a("5191");function T(e){var t;const a=[],s=null===e||void 0===e?void 0:e.flatMap(e=>{var t;const a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t["kubewarden/resources"];if(a)return a});return null===s||void 0===s||null===(t=s.flatMap(e=>{if(e){const t=e.split(",");t.length>1?t.forEach(e=>a.push(e.trim())):a.push(e)}return[]}))||void 0===t||t.sort(),a&&0!==(null===a||void 0===a?void 0:a.length)?[...new Set(a.filter(Boolean))]:[]}function I(e,t){if(e){var a;const s=null===(a=e.data)||void 0===a||null===(a=a["kubewarden/resources"])||void 0===a?void 0:a.split(",");let i=!1;if(s)for(const e of s)i=null===t||void 0===t?void 0:t.some(t=>{var a,s;return(null===t||void 0===t||null===(a=t.attributes)||void 0===a?void 0:a.kind)===e&&(!1===(null===t||void 0===t||null===(s=t.attributes)||void 0===s?void 0:s.namespaced)||void 0)});return i}return!1}var B=function(){var e=this,t=e._self._c;return t("div",[t("SortableTable",{ref:"sortableTable",attrs:{rows:e.rows,headers:e.headers,"table-actions":e.tableActions,"row-actions":e.rowActions,"key-field":e.keyField,"default-sort-by":e.defaultSortBy,paging:e.paging,search:e.search}})],1)},F=[],q=a("0fb1"),D={props:{rows:{type:Array,required:!0},headers:{type:Array,required:!0},tableActions:{type:Boolean,default:!1},rowActions:{type:Boolean,default:!1},keyField:{type:String,required:!0},defaultSortBy:{type:String,default:""},paging:{type:Boolean,default:!1},search:{type:Boolean,default:!1}},components:{SortableTable:q["a"]},data(){return{listeners:[]}},watch:{rows(){this.addRowClickListener()}},mounted(){this.addRowClickListener()},methods:{addRowClickListener(){this.$nextTick(()=>{var e;const t=null===(e=this.$refs.sortableTable)||void 0===e||null===(e=e.$el)||void 0===e?void 0:e.querySelector("table");t&&(this.removeRowClickListener(),t.querySelectorAll("tbody tr").forEach((e,t)=>{const a=()=>this.$emit("selectRow",this.rows[t]);null===e||void 0===e||e.addEventListener("click",a),this.listeners.push({row:e,listener:a})}))})},removeRowClickListener(){var e;null===(e=this.listeners)||void 0===e||e.forEach(({row:e,listener:t})=>null===e||void 0===e?void 0:e.removeEventListener("click",t)),this.listeners=[]}}},H=D,N=a("d802"),z=Object(N["a"])(H,B,F,!1,null,null,null),Q=z.exports,U={props:{mode:{type:String,default:f["r"]},value:{type:Array,default:()=>[]}},inject:["chartType"],components:{Checkbox:$["a"],LabeledSelect:j["a"],LabeledInput:E["a"],SortableTableWrapper:Q},fetch(){const e=this.$route.query;this.category=e[f["c"]]||"",this.searchQuery=e[f["k"]]||""},data(){return{KUBEWARDEN_PRODUCT_NAME:k["k"],POLICY_TABLE_HEADERS:L["e"],attributes:[this.t("kubewarden.utils.attributes.optionLabels.all")],searchQuery:null,hidePackages:[],showKubewardenOfficial:!0}},computed:{allSchemas(){return this.$store.getters["cluster/all"](v["x"])},filteredPackages(){var e;const t=null===(e=this.value)||void 0===e?void 0:e.filter(e=>{const t=this.isPrerelease(e);return!(!this.showPreRelease&&t)&&(this.chartType!==k["f"].ADMISSION_POLICY||!I(e,this.allSchemas))});return t||[]},filteredSubtypes(){const e=this.filteredPackages||[],t=e.filter(e=>{if(this.showKubewardenOfficial&&!this.isOfficial(e))return!1;if(this.searchQuery){const t=this.searchQuery.split(/\s*[, ]\s*/).map(e=>Object(R["d"])(e,!1)),a=t.every(t=>{var a,s;return(null===(a=e.display_name)||void 0===a?void 0:a.match(t))||e.description&&e.description.match(t)||(null===(s=e.keywords)||void 0===s?void 0:s.some(e=>e.match(t)))});if(!a)return!1}if(this.attributes.length){if(this.attributes.includes(this.t("kubewarden.utils.attributes.optionLabels.all")))return!0;const t=this.attributes.some(t=>{var a;const s=this.featureOptions.includes(t);if(s){var i;const a="Mutation"===t?"mutation":"contextAwareResources";return null===(i=e.data)||void 0===i?void 0:i["kubewarden/"+a]}return null===(a=e.data)||void 0===a||null===(a=a["kubewarden/resources"])||void 0===a?void 0:a.includes(t)});if(!t)return!1}return!0});return Object(Y["a"])(t,["name"])},attributeOptions(){const e=[];return this.resourceOptions.length&&e.push({kind:"group",label:this.t("kubewarden.utils.attributes.optionLabels.resource")},...this.resourceOptions),this.featureOptions.length&&e.push({kind:"group",label:this.t("kubewarden.utils.attributes.optionLabels.features")},...this.featureOptions),e.length&&e.unshift(this.t("kubewarden.utils.attributes.optionLabels.all"),{kind:"divider",label:"divider"}),e},featureOptions(){const e=[];for(const s of this.filteredPackages){var t,a;"true"===(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t["kubewarden/mutation"])&&e.push("Mutation"),null!==s&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&a["kubewarden/contextAwareResources"]&&e.push("Context Aware")}return e&&0!==e.length?[...new Set(e.filter(Boolean))]:[]},keywordOptions(){var e;const t=null===(e=this.filteredPackages)||void 0===e?void 0:e.flatMap(e=>{if(null!==e&&void 0!==e&&e.keywords&&e.keywords.length)return e.keywords});return t&&0!==(null===t||void 0===t?void 0:t.length)?[...new Set(t.filter(Boolean))]:[]},organizationOptions(){var e;const t=null===(e=this.filteredPackages)||void 0===e?void 0:e.flatMap(e=>{var t,a;const s=(null===e||void 0===e||null===(t=e.repository)||void 0===t?void 0:t.organization_display_name)||(null===e||void 0===e||null===(a=e.repository)||void 0===a?void 0:a.user_alias);return s||null});return t&&0!==t.length?[...new Set(t.filter(Boolean))]:[]},resourceOptions(){return T(this.filteredPackages)},showPreRelease(){return this.$store.getters["prefs/get"](A["k"])}},methods:{hasAnnotation(e,t){var a,s;return!(null===(a=e.data)||void 0===a||!a[t]||"false"===(null===(s=e.data)||void 0===s?void 0:s[t]))},isPrerelease(e){const t=S.a.prerelease(e.version);return t&&"deprecated-api-versions"===e.name?!!t.includes("rc"):!!t},refresh(){this.category=null,this.attributes=[this.t("kubewarden.utils.attributes.optionLabels.all")],this.searchQuery=null},isOfficial(e){var t;return(null===e||void 0===e||null===(t=e.repository)||void 0===t||null===(t=t.organization_name)||void 0===t?void 0:t.toLowerCase())===k["k"]},handleAttributeSelect(e){const t=this.t("kubewarden.utils.attributes.optionLabels.all");e.includes(t)&&(1===e.length||0!==e.indexOf(t))?this.attributes=[t]:this.attributes=e.filter(e=>e!==t)}}},K=U,W=(a("ce7c"),Object(N["a"])(K,O,P,!1,null,"73f021fc",null)),G=W.exports,J=a("1725"),X=a("9c6e"),Z={name:"Create",props:{mode:{type:String,default:f["r"]},value:{type:Object,default:()=>({})}},components:{AsyncButton:g["b"],Banner:y["a"],Loading:_["a"],Wizard:w["a"],PolicyTable:G,PolicyReadmePanel:J["a"],Values:X["a"]},inject:["chartType"],mixins:[h["a"]],async fetch(){var e,t,a;if(this.hasArtifactHub){const e=await this.value.artifactHubRepo();await this.$store.dispatch("kubewarden/fetchPackages",{repository:e,value:this.value})}this.value.apiVersion=`${null===(e=this.schema)||void 0===e||null===(e=e.attributes)||void 0===e?void 0:e.group}.${null===(t=this.schema)||void 0===t||null===(t=t.attributes)||void 0===t?void 0:t.version}`,this.value.kind=null===(a=this.schema)||void 0===a||null===(a=a.attributes)||void 0===a?void 0:a.kind},data(){return{bannerTitle:null,shortDescription:null,type:null,typeModule:null,version:null,chartValues:{policy:{},questions:{}},yamlValues:"",hasCustomPolicy:!1,yamlOption:k["x"].FORM,finishAttempts:0,stepPolicies:{hidden:!1,name:"policies",label:"Policies",ready:!1,showSteps:!1,weight:99},stepValues:{name:"values",label:"Values",ready:!0,showSteps:!1,weight:98}}},computed:{isAirgap(){return this.$store.getters["kubewarden/airGapped"]},isCreate(){return this.realMode===f["r"]},isSelected(){return!!this.type},customPolicy(){return"custom"===this.type},canFinish(){var e;return this.yamlOption===k["x"].YAML||!(null===(e=this.chartValues)||void 0===e||null===(e=e.policy)||void 0===e||null===(e=e.spec)||void 0===e||!e.module)&&this.hasRequired},hasArtifactHub(){return this.value.artifactHubWhitelist},hasRequired(){var e;if(!d()(null===(e=this.chartValues)||void 0===e?void 0:e.policy)&&this.chartValues.policy.spec){var t;const{rules:e,settings:a}=this.chartValues.policy.spec,s=["apiVersions","operations","resources"],i=this.acceptedValues(e,s),o=null===(t=this.chartValues)||void 0===t||null===(t=t.questions)||void 0===t||null===(t=t.questions)||void 0===t?void 0:t.map(e=>{if(e.required)return e.variable}).filter(Boolean),r=this.acceptedValues(a,o);if(!d()(i)&&(d()(o)||!d()(r)))return!0}return!1},hideArtifactHubBanner(){return this.$store.getters["kubewarden/hideBannerArtifactHub"]||!!this.hasArtifactHub||!!this.isAirgap},hideAirgapBanner(){return!this.isAirgap||this.$store.getters["kubewarden/hideBannerAirgapPolicy"]},packageValues(){var e,t;return null!==(e=this.type)&&void 0!==e&&null!==(e=e.repository)&&void 0!==e&&e.url?null===(t=this.packages)||void 0===t?void 0:t.find(e=>{var t;return(null===(t=e.repository)||void 0===t?void 0:t.url)===this.type.repository.url}):null},steps(){const e=[];return e.push(this.stepPolicies,this.stepValues),e.sort((e,t)=>t.weight-e.weight)},packages(){return this.$store.getters["kubewarden/packages"]},packageDetailsByKey(){return this.$store.getters["kubewarden/packageDetailsByKey"]},loadingPackages(){return this.$store.getters["kubewarden/loadingPackages"]}},methods:{acceptedValues(e,t){if(d()(t))return null;let a;return a=Array.isArray(e)?e.find(e=>this.checkProperties(e,t)):this.checkProperties(e,t),a},checkProperties(e,t){const a=[];if(!d()(t)){for(const s of t.values())d()(e[s])||a.push(s);if(t&&p()(a,t))return e}return null},async closeBanner(e,t=0){const a=await this.$store.dispatch("kubewarden/"+e,!0);0===t&&"error"===(null===a||void 0===a?void 0:a.type)&&500===(null===a||void 0===a?void 0:a.status)&&await this.close(t+1)},async createNamespace(e){const t=this.$store.getters["cluster/all"](v["n"]),a={type:v["n"],metadata:{name:e},disableOpenApiValidation:!1},s=null===t||void 0===t?void 0:t.find(t=>{var a;return(null===t||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.name)===e});if(!s){const e=await this.$store.dispatch("cluster/create",a);try{await e.save()}catch(i){this.errors.push(i)}}},async addArtifactHub(e){try{this.loadingPackages=!0,await this.value.updateWhitelist("artifacthub.io"),await this.getPackages(),e(!0),this.loadingPackages=!1}catch(t){Object(V["a"])({error:t,store:this.$store}),e(!1),this.loadingPackages=!1}},done(){var e;this.$router.replace({name:"c-cluster-product-resource",params:{cluster:this.$route.params.cluster,product:k["k"],resource:null===(e=this.schema)||void 0===e?void 0:e.id}})},async finish(e){try{var t;let i;var a,s;if(this.yamlOption===k["x"].YAML)i=r.a.load(this.yamlValues);else i=null!==(a=this.chartValues)&&void 0!==a&&a.policy?this.chartValues.policy:r.a.load(this.yamlValues);if(Object(x["a"])(i),this.finishAttempts>0?(Object.keys(this.value.spec).forEach(e=>{e in i.spec||this.$delete(this.value.spec,e)}),Object.keys(i.spec).forEach(e=>{this.$set(this.value.spec,e,i.spec[e])})):n()(this.value,i),this.chartType===k["f"].ADMISSION_POLICY&&null!==(t=this.chartValues)&&void 0!==t&&t.isNamespaceNew)await this.createNamespace(null===(s=this.value)||void 0===s||null===(s=s.metadata)||void 0===s?void 0:s.namespace);await this.attemptSave(e)}catch(i){console.error("Error creating policy",i)}},async attemptSave(e){if(await this.save(e),this.errors&&this.errors.length>0){const e=new Error("Save operation failed");throw this.finishAttempts++,e}},async getPackages(){if(this.repository=await this.value.artifactHubRepo(),this.repository&&this.repository.packages.length>0){const t=this.repository.packages.filter(e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.repository)&&void 0!==t&&null!==(t=t.url)&&void 0!==t&&t.includes(k["t"]))}),a=t.map(e=>this.packageDetails(e));try{const e=await Promise.all(a);this.packages=e.filter(e=>{var t;return"true"!==(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t["kubewarden/hidden-ui"])})}catch(e){Object(V["a"])({error:e,store:this.$store}),console.warn("Error fetching packages",e)}}},packageDetails(e){return this.packageDetailsByKey(null===e||void 0===e?void 0:e.package_id)},policyQuestions(){var e,t;const a=structuredClone(k["d"]);if(this.customPolicy){const e={spec:{contextAwareResources:[]}};return n()(a,e),Object(b["k"])(this.chartValues,"policy",a),void(this.yamlValues=Object(m["d"])(a))}const s=this.packages.find(e=>{var t,a;return(null===(t=e.repository)||void 0===t?void 0:t.url)===(null===(a=this.type)||void 0===a||null===(a=a.repository)||void 0===a?void 0:a.url)}),i=this.value.parsePackageMetadata(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e[C["a"].QUESTIONS]),o=`${null===s||void 0===s||null===(t=s.repository)||void 0===t?void 0:t.name}/${null===s||void 0===s?void 0:s.name}/${null===s||void 0===s?void 0:s.version}`,r=(e,t)=>{var a;const i=this.value.parsePackageMetadata(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a[e]);return void 0!==(null===i||void 0===i?void 0:i[t])?i[t]:i||[]},l=e=>{var t;return void 0!==(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t[e])&&JSON.parse(s.data[e])},c={apiVersion:this.value.apiVersion,kind:this.value.kind,metadata:{annotations:{[k["b"]]:o}},spec:{module:null===s||void 0===s?void 0:s.containers_images[0].image,contextAwareResources:r(C["a"].CONTEXT_AWARE,"contextAwareResources"),rules:r(C["a"].RULES,"rules"),mutating:l(C["a"].MUTATION)}};n()(a,c),Object(b["k"])(this.chartValues,"policy",a),this.yamlValues=Object(m["d"])(a),i&&Object(b["k"])(this.chartValues,"questions",i),this.shortDescription=null===s||void 0===s?void 0:s.description},reset(e){this.$nextTick(()=>{var t;if((null===(t=e.step)||void 0===t?void 0:t.name)===this.stepPolicies.name){const e=["errors","bannerTitle","shortDescription","type","typeModule","version","hasCustomPolicy"];e.forEach(e=>{this[e]=null}),this.stepPolicies.ready=!1,this.stepValues.hidden=!1,this.chartValues={policy:{},questions:{}},this.yamlOption=k["x"].FORM,this.yamlValues=""}})},selectType(e){var t;this.type=e,this.customPolicy?this.$set(this,"hasCustomPolicy",!0):this.$set(this,"hasCustomPolicy",!1),this.policyQuestions(),this.stepPolicies.ready=!0,this.$refs.wizard.next(),this.bannerTitle=this.customPolicy?"Custom Policy":null===e||void 0===e?void 0:e.display_name,this.typeModule=null===(t=this.chartValues)||void 0===t||null===(t=t.policy)||void 0===t?void 0:t.spec.module},showReadme(){this.$refs.readmePanel.show()}}},ee=Z,te=(a("d61f"),Object(N["a"])(ee,s,i,!1,null,"38945359",null));t["a"]=te.exports},8737:function(e,t,a){var s=a("7089");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("dec66a40",s,!0,{sourceMap:!1,shadowMode:!1})},"8b5f":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a("330a"),i=a.n(s),o=a("b506"),r=a.n(o);function l(e){return Object.keys(e).forEach(t=>{const a=e[t];void 0===a||null===a||""===a||Array.isArray(a)&&!a.length?delete e[t]:r()(a)&&(l(a),i()(a)&&delete e[t])}),i()(e)?null:e}},"8d6f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading",{attrs:{mode:"relative"}}):t("CruResource",{attrs:{resource:e.value,mode:e.realMode,"can-yaml":!1,"done-route":e.doneRoute,errors:e.errors,"validation-passed":e.validationPassed},on:{finish:e.finish,error:t=>e.errors=t}},[t("Values",{attrs:{value:e.value,"chart-values":e.chartValues,mode:e.mode},on:{"validation-passed":e.handleValidationPassed}})],1)},i=[],o=a("1fcb"),r=a.n(o),l=a("da25"),n=a("305c"),c=a("fd5f"),d=a("15ca"),u=a("3ca3"),p=a("90cd"),h=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading",{attrs:{mode:"relative"}}):t("div",{staticClass:"scroll__container"},[e.isCreate||e.isEdit?t("div",{staticClass:"step__values__controls"},[t("ButtonGroup",{attrs:{"data-testid":"kw-policy-server-config-yaml-option",options:e.YAML_OPTIONS,"inactive-class":"bg-disabled btn-sm","active-class":"bg-primary btn-sm"},model:{value:e.yamlOption,callback:function(t){e.yamlOption=t},expression:"yamlOption"}})],1):e._e(),t("div",{staticClass:"scroll__content"},[e.showForm?[t("Tabbed",{ref:"tabs",staticClass:"step__values__content",attrs:{"side-tabs":!0},on:{changed:function(t){return e.tabChanged(t)}}},[t(e.valuesComponent,{tag:"component",attrs:{resource:e.value,mode:e.mode},on:{"validation-passed":e.handleValidationPassed},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}})],1)]:!e.isCreate&&!e.isEdit||e.showForm?e._e():[t("YamlEditor",{ref:"yaml",staticClass:"step__values__content",attrs:{"data-testid":"kw-policy-server-config-yaml-editor",scrolling:!0,"initial-yaml-values":e.originalYamlValues,"editor-mode":e.editorMode,"hide-preview-buttons":!0},on:{onChanges:e.updateYamlValues},model:{value:e.currentYamlValues,callback:function(t){e.currentYamlValues=t},expression:"currentYamlValues"}})],t("ResourceCancelModal",{ref:"cancelModal",attrs:{"data-testid":"kw-policy-server-config-yaml-cancel","is-cancel-modal":!1,"is-form":!0},on:{"cancel-cancel":function(t){e.preYamlOption=e.yamlOption},"confirm-cancel":function(t){e.yamlOption=e.preYamlOption}}})],2)])},v=[],f=a("330a"),m=a.n(f),b=a("7838"),y=a.n(b),g=a("907c"),_=a("c5e6"),w=a("cc2d"),k=a("6860"),x=a("0cb2"),V=a("870a"),C={name:"Values",props:{mode:{type:String,default:l["r"]},chartValues:{type:Object,default:()=>{}},value:{type:Object,required:!0}},components:{ButtonGroup:w["a"],Loading:d["a"],ResourceCancelModal:k["a"],Tabbed:x["a"],YamlEditor:V["b"]},async fetch(){const e=this.generateYaml();this.currentYamlValues=e,this.originalYamlValues=e;try{await this.loadValuesComponent()}catch(t){console.error("Error loading values component: "+t)}},data(){return{YAML_OPTIONS:p["z"],currentYamlValues:"",originalYamlValues:"",showForm:!0,configValues:null,showQuestions:!0,showValuesComponent:!1,valuesComponent:null,preYamlOption:p["x"].FORM,yamlOption:p["x"].FORM,values:this.chartValues}},watch:{yamlOption(e,t){switch(e){case p["x"].FORM:this.showForm=!0;break;case p["x"].YAML:t===p["x"].FORM&&(this.currentYamlValues=this.generateYaml(),this.updateYamlValues()),this.showForm=!1;break}}},computed:{editorMode(){return V["a"].EDIT_CODE},isCreate(){return this.mode===l["r"]},isEdit(){return this.mode===l["t"]}},methods:{generateYaml(){var e;const t=this.$store.getters["cluster/all"](g["x"]),a=Object(_["b"])(t,null===(e=this.value)||void 0===e?void 0:e.type,this.chartValues),s=a.split("\n"),i=s.filter(e=>!e.includes("Error loading schema for array")),o=i.join("\n");return o},async loadValuesComponent(){this.value.haveComponent("kubewarden/policy-server")&&(this.valuesComponent=this.value.importComponent("kubewarden/policy-server"),await this.valuesComponent(),this.showValuesComponent=!0)},tabChanged(){window.scrollTop=0},updateYamlValues(){if(!m()(this.currentYamlValues)){const e=y.a.load(this.currentYamlValues);e&&r()(this.chartValues,e)}},handleValidationPassed(e){this.$emit("validation-passed",e)}}},O=C,P=(a("71ed"),a("d802")),M=Object(P["a"])(O,h,v,!1,null,"5ae37dc8",null),S=M.exports,A={components:{CruResource:c["a"],Loading:d["a"],Values:S},mixins:[n["a"]],props:{mode:{type:String,default:l["t"]},realMode:{type:String,default:l["t"]},value:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["cluster/schemaFor"](p["f"].POLICY_SERVER);await e.fetchResourceFields()},data(){return{errors:[],chartValues:this.value,validationPassed:!0}},created(){this.isCreate&&r()(this.chartValues,structuredClone(u["DEFAULT_POLICY_SERVER"]))},computed:{isCreate(){return this.realMode===l["r"]}},methods:{handleValidationPassed(e){this.validationPassed=e},async finish(e){["pod","container"].forEach(e=>{var t,a,s;null!==(t=this.chartValues)&&void 0!==t&&null!==(t=t.spec)&&void 0!==t&&null!==(t=t.securityContexts)&&void 0!==t&&null!==(t=t[e])&&void 0!==t&&t.seccompProfile&&!Object.keys(null===(a=this.chartValues)||void 0===a||null===(a=a.spec)||void 0===a||null===(a=a.securityContexts)||void 0===a||null===(a=a[e])||void 0===a?void 0:a.seccompProfile).length&&(null===(s=this.chartValues)||void 0===s||null===(s=s.spec)||void 0===s||null===(s=s.securityContexts)||void 0===s||null===(s=s[e])||void 0===s||delete s.seccompProfile)});try{await this.save(e)}catch(t){this.errors.push(t)}}}},R=A,Y=Object(P["a"])(R,s,i,!1,null,null,null);t["default"]=Y.exports},"9c6e":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading",{attrs:{mode:"relative"}}):t("div",[e.isCreate||e.isEdit?t("div",{staticClass:"step__values__controls"},[t("ButtonGroup",{attrs:{"data-testid":"kw-policy-config-yaml-option",options:e.YAML_OPTIONS,"inactive-class":"bg-disabled btn-sm","active-class":"bg-primary btn-sm"},model:{value:e.yamlOption,callback:function(t){e.yamlOption=t},expression:"yamlOption"}})],1):e._e(),t("div",{staticClass:"scroll__container"},[t("div",{staticClass:"scroll__content"},[e.showForm?[t("Tabbed",{ref:"tabs",staticClass:"step__values__content",attrs:{"side-tabs":!0},on:{changed:function(t){return e.tabChanged(t)}}},[e.valuesComponent?[t(e.valuesComponent,{tag:"component",attrs:{mode:e.mode,"custom-policy":e.customPolicy},model:{value:e.chartValues,callback:function(t){e.chartValues=t},expression:"chartValues"}})]:e._e()],2)]:!e.isCreate&&!e.isEdit||e.showForm?e._e():[t("YamlEditor",{ref:"yaml",staticClass:"step__values__content",attrs:{"data-testid":"kw-policy-config-yaml-editor",scrolling:!0,"initial-yaml-values":e.originalYamlValues,"editor-mode":e.editorMode,"hide-preview-buttons":!0},on:{onChanges:e.updateYamlValues},model:{value:e.currentYamlValues,callback:function(t){e.currentYamlValues=t},expression:"currentYamlValues"}})],t("ResourceCancelModal",{ref:"cancelModal",attrs:{"data-testid":"kw-policy-config-yaml-cancel","is-cancel-modal":!1,"is-form":!0},on:{"cancel-cancel":function(t){e.preYamlOption=e.yamlOption},"confirm-cancel":function(t){e.yamlOption=e.preYamlOption}}})],2)])])},i=[],o=a("330a"),r=a.n(o),l=a("da25"),n=a("907c"),c=a("c5e6"),d=a("e24b"),u=a("cc2d"),p=a("15ca"),h=a("6860"),v=a("0cb2"),f=a("870a"),m=a("90cd"),b={name:"Values",props:{mode:{type:String,default:l["A"]},chartValues:{type:Object,default:()=>{}},customPolicy:{type:Boolean,default:!1},value:{type:Object,required:!0},yamlValues:{type:String,default:""}},components:{ButtonGroup:u["a"],Loading:p["a"],ResourceCancelModal:h["a"],Tabbed:v["a"],YamlEditor:f["b"]},async fetch(){var e;if(r()(this.chartValues.questions)&&null!==(e=this.chartValues)&&void 0!==e&&null!==(e=e.policy)&&void 0!==e&&null!==(e=e.spec)&&void 0!==e&&e.settings)try{const e=await this.value.artifactHubPackageVersion();if(e&&!e.error){var t;const a=this.value.parsePackageMetadata(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t["kubewarden/questions-ui"]);a&&Object(d["k"])(this.chartValues,"questions",a)}}catch(a){console.warn("Unable to fetch chart questions: "+a)}try{this.version=this.$store.getters["catalog/version"]({repoType:"cluster",repoName:"kubewarden",chartName:m["h"].CONTROLLER}),await this.loadValuesComponent()}catch(a){console.warn("Unable to fetch Version: "+a)}this.generateYaml()},data(){return{YAML_OPTIONS:m["z"],currentYamlValues:"",originalYamlValues:"",showForm:!0,valuesComponent:null,preYamlOption:m["x"].FORM,yamlOption:m["x"].FORM}},mounted(){var e,t;this.mode===l["r"]&&"ClusterAdmissionPolicy"===(null===(e=this.chartValues)||void 0===e||null===(e=e.policy)||void 0===e?void 0:e.kind)&&(null!==(t=this.chartValues)&&void 0!==t&&null!==(t=t.policy)&&void 0!==t&&null!==(t=t.spec)&&void 0!==t&&t.namespaceSelector||(this.chartValues.policy.spec.namespaceSelector={}),this.chartValues.policy.spec.namespaceSelector.matchExpressions=[m["s"]])},watch:{yamlOption(e,t){switch(e){case m["x"].FORM:this.showForm=!0,this.$emit("editor",e);break;case m["x"].YAML:t===m["x"].FORM&&(this.currentYamlValues=Object(c["d"])(this.chartValues.policy),this.updateYamlValues()),this.showForm=!1,this.$emit("editor",e);break}}},computed:{editorMode(){return f["a"].EDIT_CODE},isCreate(){return this.mode===l["r"]},isEdit(){return this.mode===l["t"]}},methods:{generateYaml(){var e,t;const a=this.$store.getters["cluster/all"](n["x"]),s=null!==(e=this.chartValues)&&void 0!==e&&e.policy?structuredClone(this.chartValues.policy):this.value;var i;null!==(t=this.yamlValues)&&void 0!==t&&t.length?this.currentYamlValues=this.yamlValues:this.currentYamlValues=Object(c["b"])(a,null===(i=this.value)||void 0===i?void 0:i.type,s)},async loadValuesComponent(){var e,t;null!==(e=this.value)&&void 0!==e&&e.haveComponent("kubewarden/admission")&&(this.valuesComponent=null===(t=this.value)||void 0===t?void 0:t.importComponent("kubewarden/admission"),await this.valuesComponent())},tabChanged(){window.scrollTop=0},updateYamlValues(){this.$emit("updateYamlValues",this.currentYamlValues)}}},y=b,g=(a("546b"),a("d802")),_=Object(g["a"])(y,s,i,!1,null,"d467cb12",null);t["a"]=_.exports},a102:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.isCreate?t("Create",{attrs:{value:e.value,mode:e.mode}}):t("CruResource",{attrs:{errors:e.errors,resource:e.value,mode:e.realMode,"can-yaml":!1},on:{finish:e.finish}},[t("Config",{attrs:{value:e.value,mode:e.realMode},on:{updateYamlValues:e.updateYamlValuesFromEdit}})],1)},i=[],o=a("7838"),r=a.n(o),l=a("da25"),n=a("305c"),c=a("fd5f"),d=a("8b5f"),u=a("e9a3"),p=a("666d"),h=a("81fb"),v={name:"ClusterAdmissionPolicy",props:{value:{type:Object,required:!0},mode:{type:String,default:l["t"]},realMode:{type:String,default:l["t"]}},components:{CruResource:c["a"],Config:p["a"],Create:h["a"]},mixins:[n["a"]],provide(){return{chartType:this.value.type,realMode:this.realMode}},computed:{isCreate(){return this.realMode===l["r"]},isClone(){return this.realMode===l["p"]}},methods:{async finish(e){try{var t,a;if(Object(d["a"])(this.value),this.isClone&&this.value.isKubewardenDefaultPolicy&&"kubewarden-defaults"===(null===(t=this.value)||void 0===t||null===(t=t.metadata)||void 0===t||null===(t=t.labels)||void 0===t?void 0:t["app.kubernetes.io/name"]))null===(a=this.value)||void 0===a||null===(a=a.metadata)||void 0===a||null===(a=a.labels)||void 0===a||delete a["app.kubernetes.io/name"];await this.save(e)}catch(s){Object(u["a"])({error:s,store:this.$store})}},updateYamlValuesFromEdit(e){const t=r.a.load(e);Object(d["a"])(t),Object.assign(this.value,t)}}},f=v,m=(a("ed6d"),a("d802")),b=Object(m["a"])(f,s,i,!1,null,"1f3d98fa",null);t["default"]=b.exports},a301:function(e,t,a){var s=a("0b64");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("37240f3f",s,!0,{sourceMap:!1,shadowMode:!1})},aa17:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".content[data-v-29773f24]{position:relative;z-index:1}.banner__title[data-v-29773f24]{padding-top:10px;margin-bottom:10px;border-bottom:1px solid var(--border);min-height:60px}.banner__readme-button[data-v-29773f24]{padding:0 7px 0 0}",""]),e.exports=t},ce7c:function(e,t,a){"use strict";a("4579")},d61f:function(e,t,a){"use strict";a("673d")},dbb4:function(e,t,a){var s=a("448a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("50123390",s,!0,{sourceMap:!1,shadowMode:!1})},ed23:function(e,t,a){var s=a("aa17");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("795216f6",s,!0,{sourceMap:!1,shadowMode:!1})},ed6d:function(e,t,a){"use strict";a("a301")},ed96:function(e,t,a){"use strict";a("ed23")}}]);
//# sourceMappingURL=kubewarden-2.1.4.umd.min.edit.js.map