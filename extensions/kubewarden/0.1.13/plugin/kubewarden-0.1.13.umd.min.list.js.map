{"version":3,"sources":["webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.admissionpolicy.vue?af29","webpack://kubewarden-0.1.13/list/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.admissionpolicy.vue?21ed","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.policyserver.vue?1bbd","webpack://kubewarden-0.1.13/list/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.policyserver.vue?28e3","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-0.1.13/./components/policies/PolicyList.vue?b126","webpack://kubewarden-0.1.13/./components/policies/PolicyList.vue?bd4e","webpack://kubewarden-0.1.13/./components/policies/PolicyList.vue?c220","webpack://kubewarden-0.1.13/./components/policies/PolicyList.vue?3fcf","webpack://kubewarden-0.1.13/components/policies/PolicyList.vue","webpack://kubewarden-0.1.13/./components/policies/PolicyList.vue?cda7","webpack://kubewarden-0.1.13/./components/policies/PolicyList.vue","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.clusteradmissionpolicy.vue?e9cf","webpack://kubewarden-0.1.13/list/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.clusteradmissionpolicy.vue?278e","webpack://kubewarden-0.1.13/./list/policies.kubewarden.io.clusteradmissionpolicy.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","$fetchState","staticClass","attrs","t","resource","rows","schema","staticRenderFns","components","Banner","Loading","PolicyList","props","type","required","data","component","hasDefaults","_e","domProps","_s","on","$event","preventDefault","setChartRoute","apply","arguments","_v","ResourceTable","methods","chart","___CSS_LOADER_API_IMPORT___","exports","push","module","i","content","__esModule","default","locals","add","resourceOptions","model","value","callback","$$v","resources","expression","modeOptions","mode","ref","resetFilter","filteredRows","headers","LabeledSelect","created","computed","out","flattenRule","hasNamespaceSelector"],"mappings":"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","file":"kubewarden-0.1.13.umd.min.list.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('Banner',{staticClass:\"type-banner mb-20 mt-0\",attrs:{\"color\":\"info\",\"label\":_vm.t('kubewarden.admissionPolicy.description')}}),_c('PolicyList',{attrs:{\"resource\":_vm.resource,\"rows\":_vm.rows,\"schema\":_vm.schema}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\n\nimport PolicyList from '../components/policies/PolicyList';\n\nexport default {\n  components: {\n    Banner, Loading, PolicyList\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    const inStore = this.$store.getters['currentStore'](this.resource);\n\n    await this.$store.dispatch(`${ inStore }/findAll`, { type: this.resource });\n\n    this.rows = this.$store.getters[`${ inStore }/all`](this.resource);\n  },\n\n  data() {\n    return { rows: null };\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.admissionPolicy.description')\"\n    />\n\n    <PolicyList :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=template&id=3395740b&\"\nimport script from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[(!_vm.hasDefaults)?_c('Banner',{staticClass:\"mb-20 mt-0\",attrs:{\"color\":\"info\",\"closable\":true}},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.t('kubewarden.policyServer.noDefaultsInstalled.description', {}, true))}}),_c('button',{staticClass:\"btn role-primary mt-10\",on:{\"click\":function($event){$event.preventDefault();return _vm.setChartRoute.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.t(\"kubewarden.policyServer.noDefaultsInstalled.button\"))+\" \")])]):_vm._e(),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"rows\":_vm.rows}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { CATALOG } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\n\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nexport default {\n  components: {\n    Banner, Loading, ResourceTable\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    const inStore = this.$store.getters['currentStore'](this.resource);\n\n    await this.$store.dispatch(`${ inStore }/findAll`, { type: this.resource });\n    this.rows = this.$store.getters[`${ inStore }/all`](this.resource);\n\n    await this.$store.dispatch('catalog/load');\n\n    // Determine if the default PolicyServer is installed from the `kubewarden-defaults` chart\n    const apps = await this.$store.dispatch(`${ inStore }/findAll`, { type: CATALOG.APP });\n\n    this.hasDefaults = apps.find((a) => {\n      return a.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME] === 'rancher-kubewarden-defaults';\n    });\n  },\n\n  data() {\n    return {\n      hasDefaults: null,\n      rows:        null\n    };\n  },\n\n  methods: {\n    setChartRoute() {\n      // Check to see that `kubewarden-defaults` chart is available\n      const charts = this.$store.getters['catalog/rawCharts'];\n      const chartValues = Object.values(charts);\n\n      const controllerChart = chartValues.find(\n        chart => chart.chartName === 'kubewarden-defaults'\n      );\n\n      if ( controllerChart ) {\n        return controllerChart.goToInstall('kubewarden-defaults');\n      }\n\n      return null;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      v-if=\"!hasDefaults\"\n      class=\"mb-20 mt-0\"\n      color=\"info\"\n      :closable=\"true\"\n    >\n      <p v-html=\"t('kubewarden.policyServer.noDefaultsInstalled.description', {}, true)\"></p>\n      <button\n        class=\"btn role-primary mt-10\"\n        @click.prevent=\"setChartRoute\"\n      >\n        {{ t(\"kubewarden.policyServer.noDefaultsInstalled.button\") }}\n      </button>\n    </Banner>\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.policyserver.vue?vue&type=template&id=1953da2c&\"\nimport script from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=style&index=0&id=7569ecde&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-7569ecde]:after,.clearfix[data-v-7569ecde]:before{content:\\\" \\\";display:table}.clearfix[data-v-7569ecde]:after{clear:both}.list-unstyled[data-v-7569ecde]{margin:0;padding:0;list-style-type:none}.no-select[data-v-7569ecde]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-7569ecde]{resize:none}.hand[data-v-7569ecde]{cursor:pointer;cursor:hand}.fixed[data-v-7569ecde]{table-layout:fixed}.clip[data-v-7569ecde]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-7569ecde],.force-wrap[data-v-7569ecde]{word-wrap:break-word}.force-wrap[data-v-7569ecde]{white-space:normal}.bordered-section[data-v-7569ecde]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-7569ecde]{margin-bottom:20px;margin-top:20px}.filter[data-v-7569ecde]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end}.filter>*[data-v-7569ecde]{margin:10px}.filter[data-v-7569ecde]>:first-child{margin-left:0}.filter[data-v-7569ecde]>:last-child{margin-right:0}@media only screen and (min-width:480px){.filter[data-v-7569ecde]{width:100%}}@media only screen and (min-width:1281px){.filter[data-v-7569ecde]{width:75%}}.policy__mode[data-v-7569ecde]{display:flex;align-items:center}.policy__mode i[data-v-7569ecde]{margin-left:5px;font-size:22px;color:var(--warning)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=style&index=0&id=7569ecde&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"75de14a9\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"filter\"},[_c('LabeledSelect',{staticClass:\"filter__resources\",attrs:{\"clearable\":true,\"taggable\":true,\"multiple\":true,\"label\":\"Search by Resource\",\"options\":_vm.resourceOptions},model:{value:(_vm.resources),callback:function ($$v) {_vm.resources=$$v},expression:\"resources\"}}),_c('LabeledSelect',{staticClass:\"filter__mode\",attrs:{\"clearable\":true,\"searchable\":false,\"options\":_vm.modeOptions,\"multiple\":false,\"placement\":\"bottom\",\"label\":\"Search by Mode\"},model:{value:(_vm.mode),callback:function ($$v) {_vm.mode=$$v},expression:\"mode\"}}),_c('button',{ref:\"btn\",staticClass:\"btn, btn-sm, role-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.resetFilter}},[_vm._v(\" \"+_vm._s(_vm.t('kubewarden.utils.resetFilter'))+\" \")])],1),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"rows\":_vm.filteredRows,\"headers\":_vm.headers}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport flattenDeep from 'lodash/flattenDeep';\nimport { sortBy } from '@shell/utils/sort';\n\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nexport default {\n  components: { LabeledSelect, ResourceTable },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true\n    },\n    rows: {\n      type:     Array,\n      required: true\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      mode:             null,\n      resources:        null\n    };\n  },\n\n  created() {\n    this.mode = 'All';\n  },\n\n  computed: {\n    headers() {\n      return this.$store.getters['type-map/headersFor'](this.schema);\n    },\n\n    filteredRows() {\n      const rows = ( this.rows || [] );\n\n      const out = rows.filter((row) => {\n        const flatRules = flattenDeep(row.spec.rules);\n        const flatResources = flatRules.flatMap(r => r.resources);\n        const rowMode = row.spec.mode;\n\n        if ( this.mode && this.mode !== 'All' && this.mode !== rowMode ) {\n          return false;\n        }\n\n        if ( this.resources ) {\n          for ( const selected of this.resources ) {\n            if ( !flatResources.includes(selected) ) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n\n      return sortBy(out, ['id']);\n    },\n\n    modeOptions() {\n      const out = this.rows?.map(row => row.spec?.mode) || [];\n\n      out.unshift('All');\n\n      return [...new Set(out)];\n    },\n\n    resourceOptions() {\n      return this.flattenRule('resources');\n    }\n  },\n\n  methods: {\n    flattenRule(option) {\n      const flattened = this.rows?.flatMap((row) => {\n        const flatRules = flattenDeep(row.spec?.rules);\n\n        return flatRules.flatMap(r => r[option]);\n      });\n\n      return [...new Set(flattened)] || [];\n    },\n\n    hasNamespaceSelector(row) {\n      return row.namespaceSelector;\n    },\n\n    resetFilter() {\n      this.$set(this, 'resources', null);\n      this.$set(this, 'mode', 'All');\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"filter\">\n      <LabeledSelect\n        v-model=\"resources\"\n        :clearable=\"true\"\n        :taggable=\"true\"\n        :multiple=\"true\"\n        class=\"filter__resources\"\n        label=\"Search by Resource\"\n        :options=\"resourceOptions\"\n      />\n      <LabeledSelect\n        v-model=\"mode\"\n        :clearable=\"true\"\n        :searchable=\"false\"\n        :options=\"modeOptions\"\n        :multiple=\"false\"\n        placement=\"bottom\"\n        class=\"filter__mode\"\n        label=\"Search by Mode\"\n      />\n      <button\n        ref=\"btn\"\n        class=\"btn, btn-sm, role-primary\"\n        type=\"button\"\n        @click=\"resetFilter\"\n      >\n        {{ t('kubewarden.utils.resetFilter') }}\n      </button>\n    </div>\n\n    <ResourceTable :schema=\"schema\" :rows=\"filteredRows\" :headers=\"headers\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.filter {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-self: flex-end;\n\n  & > * {\n    margin: 10px;\n  }\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n}\n\n@media only screen and (min-width: map-get($breakpoints, '--viewport-4')) {\n  .filter {\n    width: 100%;\n  }\n}\n@media only screen and (min-width: map-get($breakpoints, '--viewport-12')) {\n  .filter {\n    width: 75%;\n  }\n}\n\n.policy {\n  &__mode {\n    display: flex;\n    align-items: center;\n\n    i {\n      margin-left: 5px;\n      font-size: 22px;\n      color: var(--warning);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyList.vue?vue&type=template&id=7569ecde&scoped=true&\"\nimport script from \"./PolicyList.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicyList.vue?vue&type=style&index=0&id=7569ecde&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7569ecde\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('Banner',{staticClass:\"type-banner mb-20 mt-0\",attrs:{\"color\":\"info\",\"label\":_vm.t('kubewarden.clusterAdmissionPolicy.description')}}),_c('PolicyList',{attrs:{\"resource\":_vm.resource,\"rows\":_vm.rows,\"schema\":_vm.schema}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\n\nimport PolicyList from '../components/policies/PolicyList';\n\nexport default {\n  components: {\n    Banner, Loading, PolicyList\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    const inStore = this.$store.getters['currentStore'](this.resource);\n\n    await this.$store.dispatch(`${ inStore }/findAll`, { type: this.resource });\n\n    this.rows = this.$store.getters[`${ inStore }/all`](this.resource);\n  },\n\n  data() {\n    return { rows: null };\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.clusterAdmissionPolicy.description')\"\n    />\n\n    <PolicyList :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=template&id=505f6681&\"\nimport script from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}