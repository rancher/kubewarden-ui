(("undefined"!==typeof self?self:this)["webpackChunkkubewarden_4_0_2"]=("undefined"!==typeof self?self:this)["webpackChunkkubewarden_4_0_2"]||[]).push([[887],{119:function(e,t,r){var a=r(22072),n=a("round");e.exports=n},777:function(e,t,r){"use strict";r.d(t,{A:function(){return R}});var a=r(9274);const n={key:0,class:"graphical"},o={class:"data"},s={key:0,class:"alerts"},i={class:"text-warning"},l={class:"count"},c={class:"text-error"},d={class:"count"};function u(e,t,r,u,h,p){const m=(0,a.resolveComponent)("GraphCircle"),f=(0,a.resolveComponent)("GradientBox");return(0,a.openBlock)(),(0,a.createBlock)(f,{class:(0,a.normalizeClass)(["count-gauge",{clickable:p.clickable}]),"primary-color-var":r.primaryColorVar,plain:r.plain,onClick:t[0]||(t[0]=e=>p.visitLocation())},{default:(0,a.withCtx)((()=>[r.graphical?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[p.percentage>0?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"primary-stroke-color":`rgba(var(${r.primaryColorVar}))`,"secondary-stroke-color":"rgb(var(--resource-gauge-back-circle))",percentage:p.percentage},null,8,["primary-stroke-color","percentage"])):(0,a.createCommentVNode)("",!0),0===p.percentage?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,"primary-stroke-color":`rgba(var(${r.primaryColorVar}))`,"secondary-stroke-color":"rgb(var(--resource-gauge-back-circle))",class:"zero",percentage:100},null,8,["primary-stroke-color"])):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("h1",null,(0,a.toDisplayString)(r.useful),1),(0,a.createElementVNode)("label",null,(0,a.toDisplayString)(r.name),1),p.showAlerts?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createElementVNode)("span",i,[t[1]||(t[1]=(0,a.createElementVNode)("i",{class:"icon icon-warning"},null,-1)),(0,a.createElementVNode)("span",l,(0,a.toDisplayString)(r.warningCount),1)]),(0,a.createElementVNode)("span",c,[t[2]||(t[2]=(0,a.createElementVNode)("i",{class:"icon icon-error"},null,-1)),(0,a.createElementVNode)("span",d,(0,a.toDisplayString)(r.errorCount),1)])])):(0,a.createCommentVNode)("",!0)])])),_:1},8,["class","primary-color-var","plain"])}const h=["viewBox"],p=["transform"],m=["id"],f=["stop-color"],g=["stop-color"],y=["id"],v=["stop-color"],b=["stop-color"],k=["r","cy","cx","stroke-width","stroke"],w=["r","cy","cx","stroke-width","stroke","stroke-dasharray","stroke-dashoffset"],$=["x","y","fill"];function x(e,t,r,n,o,s){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",{class:"circle",width:"100%",height:"100%",viewBox:s.viewBox},[(0,a.createElementVNode)("g",{transform:s.transform},[(0,a.createElementVNode)("defs",null,[(0,a.createElementVNode)("linearGradient",{id:s.primaryStrokeColorId,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[(0,a.createElementVNode)("stop",{offset:"50%","stop-color":r.primaryStrokeGradientColor||r.primaryStrokeColor},null,8,f),(0,a.createElementVNode)("stop",{offset:"100%","stop-color":r.primaryStrokeColor},null,8,g)],8,m),(0,a.createElementVNode)("linearGradient",{id:s.secondaryStrokeColorId,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[(0,a.createElementVNode)("stop",{offset:"50%","stop-color":r.secondaryStrokeGradientColor||r.secondaryStrokeColor},null,8,v),(0,a.createElementVNode)("stop",{offset:"100%","stop-color":r.secondaryStrokeColor},null,8,b)],8,y)]),(0,a.createElementVNode)("circle",{r:s.radius,cy:s.center,cx:s.center,"stroke-width":r.strokeWidth,stroke:`url(#${s.secondaryStrokeColorId})`,fill:"none"},null,8,k),(0,a.createElementVNode)("circle",{r:s.radius,cy:s.center,cx:s.center,"stroke-width":r.strokeWidth,stroke:`url(#${s.primaryStrokeColorId})`,"stroke-dasharray":s.circumference,"stroke-dashoffset":s.circumference*(1-r.percentage),fill:"none"},null,8,w)],8,p),r.showText?((0,a.openBlock)(),(0,a.createElementBlock)("text",{key:0,x:s.center,y:s.center,style:{"font-size":"25","dominant-baseline":"middle","text-anchor":"middle"},fill:`url(#${s.primaryStrokeColorId})`},(0,a.toDisplayString)(s.parsePercentage)+"% ",9,$)):(0,a.createCommentVNode)("",!0)],8,h)}let C=0;var S={props:{percentage:{type:Number,default:.75},strokeWidth:{type:Number,default:22},primaryStrokeColor:{type:String,required:!0},primaryStrokeGradientColor:{type:String,default:null},secondaryStrokeColor:{type:String,required:!0},secondaryStrokeGradientColor:{type:String,default:null},rotate:{type:Number,default:90},showText:{type:Boolean,default:!1}},data(){return{id:C++}},computed:{viewportSize(){return 100},radius(){const e=this.viewportSize/2,t=this.strokeWidth/2;return e-t},center(){return this.viewportSize/2},viewBox(){return`0 0 ${this.viewportSize} ${this.viewportSize}`},circumference(){return 2*Math.PI*this.radius},transform(){return`rotate(${this.rotate}, ${this.center}, ${this.center})`},strokeDasharray(){return this.circumference},strokeDashoffset(){return this.circumference*(1-this.percentage)},primaryStrokeColorId(){return`primary-${C}`},secondaryStrokeColorId(){return`secondary-${C}`},parsePercentage(){return parseInt(100*this.percentage)||0}}},B=(r(34941),r(47433));const N=(0,B.A)(S,[["render",x],["__scopeId","data-v-5f78e642"]]);var V=N;function E(e,t,r,n,o,s){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(["gradient-box",{"show-tab":r.showTab,plain:r.plain}]),style:(0,a.normalizeStyle)(s.style)},[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)],6)}var T={props:{primaryColorVar:{type:String,default:null},showTab:{type:Boolean,default:!0},showSolid:{type:Boolean,default:!1},backgroundOpacityAdjustment:{type:Number,default:1},plain:{type:Boolean,default:!1}},computed:{leftColor(){return this.showSolid?this.primaryColor:this.customizePrimaryColorOpacity(.25*this.backgroundOpacityAdjustment)},rightColor(){return this.showSolid?this.primaryColor:this.customizePrimaryColorOpacity(.125*this.backgroundOpacityAdjustment)},primaryColor(){return this.customizePrimaryColorOpacity(1)},style(){if(!this.plain){const e=`background: transparent linear-gradient(94deg, ${this.leftColor} 0%, ${this.rightColor} 100%) 0% 0% no-repeat padding-box;`,t=this.showTab?`border-left: 9px solid ${this.primaryColor};`:"";return`${e}${t}`}return""}},methods:{customizePrimaryColorOpacity(e){return`rgba(var(${this.primaryColorVar}), ${e})`}}};r(42959),r(77017);const A=(0,B.A)(T,[["render",E],["__scopeId","data-v-1fb0e4bb"]]);var M=A,O={components:{GradientBox:M,GraphCircle:V},props:{name:{type:String,required:!0},total:{type:Number,required:!0},useful:{type:Number,required:!0},primaryColorVar:{type:String,default:null},warningCount:{type:Number,default:0},errorCount:{type:Number,default:0},location:{type:Object,default:null},plain:{type:Boolean,default:!1},graphical:{type:Boolean,default:!0}},computed:{percentage(){return 0===this.total?0:this.useful/this.total},clickable(){return!!this.location},showAlerts(){const e=this.warningCount+this.errorCount;return e>0}},methods:{visitLocation(){this.clickable&&this.$router.push(this.location)}}};r(61761);const P=(0,B.A)(O,[["render",u]]);var R=P},2271:function(e,t,r){var a=r(29535);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=r(74825).A;n("1235fbab",a,!0,{sourceMap:!1,shadowMode:!1})},6603:function(e,t,r){"use strict";r.d(t,{A:function(){return D}});var a=r(9274);const n={class:"mt-20"};function o(e,t,r,o,s,i){const l=(0,a.resolveComponent)("Conditions"),c=(0,a.resolveComponent)("Tab"),d=(0,a.resolveComponent)("PaginatedResourceTable"),u=(0,a.resolveComponent)("RelatedResources"),h=(0,a.resolveComponent)("Tabbed"),p=(0,a.resolveDirective)("t");return(0,a.openBlock)(),(0,a.createBlock)(h,(0,a.mergeProps)(e.$attrs,{"default-tab":r.defaultTab,onChanged:i.tabChange}),{default:(0,a.withCtx)((()=>[(0,a.renderSlot)(e.$slots,"default"),s.showConditions?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,"label-key":"resourceTabs.conditions.tab",name:"conditions",weight:-1,"display-alert-icon":i.conditionsHaveIssues},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l,{value:r.value},null,8,["value"])])),_:1},8,["display-alert-icon"])):(0,a.createCommentVNode)("",!0),i.showEvents?((0,a.openBlock)(),(0,a.createBlock)(c,{key:1,"label-key":"resourceTabs.events.tab",name:"events",weight:-2},{default:(0,a.withCtx)((()=>["events"===s.selectedTab?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,schema:s.eventSchema,"local-filter":i.filterEventsLocal,"api-filter":i.filterEventsApi,"use-query-params-for-simple-filtering":!1,headers:i.eventHeaders,paginationHeaders:s.paginationHeaders,namespaced:!1},null,8,["schema","local-filter","api-filter","headers","paginationHeaders"])):(0,a.createCommentVNode)("",!0)])),_:1})):(0,a.createCommentVNode)("",!0),i.showRelated?((0,a.openBlock)(),(0,a.createBlock)(c,{key:2,name:"related","label-key":"resourceTabs.related.tab",weight:-3},{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createElementVNode)("h3",null,null,512),[[p,"resourceTabs.related.from"]]),(0,a.createVNode)(u,{"ignore-types":[r.value.type],value:r.value,direction:"from"},null,8,["ignore-types","value"]),(0,a.withDirectives)((0,a.createElementVNode)("h3",n,null,512),[[p,"resourceTabs.related.to"]]),(0,a.createVNode)(u,{"ignore-types":[r.value.type],value:r.value,direction:"to"},null,8,["ignore-types","value"])])),_:1})):(0,a.createCommentVNode)("",!0)])),_:3},16,["default-tab","onChanged"])}var s=r(10006),i=r(49584),l=r(91825);function c(e,t,r,n,o,s){const i=(0,a.resolveComponent)("SortableTable");return(0,a.openBlock)(),(0,a.createBlock)(i,{headers:s.headers,rows:s.rows,"key-field":"condition","default-sort-by":"condition","table-actions":!1,"row-actions":!1,search:!1},{"cell:condition":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)({"text-error":e.error})},(0,a.toDisplayString)(e.condition),3)])),"cell:status":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)({"text-error":e.error})},(0,a.toDisplayString)(e.status),3)])),_:1},8,["headers","rows"])}var d=r(82964),u={components:{SortableTable:d.A},props:{value:{type:Object,default:()=>({})}},computed:{headers(){return[{name:"condition",labelKey:"tableHeaders.condition",value:"condition",width:150,sort:"condition",dashIfEmpty:!0},{name:"status",labelKey:"tableHeaders.status",value:"status",width:75,sort:"status",dashIfEmpty:!0},{name:"time",labelKey:"tableHeaders.updated",value:"time",sort:"time",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,dashIfEmpty:!0},{name:"message",labelKey:"tableHeaders.message",value:"message",sort:["message"],dashIfEmpty:!0}]},rows(){return(this.value.status?.conditions||[]).map((e=>{let t=e.message||"";return e.reason&&(t=`[${e.reason}] ${t}`.trim()),{condition:e.type||"Unknown",status:e.status||"Unknown",error:e.error,time:e.lastProbeTime||e.lastUpdateTime||e.lastTransitionTime,message:t}}))}}},h=r(47433);const p=(0,h.A)(u,[["render",c]]);var m=p,f=r(35664);function g(e,t,r,n,o,s){const i=(0,a.resolveComponent)("ResourceTable");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(i,(0,a.mergeProps)(e.$attrs,{schema:e.schema,rows:e.rows,"alt-loading":e.canPaginate&&!e.isFirstLoad,loading:e.loading,groupable:e.groupable,headers:e.safeHeaders,namespaced:e.namespaced,"external-pagination-enabled":e.canPaginate,"external-pagination-result":e.paginationResult,onPaginationChanged:e.paginationChanged}),(0,a.createSlots)({_:2},[(0,a.renderList)(e.$slots,((t,r)=>({name:r,fn:(0,a.withCtx)((t=>[(0,a.renderSlot)(e.$slots,r,(0,a.normalizeProps)((0,a.guardReactiveProps)(t)))]))})))]),1040,["schema","rows","alt-loading","loading","groupable","headers","namespaced","external-pagination-enabled","external-pagination-result","onPaginationChanged"])])}var y=r(72586),v=r(31400),b=(0,a.defineComponent)({name:"PaginatedResourceTable",components:{ResourceTable:v.A},mixins:[y.A],props:{schema:{type:Object,required:!0},headers:{type:Array,default:null},paginationHeaders:{type:Array,default:null},groupable:{type:Boolean,default:null},namespaced:{type:Boolean,default:null},fetchSecondaryResources:{type:Function,default:null},fetchPageSecondaryResources:{type:Function,default:null}},data(){return{resource:this.schema.id}},async fetch(){const e=[this.$fetchType(this.resource,[],this.inStore)];this.fetchSecondaryResources&&e.push(this.fetchSecondaryResources({canPaginate:this.canPaginate})),await Promise.all(e)},computed:{safeHeaders(){const e=this.canPaginate?this.paginationHeaders:this.headers;return e||this.$store.getters["type-map/headersFor"](this.schema,this.canPaginate)}}});const k=(0,h.A)(b,[["render",g]]);var w=k,$=r(14220);function x(e,t,r,n,o,s){const i=(0,a.resolveComponent)("BadgeState"),l=(0,a.resolveComponent)("ResourceTable");return(0,a.openBlock)(),(0,a.createBlock)(l,{schema:null,rows:s.rows,headers:s.headers,search:!1,"table-actions":!1,namespaced:!0,"mangle-action-resources":s.getRealResources,"paging-label":"sortableTable.paging.generic",groupable:!1},{"cell:state":(0,a.withCtx)((({row:e})=>[e.real?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0,value:e.real},null,8,["value"])):((0,a.openBlock)(),(0,a.createBlock)(i,{key:1,value:e},null,8,["value"]))])),_:1},8,["rows","headers","mangle-action-resources"])}var C=r(72581),S=r(68774),B=r(74302),N=r(27278),V=r(87102),E={components:{ResourceTable:v.A,BadgeState:V.j},props:{value:{type:Object,required:!0},rel:{type:String,default:null},direction:{type:String,default:"to"},ignoreTypes:{type:Array,default:()=>[]}},data(){return{loadedResources:1}},computed:{filteredRelationships(){let e=this.value?.metadata?.relationships||[];return e=e.filter((e=>{const t=e[`${this.direction}Type`];return!(!t||this.ignoreTypes.includes(t))&&(!this.rel||e.rel===this.rel)})),e},rows(){if(this.loadedResources<1)return;const e=this.$store.getters["clusterId"],t=this.$store.getters["currentStore"](),r=[];for(const a of this.filteredRelationships){const n=a.state||"active",o=(0,C.uU)(n,a.error,a.transitioning),s=a[`${this.direction}Type`],i=this.$store.getters[`${t}/schemaFor`](s);let l=a[`${this.direction}Id`];if(!l)continue;let c=null;const d=l.indexOf("/"),u=`${s}/${c}/${l}`;d>0&&(c=l.substr(0,d),l=l.substr(d+1));const h={name:`c-cluster-product-resource${c?"-namespace":""}-id`,params:{product:N.o,cluster:"management"===t?"local":e,resource:s,namespace:c,id:l}};r.push({type:s,real:this.$store.getters[`${t}/byId`](s,a[`${this.direction}Id`]),id:a[`${this.direction}Id`],state:n,metadata:{namespace:c,name:l},_key:u,name:l,namespace:c,nameDisplay:l,nameSort:(0,B.RY)(l).toLowerCase(),stateColor:o,detailLocation:h,typeDisplay:this.$store.getters["type-map/labelFor"](i),stateDisplay:(0,C.ch)(n),stateBackground:o.replace("text-","bg-"),groupByLabel:c})}return r},headers(){return[S.c4,S.ZE,S.o_,S.CU]}},methods:{async getRealResources(e){const t=this.$store.getters["currentStore"](),r=await Promise.allSettled(e.map((e=>this.$store.dispatch(`${t}/find`,{type:e.type,id:e.id})))),a=[];for(let n=0;n<r.length;n++)"fulfilled"===r[n].status&&a.push(r[n].value);return this.loadedResources++,a}}};const T=(0,h.A)(E,[["render",x]]);var A=T,M=r(50025),O=r(57699),P=r(46392),R={name:"ResourceTabs",components:{Tabbed:s.A,Tab:i.A,Conditions:m,PaginatedResourceTable:w,RelatedResources:A},mixins:[l.A],props:{value:{type:Object,default:()=>({})},mode:{type:String,default:$.nW},defaultTab:{type:String,default:null},needConditions:{type:Boolean,default:!0},needEvents:{type:Boolean,default:!0},needRelated:{type:Boolean,default:!0},extensionParams:{type:Object,default:null}},data(){const e=this.$store.getters["currentStore"](f.ll),t=this.$store.getters[`${e}/schemaFor`](f.ll),r=t?[O.ke,O.qI,S.rh,(0,P.UQ)("Subobject",t,this.$store.getters,!0),(0,P.UQ)("Source",t,this.$store.getters,!0),S.w5,(0,P.UQ)("First Seen",t,this.$store.getters,!0),(0,P.UQ)("Count",t,this.$store.getters,!0),O.l3]:[];return{eventSchema:t,EVENT:f.ll,selectedTab:this.defaultTab,inStore:e,showConditions:!1,paginationHeaders:r}},beforeUnmount(){this.$store.dispatch("cluster/forgetType",f.ll)},fetch(){this.setShowConditions()},computed:{showEvents(){return this.isView&&this.needEvents&&this.eventSchema},showRelated(){return this.isView&&this.needRelated},eventHeaders(){return[{name:"type",label:this.t("tableHeaders.type"),value:"eventType",sort:"eventType"},{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"}]},conditionsHaveIssues(){return!!this.showConditions&&this.value.status?.conditions?.filter((e=>!(0,C.rv)(e))).some((e=>e.error))}},methods:{tabChange(e){this.selectedTab=e?.selectedName},async setShowConditions(){this.isView&&this.needConditions&&this.value?.type&&this.schema?.fetchResourceFields&&(await this.schema.fetchResourceFields(),this.showConditions=this.$store.getters[`${this.inStore}/pathExistsInSchema`](this.value.type,"status.conditions"))},filterEventsLocal(e){return e.filter((e=>e.involvedObject?.uid===this.value?.metadata?.uid))},filterEventsApi(e){e.filters||(e.filters=[]);const t="involvedObject.uid";let r=null;for(let n=0;n<e.filters.length;n++){const a=e.filters[n];if(a.fields.find((e=>e.field===t))){r=a;break}}const a=M.eY.createSingleField({field:t,exact:!0,value:this.value.metadata.uid,equals:!0});return r?Object.assign(r,a):e.filters.push(a),e}}};const _=(0,h.A)(R,[["render",o]]);var D=_},10279:function(e){!function(t,r){e.exports=r()}(0,(function(){"use strict";var e,t,r=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,a={years:31536e6,months:2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,weeks:6048e5},n=function(e){return e instanceof i},o=function(e,t,r){return new i(e,r,t.$l)},s=function(e){return t.p(e)+"s"},i=function(){function t(e,t,n){var i=this;if(this.$d={},this.$l=n||"en",t)return o(e*a[s(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(t){i.$d[s(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var l=e.match(r);if(l)return this.$d.years=l[2],this.$d.months=l[3],this.$d.weeks=l[4],this.$d.days=l[5],this.$d.hours=l[6],this.$d.minutes=l[7],this.$d.seconds=l[8],this.calMilliseconds(),this}return this}var i=t.prototype;return i.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,r){return t+(e.$d[r]||0)*(a[r]||1)}),0)},i.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=Math.floor(e/31536e6),e%=31536e6,this.$d.months=Math.floor(e/2592e6),e%=2592e6,this.$d.days=Math.floor(e/864e5),e%=864e5,this.$d.hours=Math.floor(e/36e5),e%=36e5,this.$d.minutes=Math.floor(e/6e4),e%=6e4,this.$d.seconds=Math.floor(e/1e3),e%=1e3,this.$d.milliseconds=e},i.toISOString=function(){var e=this.$d.years?this.$d.years+"Y":"",t=this.$d.months?this.$d.months+"M":"",r=+this.$d.days||0;this.$d.weeks&&(r+=7*this.$d.weeks);var a=r?r+"D":"",n=this.$d.hours?this.$d.hours+"H":"",o=this.$d.minutes?this.$d.minutes+"M":"",s=this.$d.seconds||0;this.$d.milliseconds&&(s+=this.$d.milliseconds/1e3);var i=s?s+"S":"",l="P"+e+t+a+(n||o||i?"T":"")+n+o+i;return"P"===l?"P0D":l},i.toJSON=function(){return this.toISOString()},i.as=function(e){return this.$ms/(a[s(e)]||1)},i.get=function(e){var t=this.$ms,r=s(e);return"milliseconds"===r?t%=1e3:t="weeks"===r?Math.floor(t/a[r]):this.$d[r],t},i.add=function(e,t,r){var i;return i=t?e*a[s(t)]:n(e)?e.$ms:o(e,this).$ms,o(this.$ms+i*(r?-1:1),this)},i.subtract=function(e,t){return this.add(e,t,!0)},i.locale=function(e){var t=this.clone();return t.$l=e,t},i.clone=function(){return o(this.$ms,this)},i.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},i.milliseconds=function(){return this.get("milliseconds")},i.asMilliseconds=function(){return this.as("milliseconds")},i.seconds=function(){return this.get("seconds")},i.asSeconds=function(){return this.as("seconds")},i.minutes=function(){return this.get("minutes")},i.asMinutes=function(){return this.as("minutes")},i.hours=function(){return this.get("hours")},i.asHours=function(){return this.as("hours")},i.days=function(){return this.get("days")},i.asDays=function(){return this.as("days")},i.weeks=function(){return this.get("weeks")},i.asWeeks=function(){return this.as("weeks")},i.months=function(){return this.get("months")},i.asMonths=function(){return this.as("months")},i.years=function(){return this.get("years")},i.asYears=function(){return this.as("years")},t}();return function(r,a,s){e=s,t=s().$utils(),s.duration=function(e,t){return o(e,{},t)},s.isDuration=n}}))},18529:function(e,t,r){"use strict";r.r(t);var a=r(36758),n=r.n(a),o=r(40935),s=r.n(o),i=s()(n());i.push([e.id,".zero circle{stroke:var(--gauge-zero)}.count-gauge{padding:10px;position:relative;display:flex;flex-direction:row;align-items:center}.count-gauge.clickable{cursor:pointer}.count-gauge .data{display:flex;flex-direction:column;flex:1}.count-gauge .data label{opacity:.7}.count-gauge .graphical{width:40px;height:40px;margin-right:10px}.count-gauge h1{font-size:40px;line-height:36px;padding-bottom:5px;margin-bottom:0}@media only screen and (min-width:768px){.count-gauge h1{font-size:40px;line-height:36px}}.count-gauge .alerts{position:absolute;right:10px;top:5px;font-size:15px}.count-gauge .alerts .text-error{margin-left:5px}",""]),t["default"]=i},22072:function(e,t,r){var a=r(78942),n=r(67642),o=r(6131),s=r(95243),i=a.isFinite,l=Math.min;function c(e){var t=Math[e];return function(e,r){if(e=o(e),r=null==r?0:l(n(r),292),r&&i(e)){var a=(s(e)+"e").split("e"),c=t(a[0]+"e"+(+a[1]+r));return a=(s(c)+"e").split("e"),+(a[0]+"e"+(+a[1]-r))}return t(e)}}e.exports=c},25562:function(e){!function(t,r){e.exports=r()}(0,(function(){"use strict";return function(e,t,r){e=e||{};var a=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};r.en.relativeTime=n;var o=function(t,a,o,s){for(var i,l,c,d=o.$locale().relativeTime||n,u=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],h=u.length,p=0;p<h;p+=1){var m=u[p];m.d&&(i=s?r(t).diff(o,m.d,!0):o.diff(t,m.d,!0));var f=(e.rounding||Math.round)(Math.abs(i));if(c=i>0,f<=m.r||!m.r){f<=1&&p>0&&(m=u[p-1]);var g=d[m.l];l="string"==typeof g?g.replace("%d",f):g(f,a,m.l,c);break}}return a?l:(c?d.future:d.past).replace("%s",l)};a.to=function(e,t){return o(e,t,this,!0)},a.from=function(e,t){return o(e,t,this)};var s=function(e){return e.$u?r.utc():r()};a.toNow=function(e){return this.to(s(this),e)},a.fromNow=function(e){return this.from(s(this),e)}}}))},26870:function(e,t,r){var a=r(73501);function n(e,t,r,n){var o=e.length,s=n?o:-1;while((n?s--:++s<o)&&t(e[s],s,e));return r?a(e,n?0:s,n?s+1:o):a(e,n?s+1:0,n?o:s)}e.exports=n},29535:function(e,t,r){"use strict";r.r(t);var a=r(36758),n=r.n(a),o=r(40935),s=r.n(o),i=s()(n());i.push([e.id,".grafana-graph[data-v-2ba52de3]{position:relative;min-height:100%;min-width:100%}.grafana-graph[data-v-2ba52de3]  .content{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;padding:0}.grafana-graph[data-v-2ba52de3]  .overlay{position:static;background-color:initial}.grafana-graph iframe[data-v-2ba52de3]{position:absolute;left:0;right:0;top:20px;bottom:0;width:100%;height:100%;overflow:hidden}.grafana-graph iframe.loading[data-v-2ba52de3]{visibility:hidden}",""]),t["default"]=i},33839:function(e,t,r){"use strict";r.r(t);var a=r(36758),n=r.n(a),o=r(40935),s=r.n(o),i=s()(n());i.push([e.id,".gradient-box{border-radius:5px}",""]),t["default"]=i},34941:function(e,t,r){var a=r(38589);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=r(74825).A;n("8fa42958",a,!0,{sourceMap:!1,shadowMode:!1})},35493:function(e,t,r){var a=r(60037);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=r(74825).A;n("5bc3db34",a,!0,{sourceMap:!1,shadowMode:!1})},38589:function(e,t,r){"use strict";r.r(t);var a=r(36758),n=r.n(a),o=r(40935),s=r.n(o),i=s()(n());i.push([e.id,"svg.text[data-v-5f78e642]{fill:red}",""]),t["default"]=i},42959:function(e,t,r){var a=r(33839);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=r(74825).A;n("0612e15c",a,!0,{sourceMap:!1,shadowMode:!1})},60037:function(e,t,r){"use strict";r.r(t);var a=r(36758),n=r.n(a),o=r(40935),s=r.n(o),i=s()(n());i.push([e.id,".dashboard-metrics[data-v-5cdbd67f]  .external-link{position:absolute;left:200px;top:-45px}.dashboard-metrics[data-v-5cdbd67f]  .frame{top:0}.dashboard-metrics.external-link-pull-left[data-v-5cdbd67f]  .external-link{position:absolute;left:10px;top:-47px}",""]),t["default"]=i},61761:function(e,t,r){var a=r(18529);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=r(74825).A;n("1834d8cb",a,!0,{sourceMap:!1,shadowMode:!1})},73501:function(e){function t(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;var o=Array(n);while(++a<n)o[a]=e[a+t];return o}e.exports=t},76142:function(e,t,r){var a=r(80097);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=r(74825).A;n("0fc0e1d4",a,!0,{sourceMap:!1,shadowMode:!1})},76633:function(e,t,r){"use strict";r.r(t);var a=r(36758),n=r.n(a),o=r(40935),s=r.n(o),i=s()(n());i.push([e.id,".gradient-box.plain[data-v-1fb0e4bb]{border:1px solid var(--border)}",""]),t["default"]=i},77017:function(e,t,r){var a=r(76633);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=r(74825).A;n("560a7308",a,!0,{sourceMap:!1,shadowMode:!1})},80097:function(e,t,r){"use strict";r.r(t);var a=r(36758),n=r.n(a),o=r(40935),s=r.n(o),i=s()(n());i.push([e.id,".graph-options[data-v-f155ff46],.graph-options .range-refresh[data-v-f155ff46]{display:flex;flex-direction:row;justify-content:flex-end}.graph-options[data-v-f155ff46]{justify-content:space-between;align-items:center}.graph-options .labeled-select[data-v-f155ff46]{width:100px;margin-left:10px}",""]),t["default"]=i},83030:function(e,t,r){"use strict";r.d(t,{A:function(){return R}});var a=r(9274);const n={class:"graph-options mb-10"},o={class:"info"};function s(e,t,r,s,i,l){const c=(0,a.resolveComponent)("DashboardOptions"),d=(0,a.resolveComponent)("GrafanaDashboard");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(["dashboard-metrics",!r.hasSummaryAndDetail&&"external-link-pull-left"])},[(0,a.createElementVNode)("div",n,[(0,a.createVNode)(c,{value:i.graphOptions,"onUpdate:value":t[0]||(t[0]=e=>i.graphOptions=e),"has-summary-and-detail":r.hasSummaryAndDetail},null,8,["value","has-summary-and-detail"])]),(0,a.createElementVNode)("div",o,[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)]),(0,a.createElementVNode)("div",{class:"graphs",style:(0,a.normalizeStyle)({height:r.graphHeight})},["detail"===i.graphOptions.type?((0,a.openBlock)(),(0,a.createBlock)(d,{key:"'detail'",class:"col span-12 detail","background-color":l.graphBackgroundColor,theme:l.theme,"refresh-rate":i.graphOptions.refreshRate,range:i.graphOptions.range,url:r.detailUrl,vars:r.vars,"modify-prefix":r.modifyPrefix},null,8,["background-color","theme","refresh-rate","range","url","vars","modify-prefix"])):((0,a.openBlock)(),(0,a.createBlock)(d,{key:"'summary'",class:"col span-12 summary","background-color":l.graphBackgroundColor,theme:l.theme,"refresh-rate":i.graphOptions.refreshRate,range:i.graphOptions.range,url:r.summaryUrl,vars:r.vars,"modify-prefix":r.modifyPrefix},null,8,["background-color","theme","refresh-rate","range","url","vars","modify-prefix"]))],4)],2)}const i={class:"graph-options"},l={key:0},c={key:1},d={class:"range-refresh"};function u(e,t,r,n,o,s){const u=(0,a.resolveComponent)("ButtonGroup"),h=(0,a.resolveComponent)("LabeledSelect");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[r.hasSummaryAndDetail?((0,a.openBlock)(),(0,a.createElementBlock)("div",l,[(0,a.createVNode)(u,{value:r.value.type,"onUpdate:value":t[0]||(t[0]=e=>r.value.type=e),options:o.detailSummaryOptions},null,8,["value","options"])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",c,t[3]||(t[3]=[(0,a.createElementVNode)("div",null,null,-1)]))),(0,a.createElementVNode)("div",d,[(0,a.createVNode)(h,{value:r.value.range,"onUpdate:value":t[1]||(t[1]=e=>r.value.range=e),options:o.rangeOptions,label:e.t("graphOptions.range")},null,8,["value","options","label"]),(0,a.createVNode)(h,{value:r.value.refreshRate,"onUpdate:value":t[2]||(t[2]=e=>r.value.refreshRate=e),options:o.refreshOptions,label:e.t("graphOptions.refresh")},null,8,["value","options","label"])])])}var h=r(96858),p=r(88697),m={components:{ButtonGroup:h.A,LabeledSelect:p.A},props:{value:{type:Object,required:!0},hasSummaryAndDetail:{type:Boolean,default:!0}},data(){return{range:null,rangeOptions:[{label:this.t("generic.units.time.5m"),value:"5m"},{label:this.t("generic.units.time.1h"),value:"1h"},{label:this.t("generic.units.time.6h"),value:"6h"},{label:this.t("generic.units.time.1d"),value:"1d"},{label:this.t("generic.units.time.7d"),value:"7d"},{label:this.t("generic.units.time.30d"),value:"30d"}],refreshOptions:[{label:this.t("generic.units.time.5s"),value:"5s"},{label:this.t("generic.units.time.10s"),value:"10s"},{label:this.t("generic.units.time.30s"),value:"30s"},{label:this.t("generic.units.time.1m"),value:"1m"},{label:this.t("generic.units.time.5m"),value:"5m"},{label:this.t("generic.units.time.15m"),value:"15m"},{label:this.t("generic.units.time.30m"),value:"30m"},{label:this.t("generic.units.time.1h"),value:"1h"},{label:this.t("generic.units.time.2h"),value:"2h"},{label:this.t("generic.units.time.1d"),value:"1d"}],detailSummaryOptions:[{label:this.t("graphOptions.detail"),value:"detail"},{label:this.t("graphOptions.summary"),value:"summary"}]}}},f=(r(76142),r(47433));const g=(0,f.A)(m,[["render",u],["__scopeId","data-v-f155ff46"]]);var y=g;const v={class:"grafana-graph"},b={class:"text-center"},k=["src"],w={key:1},$={key:2,class:"external-link"},x=["href"];function C(e,t,r,n,o,s){const i=(0,a.resolveComponent)("Banner"),l=(0,a.resolveComponent)("Loading");return(0,a.openBlock)(),(0,a.createElementBlock)("div",v,[o.error?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0,color:"error",style:{"z-index":"1000"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",b,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("grafanaDashboard.failedToLoad"))+" ",1),(0,a.createElementVNode)("a",{href:"#",onClick:t[0]||(t[0]=(...e)=>s.reload&&s.reload(...e))},(0,a.toDisplayString)(e.t("grafanaDashboard.reload")),1)])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.withDirectives)((0,a.createElementVNode)("iframe",{ref:"frame",class:(0,a.normalizeClass)({loading:o.loading,frame:!0}),src:s.currentUrl,frameborder:"0",scrolling:"no"},null,10,k),[[a.vShow,!o.error]]),o.loading?((0,a.openBlock)(),(0,a.createElementBlock)("div",w,[(0,a.createVNode)(l)])):(0,a.createCommentVNode)("",!0),o.loading||o.error?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",$,[(0,a.createElementVNode)("a",{href:s.grafanaUrl,target:"_blank",rel:"noopener nofollow"},[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("grafanaDashboard.grafana"))+" ",1),t[1]||(t[1]=(0,a.createElementVNode)("i",{class:"icon icon-external-link"},null,-1))],8,x)]))])}var S=r(84409),B=r(9980),N=r(97348),V=r(35664),E={components:{Banner:B.l,Loading:S.A},props:{url:{type:String,required:!0},vars:{type:Object,default:()=>({})},range:{type:String,default:null},refreshRate:{type:String,default:null},modifyPrefix:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#1b1c21"},theme:{type:String,default:"dark"}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;if(this.$store.getters[`${e}/canList`](V.W8.APP))try{const t=await this.$store.dispatch(`${e}/find`,{type:V.W8.APP,id:"cattle-monitoring-system/rancher-monitoring"});this.monitoringVersion=t?.currentVersion}catch(t){}},data(){return{loading:!1,error:!1,interval:null,errorTimer:null,monitoringVersion:""}},computed:{currentUrl(){return this.computeUrl()},grafanaUrl(){return this.currentUrl.replace("&kiosk","")},graphWindow(){return this.$refs.frame?.contentWindow},graphHistory(){return this.graphWindow?.history},graphDocument(){return this.graphWindow?.document}},watch:{currentUrl(e){this.graphHistory&&this.graphWindow?.angular&&this.graphWindow.location.replace(e)},error(e){e?this.errorTimer=setInterval((()=>{this.reload()}),45e3):(clearInterval(this.errorTimer),this.errorTimer=null)}},mounted(){this.$refs.frame.onload=this.inject,this.poll()},beforeUnmount(){this.interval&&clearInterval(this.interval),this.errorTimer&&clearInterval(this.errorTimer)},methods:{poll(){this.interval&&(clearInterval(this.interval),this.interval=null),this.interval=setInterval((()=>{try{const e=this.$refs.frame?.contentWindow,t=e.document.querySelectorAll('[class$="alert-error'),r=e.document.querySelectorAll('[class$="panel-info-corner--error'),a=e.document.querySelectorAll('[class$="panel-in-fullscreen'),n=e.document.querySelectorAll('[class$="panel-container'),o=t.length>0||r.length>0,s=a.length>0||n.length>0,i=e.document.getElementsByTagName("pre"),l=i.length>0?i[0].innerText:"",c=l.includes('"status": "Failure"');if(o)throw new Error("An error was detected in the iframe");this["loading"]=!s,this["error"]=c}catch(e){this["error"]=!0,this["loading"]=!1,clearInterval(this.interval),this.interval=null}}),100)},computeFromTo(){return{from:`now-${this.range}`,to:"now"}},computeUrl(){const e=this.url,t=this.$store.getters["currentCluster"].id,r=this.computeParams();return(0,N.l9)(this.monitoringVersion,e,t,r,this.modifyPrefix)},computeParams(){const e={},t=this.computeFromTo();return t.from&&(e.from=t.from),t.to&&(e.to=t.to),this.refreshRate&&(e.refresh=this.refreshRate),Object.keys(this.vars).length>0&&Object.entries(this.vars).forEach((t=>{const r=`var-${t[0]}`;e[r]=t[1]})),e.theme=this.theme,e},reload(e){e&&e.preventDefault(),this.$refs.frame.contentWindow.location.reload(),this.poll()},injectCss(){const e=document.createElement("style");e.innerHTML=`\n        body .grafana-app .dashboard-content {\n          background: ${this.backgroundColor};\n          padding: 0;\n        }\n\n        body .grafana-app .layout {\n          background: ${this.backgroundColor};\n        }\n\n\n        body .grafana-app .dashboard-content .panel-container {\n          background-color: initial;\n          border: none;\n        }\n\n        body .grafana-app .dashboard-content .panel-wrapper {\n          height: 100%;\n        }\n\n        body .grafana-app .panel-menu-container {\n          display: none;\n        }\n\n        body .grafana-app .panel-title {\n          cursor: default;\n        }\n\n        body .grafana-app .panel-title .panel-title-text div {\n          display: none;\n        }\n      `;const t=this.$refs.frame?.contentWindow,r=t?.document;r.head&&r.head.appendChild(e)},inject(){this.injectCss()}}};r(2271);const T=(0,f.A)(E,[["render",C],["__scopeId","data-v-2ba52de3"]]);var A=T,M=r(65359),O={components:{DashboardOptions:y,GrafanaDashboard:A},props:{detailUrl:{type:String,required:!0},summaryUrl:{type:String,default:""},vars:{type:Object,default:()=>({})},graphHeight:{type:String,required:!0},hasSummaryAndDetail:{type:Boolean,default:!0},modifyPrefix:{type:Boolean,default:!0}},data(){return{graphOptions:{range:"5m",refreshRate:"30s",type:"detail"}}},computed:{...(0,M.L8)(["prefs/theme"]),graphBackgroundColor(){return"dark"===this.theme?"#2e3035":"#f3f4f9"},theme(){return this["prefs/theme"]}}};r(35493);const P=(0,f.A)(O,[["render",s],["__scopeId","data-v-5cdbd67f"]]);var R=P},97348:function(e,t,r){"use strict";r.d(t,{l9:function(){return i},no:function(){return l}});var a=r(83416),n=r(50667);r(35664);const o=["100.2.0+up40.1.2","102.0.0+up40.1.2"];function s(e,t){return o.includes(e)?`/k8s/clusters/${t}`:"local"===t?"":`/k8s/clusters/${t}`}function i(e,t,r,a,o=!0){const i=(0,n.qg)(t);let l=o?`${s(e,r)}${i.path}`:i.path;return i.query.viewPanel&&(l=(0,n.R_)(l,"viewPanel",i.query.viewPanel)),l=(0,n.R_)(l,"orgId",i.query.orgId),l=(0,n.R_)(l,"kiosk",null),Object.entries(a).forEach((e=>{l=(0,n.R_)(l,e[0],e[1])})),l}async function l(e,t,r,o,i="cluster",l=null){if(!(0,a.de)(t.getters))return!1;const c=(0,n.qg)(o);let d=`${s(e,r)}/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/`,u="http:rancher-monitoring-grafana:80/proxy/";l&&(d=`${s(e,r)}/api/v1/namespaces/cattle-project-${l}-monitoring/services/http:cattle-project-${l}-monitoring-grafana:80/proxy/`,u=`http:cattle-project-${l}-monitoring-grafana:80/proxy/`);const h=c.path.split(u)[1],p=h.split("/")[1],m=`${d}api/dashboards/uid/${p}`;try{return await t.dispatch(`${i}/request`,{url:m,redirectUnauthorized:!1}),!0}catch(f){return!1}}},99241:function(e,t,r){var a=r(3334),n=r(26870);function o(e,t){return e&&e.length?n(e,a(t,3),!0):[]}e.exports=o}}]);
//# sourceMappingURL=kubewarden-4.0.2.umd.min.887.js.map